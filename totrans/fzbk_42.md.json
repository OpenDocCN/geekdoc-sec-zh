["```py\n>>> from [fuzzingbook.ExpectError](ExpectError.html) import <identifier> \n```", "```py\n>>> with ExpectError():\n>>>     x = 1 / 0\nTraceback (most recent call last):\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/2664980466.py\", line 2, in <module>\n    x = 1 / 0\n        ~~^~~\nZeroDivisionError: division by zero (expected) \n```", "```py\n>>> with ExpectTimeout(5):\n>>>     long_running_test()\nStart\n0 seconds have passed\n1 seconds have passed\n2 seconds have passed\n3 seconds have passed\n\nTraceback (most recent call last):\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/1223755941.py\", line 2, in <module>\n    long_running_test()\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/3930412460.py\", line 4, in long_running_test\n    time.sleep(1)\n  File \"Timeout.ipynb\", line 43, in timeout_handler\n    raise TimeoutError()\nTimeoutError (expected) \n```", "```py\nfrom [ExpectError](ExpectError.html) import ExpectError\n\nwith ExpectError():\n    function_that_is_supposed_to_fail() \n```", "```py\nimport [bookutils.setup](https://github.com/uds-se/fuzzingbook//tree/master/notebooks/shared/bookutils) \n```", "```py\nimport [traceback](https://docs.python.org/3/library/traceback.html)\nimport [sys](https://docs.python.org/3/library/sys.html) \n```", "```py\nfrom [types](https://docs.python.org/3/library/types.html) import FrameType, TracebackType \n```", "```py\nclass ExpectError:\n  \"\"\"Execute a code block expecting (and catching) an error.\"\"\"\n\n    def __init__(self, exc_type: Optional[type] = None, \n                 print_traceback: bool = True, mute: bool = False):\n  \"\"\"\n Constructor. Expect an exception of type `exc_type` (`None`: any exception).\n If `print_traceback` is set (default), print a traceback to stderr.\n If `mute` is set (default: False), do not print anything.\n \"\"\"\n        self.print_traceback = print_traceback\n        self.mute = mute\n        self.expected_exc_type = exc_type\n\n    def __enter__(self) -> Any:\n  \"\"\"Begin of `with` block\"\"\"\n        return self\n\n    def __exit__(self, exc_type: type, \n                 exc_value: BaseException, tb: TracebackType) -> Optional[bool]:\n  \"\"\"End of `with` block\"\"\"\n        if exc_type is None:\n            # No exception\n            return\n\n        if (self.expected_exc_type is not None\n            and exc_type != self.expected_exc_type):\n            raise  # Unexpected exception\n\n        # An exception occurred\n        if self.print_traceback:\n            lines = ''.join(\n                traceback.format_exception(\n                    exc_type,\n                    exc_value,\n                    tb)).strip()\n        else:\n            lines = traceback.format_exception_only(\n                exc_type, exc_value)[-1].strip()\n\n        if not self.mute:\n            print(lines, \"(expected)\", file=sys.stderr)\n        return True  # Ignore it \n```", "```py\ndef fail_test() -> None:\n    # Trigger an exception\n    x = 1 / 0 \n```", "```py\nwith ExpectError():\n    fail_test() \n```", "```py\nTraceback (most recent call last):\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/1235320646.py\", line 2, in <module>\n    fail_test()\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/278441162.py\", line 3, in fail_test\n    x = 1 / 0\n        ~~^~~\nZeroDivisionError: division by zero (expected)\n\n```", "```py\nwith ExpectError(print_traceback=False):\n    fail_test() \n```", "```py\nZeroDivisionError: division by zero (expected)\n\n```", "```py\nwith ExpectError(ZeroDivisionError):\n    fail_test() \n```", "```py\nTraceback (most recent call last):\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/1259188418.py\", line 2, in <module>\n    fail_test()\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/278441162.py\", line 3, in fail_test\n    x = 1 / 0\n        ~~^~~\nZeroDivisionError: division by zero (expected)\n\n```", "```py\nwith ExpectError():\n    with ExpectError(ZeroDivisionError):\n        some_nonexisting_function() \n```", "```py\nTraceback (most recent call last):\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/2242794116.py\", line 2, in <module>\n    with ExpectError(ZeroDivisionError):\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/var/folders/n2/xd9445p97rb3xh7m1dfx8_4h0006ts/T/ipykernel_71827/2242794116.py\", line 3, in <module>\n    some_nonexisting_function()  # type: ignore\n    ^^^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name 'some_nonexisting_function' is not defined (expected)\n\n```", "```py\nfrom [ExpectError](ExpectError.html) import ExpectTimeout\n\nwith ExpectTimeout(2) as t:\n    function_that_is_supposed_to_hang() \n```", "```py\nimport [sys](https://docs.python.org/3/library/sys.html)\nimport [time](https://docs.python.org/3/library/time.html) \n```", "```py\nfrom [Timeout](Timeout.html) import Timeout \n```", "```py\nclass ExpectTimeout(Timeout):\n  \"\"\"Execute a code block expecting (and catching) a timeout.\"\"\"\n\n    def __init__(self, timeout: Union[int, float],\n                 print_traceback: bool = True, mute: bool = False):\n  \"\"\"\n Constructor. Interrupt execution after `seconds` seconds.\n If `print_traceback` is set (default), print a traceback to stderr.\n If `mute` is set (default: False), do not print anything.\n \"\"\"\n        super().__init__(timeout)\n\n        self.print_traceback = print_traceback\n        self.mute = mute\n\n    def __exit__(self, exc_type: type,\n                 exc_value: BaseException, tb: TracebackType) -> Optional[bool]:\n  \"\"\"End of `with` block\"\"\"\n\n        super().__exit__(exc_type, exc_value, tb)\n\n        if exc_type is None:\n            return\n\n        # An exception occurred\n        if self.print_traceback:\n            lines = ''.join(\n                traceback.format_exception(\n                    exc_type,\n                    exc_value,\n                    tb)).strip()\n        else:\n            lines = traceback.format_exception_only(\n                exc_type, exc_value)[-1].strip()\n\n        if not self.mute:\n            print(lines, \"(expected)\", file=sys.stderr)\n\n        return True  # Ignore exception \n```", "```py\ndef long_running_test() -> None:\n    print(\"Start\")\n    for i in range(10):\n        time.sleep(1)\n        print(i, \"seconds have passed\")\n    print(\"End\") \n```", "```py\nwith ExpectTimeout(5, print_traceback=False):\n    long_running_test() \n```", "```py\nStart\n0 seconds have passed\n1 seconds have passed\n2 seconds have passed\n3 seconds have passed\n\n```", "```py\nTimeoutError (expected)\n\n```", "```py\nwith ExpectTimeout(5, print_traceback=False):\n    with ExpectTimeout(3, print_traceback=False):\n        long_running_test()\n    long_running_test() \n```", "```py\nStart\n0 seconds have passed\n1 seconds have passed\n\n```", "```py\nTimeoutError (expected)\n\n```", "```py\nStart\n0 seconds have passed\n1 seconds have passed\n2 seconds have passed\n3 seconds have passed\n\n```", "```py\nTimeoutError (expected)\n\n```", "```py\n@incollection{fuzzingbook2023:ExpectError,\n    author = {Andreas Zeller and Rahul Gopinath and Marcel B{\\\"o}hme and Gordon Fraser and Christian Holler},\n    booktitle = {The Fuzzing Book},\n    title = {Error Handling},\n    year = {2023},\n    publisher = {CISPA Helmholtz Center for Information Security},\n    howpublished = {\\url{https://www.fuzzingbook.org/html/ExpectError.html}},\n    note = {Retrieved 2023-11-11 18:25:46+01:00},\n    url = {https://www.fuzzingbook.org/html/ExpectError.html},\n    urldate = {2023-11-11 18:25:46+01:00}\n}\n\n```"]