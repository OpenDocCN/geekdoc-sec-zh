# 第十一部分:段寄存器

> 原文：<https://0xinfection.github.io/reversing/pages/part-11-segment-registers.html>

如需所有课程的完整目录，请点击下方，因为除了课程涵盖的主题之外，它还会为您提供每个课程的简介。[`github . com/mytechnotalent/逆向工程-教程`](https://github.com/mytechnotalent/Reverse-Engineering-Tutorial)

段寄存器专门用于引用内存位置。有三种不同的访问系统内存的方法，其中我们将重点关注与我们的目的相关的平面内存模型。

有如下六个段寄存器:

**CS** :代码段寄存器存储代码段的基址(。文本部分)，用于数据访问。

**DS** :数据段寄存器存储变量的默认位置(。数据段)，用于数据访问。

**ES** :字符串操作时使用的额外段寄存器。

**SS** :栈段寄存器存储栈段的基址，在隐式使用栈指针或显式使用基址指针时使用。

**FS** :额外段寄存器。

**GS** :额外段寄存器。

每个段寄存器都是 16 位的，包含指向存储器特定段起始位置的指针。CS 寄存器包含指向存储器中代码段的指针。代码段是指令代码存储在内存中的地方。处理器根据 CS 寄存器值和指令指针(EIP)寄存器中包含的偏移值从存储器中检索指令代码。请记住，任何程序都不能显式加载或更改 CS 寄存器。当程序被分配一个内存空间时，处理器分配它的值。

DS、ES、FS 和 GS 段寄存器都用于指向数据段。四个独立的数据段中的每一个都有助于程序分离数据元素，以确保它们不会重叠。该程序用段的适当指针值加载数据段寄存器，然后使用偏移值引用各个存储器位置。

堆栈段寄存器(SS)用于指向堆栈段。堆栈包含传递给程序中的函数和过程的数据值。

段寄存器被认为是操作系统的一部分，几乎在所有情况下都不能直接读取或更改。当在保护模式平面模型(32 位 x86 架构)中工作时，您的程序运行并接收 4GB 地址空间，除了操作系统定义的受保护区域之外，任何 32 位寄存器都可以对 40 亿个内存位置中的任何一个进行寻址。物理内存可能大于 4GB，但是 32 位寄存器只能表示 4，294，967，296 个不同的位置。如果您的计算机有超过 4GB 的内存，操作系统必须在内存中安排一个 4GB 的区域，并且您的程序被限制在这个新的区域内。该任务由段寄存器完成，操作系统对此保持密切控制。

在下一篇教程中，我们将继续讨论 IA-32 架构的指令指针寄存器。