# 前言

> 原文：[`cryptobook.nakov.com/preface`](https://cryptobook.nakov.com/preface)

你是一名**软件开发者**？有时你需要在日常工作中使用**密码学**，比如散列、加密或数字签名？你认为密码学很复杂，充满了数学，只有书呆子才会？不，这不是真的，每个开发者都可以学习**如何使用密码学算法**。这本书将向您展示如何：通过代码示例和动手编码经验，减少数学内容，增加实践。

不需要成为一位强大的数学家，甚至不需要是数学家，就能从**开发者的角度理解密码学概念**。这本书将以几乎不涉及数学的风格教授您**应用密码学**的基础知识，采用逐步的方法，辅以大量的**代码示例**和**实践练习**（动手经验），就像您学习 Web 开发、数据库或移动应用时一样。是的，如果您能学习 Web 开发或 RESTful 服务，您也可以学习密码学的实用方面。这就像学习一个新的 API 或一个新的 Web 开发框架：您学习的是**概念**+ **APIs**（在密码学库中实现的密码学算法）+ **工具**+ **最佳实践**，如何使用这些 API 和工具。

从这本书中，您将学习如何使用密码学算法和密码系统，如散列、MAC 代码和密钥派生函数（KDF）、随机生成器、密钥交换协议、对称加密、加密方案、非对称密码系统、公钥密码学、椭圆曲线、数字签名和量子安全密码算法，以及现代密码学工具和库。

我很高兴能发布这本免费的**开发者友好型实用密码学书籍**。它包含了开发者为了在日常工作中使用密码学所需了解的所有内容。它不涉及算法的内部结构以及如何设计对称加密、公钥密码系统或认证方案。它涵盖了**核心密码学概念**的基本理解以及如何从开发者的角度使用它们：**库**、**工具**、**代码示例**。这正是大多数开发者需要了解的密码学知识。这正是这本书免费提供给您的。

## [](#this-book-is-for-developers)这本书是为开发者准备的！

这本书是为那些每天编写代码的**开发者**，为创建软件系统、Web 应用、移动应用和其他软件的**软件工程师**而设计的。它也可能对处理加密算法并编写代码来自动化 IT 基础设施的**DevOps 工程师**有用，对希望更好地学习实用密码学的**系统管理员**，对需要每天处理密码学并了解哪些密码和加密算法是安全的以及哪些是已破解的**信息安全工程师**，对执行关于安全和密码学的安全测试和代码审查的**经验丰富的 QA 工程师**，以及许多其他**IT 专业人士**都有用。

这本书是关于**使用加密算法**和加密包的，而不是关于设计密码、签名方案和密码系统的。你将学习密码系统是如何工作的（不需要太多数学知识），以及如何在日常工作中使用它们。这本书不是完全没有数学，但复杂度降低到与平均开发者的水平相匹配，复杂的概念以简化和易于理解的方式解释。这本书是由**开发者为开发者**创作的，而不是由大学教授或数学家。它关于以智能的方式编码，理解概念，**正确地使用加密算法和加密库**。它关于现代加密算法和加密技术，这些技术目前在软件行业（截至 2018 年 11 月）中使用。

我们假设大多数开发者使用**高级编程语言**（如 JavaScript、Python、C#、Java 和 PHP），因此本书中的大多数代码示例都是用**Python**给出的，这可以轻松地翻译成其他语言。

## 此书免费

主要作者**Svetlin Nakov 博士**将这本书及其全部内容和代码示例**免费**捐赠给开发者和 IT 社区，作为一个**开源项目**，在[MIT 许可证](https://opensource.org/licenses/MIT)下。为什么？因为主要作者和这个项目背后的人相信**知识属于每个人**，它应该**免费共享**，因为开发者应该学会正确地使用密码学，因为我们的世界需要更多安全的软件，因为**免费共享知识和技能**是现代教育的最大奇迹。

由于同样的原因，驱使人们建立**维基百科**并免费分享知识，在**GitHub**上发布开源项目并免费分享代码，开发如**GNU/Linux**和**Firefox**等开源软件并免费分发，我撰写并发布了这本面向开发者的开源密码学书籍。我想要**分享知识和技能**，帮助开发者成为**更好的专业人士**。作为一位个人开发者，当我学习一项新技术时，我会在互联网上寻找免费资源和代码示例，并且我很高兴有人创建并免费分享它们。现在，是时候回馈社会和开发者社区了，这让我感到很高兴。

## [](#about-the-author-dr.-svetlin-nakov)关于作者：Dr. Svetlin Nakov

Dr. **Svetlin Nakov** ([`www.nakov.com`](http://www.nakov.com)) 是来自保加利亚的充满激情的**软件工程师**、鼓舞人心的**技术培训师**和**技术企业家**，在广泛的编程语言、软件技术和平台上拥有经验。他是几家高度成功的**技术初创公司**和非营利组织的联合创始人，并在几个成功的区块链**ICO 项目**中担任**技术顾问**。Svetlin 是 [**SoftUni**](https://softuni.org) 的培训、创新和灵感经理——这是东南欧最大的技术教育提供商。

![图片](img/3e2939ac3967834adc8e05a84962b566.png)

Svetlin Nakov 拥有超过 20 年的技术背景，作为软件工程师、软件项目经理、顾问、**培训师**和**企业家**，在 .NET、Java EE、信息系统、数据库、密码学和软件安全、Web 开发、JavaScript、PHP、Python 和软件工程方面拥有丰富的经验。他是计算机编程、软件技术、密码学、C#、Java、JavaScript、Python 以及数十篇技术科学论文的**15 本书**的主要作者。他是**知识分享**的忠实粉丝，并自豪地是维基百科的贡献者、免费书籍的作者和开源支持者。

Svetlin 在美国、新加坡、德国、埃及、保加利亚和其他地点的数百个会议、研讨会、聚会、课程和其他培训中担任过**演讲者**。他拥有计算机科学博士学位（他的研究课题是计算语言学和机器学习），获得了**国际信息学奥林匹克竞赛**（IOI）和保加利亚**总统奖“约翰·阿塔纳索夫”**的几枚**奖章**。他曾在索非亚大学、新保加利亚大学、索非亚技术大学、新加坡南洋理工学院、美国金斯兰大学和其他几所大学担任兼职助理教授/培训师。

目前，**斯维特林·纳科夫**与其合作伙伴一起推动着保加利亚和该地区最大的软件工程师培训中心的全球扩张——[**软件大学**](https://softuni.org)，在那里他激励和**教授数十万年轻人**计算机科学、软件开发、信息技术和数字技能，并为他们提供职业和就业机会。

## [](#the-history-behind-this-book)本书背后的历史

斯维特林·纳科夫与数十位合著者共同创建并发布了（在 2004-2018 年期间）关于计算机编程和软件技术的**数十本技术书籍**作为开源项目（请参阅[`www.introprogramming.info`](http://www.introprogramming.info)和[`www.nakov.com/books`](http://www.nakov.com/books)），其中大部分是用保加利亚语编写的。在过去的几年里，斯维特林转向使用英语，并采取了**全球知识共享倡议**，以提供**更好和更易于获取的技术教育**，这体现在创建和分享免费技术书籍、免费教程、免费技术网络研讨会和研讨会、会议演讲以及许多其他活动中。

本书作者**斯维特林·纳科夫**自 2005 年起涉足**应用密码学**领域，当时他出版了《*Java for Digitally Signing Documents of the Web*》（保加利亚语版）一书，该书是其关于类似主题的硕士论文的后续作品。后来，纳科夫在软件工程师、技术培训师和企业家实践中涉足**密码学**、**软件安全**和**区块链**系统，他的技术专长随着经验的增长而增长。2018 年，他决定撰写一本**免费书籍**，分享他从开发者角度对密码学和加密算法的知识，并将这些知识捐赠给全球开发者社区。这本书历时 3 个月完成，并于 2018 年 11 月出版。您可以从以下链接获取免费副本：[`cryptobook.nakov.com`](https://cryptobook.nakov.com)。

## [](#the-software-university-softuni)软件大学（SoftUni）

本书的发展得到了[**软件大学（SoftUni）**](https://softuni.org)的支持：这是南欧地区最大、最受尊敬的软件工程和数字技能培训中心，为成千上万的年轻人提供高质量的技术教育、实用技能、职业和就业机会。

![](https://softuni.org)

**SoftUni**在[**软件大学**](https://softuni.org)项目中教授软件工程师，在[**SoftUni Creative**](https://creative.softuni.bg)项目中教授创意和设计，在[**SoftUni Digital**](https://digital.softuni.bg)项目中教授数字营销，在[**SoftUni Kids**](https://kids.softuni.bg)项目中教授儿童的编程和科技技能，运营一个数字技能高中[**SoftUni Svetlina**](https://svetlina.softuni.bg)，并通过[**SoftUni Foundation**](http://softuni.foundation)及其[**SoftUni Free**](http://free.softuni.org)技术教育门户分享知识和技能。

## [](#why-yet-another-book-on-cryptography)为什么还需要另一本关于密码学的书？

市面上大多数关于密码学的书籍要么是过于**学术化**的风格，包含大量理论和数学，要么是**过时**的，没有描述今天使用的密码学，或者内容过于**薄弱**和未完成。其他书籍可能更好，但它们**不是免费的**，也不是每个人都能获取的。

这本书《**面向开发者的实用密码学**》试图弥补市场上现有密码学书籍的所有上述不足：它是**免费的**，**面向开发者的**，**全面的**，数学较少，代码示例更多。

### [](#academic-cryptography-books)学术密码学书籍

市场上存在许多高质量的**学术密码学书籍**，其中一些是**免费的**，但我不能向开发者推荐这样的书籍。他会在第一章或第二章之后感到无聊，并开始讨厌密码学。以下是一些例子：

+   在密码学概念方面最强大的**学术书籍之一**是“[**应用密码学研究生课程**](https://crypto.stanford.edu/~dabo/cryptobook/)”（由 Dan Boneh 和 Victor Shoup 编写）。这是一本关于**理论密码学**的优秀**免费**书籍，但不适合开发者。它充满了理论、概念、数学和公式。它不提供代码示例或为开发者推荐的库。内容更新（2017 年出版）。

+   “[**Crypto 101**](https://www.crypto101.io)”是一本关于密码学的**免费书籍**，对于开发者来说更容易**理解**。它为核心密码学概念提供了更简单的解释，但没有代码示例、推荐的库和工具。内容更新（2017 年出版）。

+   “[**应用密码学手册**](http://cacr.uwaterloo.ca/hac)”（由 Alfred J. Menezes，Paul C. van Oorschot 和 Scott A. Vanstone 编写）对于高年级学生来说非常优秀，但对于开发者来说**过于学术化**。它是**免费**的，并且非常详细地解释了理论和密码学概念，包含大量的高级数学，但绝对不适合开发者。它不提供可工作的代码示例，也不涉及软件行业中使用的最常用的密码库。有些过时（2001 年出版）。

+   另一本好的 **学术密码学书籍** 是 "[**理解密码学：学生和实践者的教科书**](https://books.google.bg/books?id=f24wFELSzkoC)"（克里斯托夫·帕尔、巴特·普雷尼尔、简·佩尔茨著）。这是一本关于 **密码学概念** 的优秀书籍，组织良好，包含伪代码中的算法，但它不是为开发者准备的。它不提供代码示例和推荐库，几乎是最新的（2010 年出版），但不是免费的。

+   另一本关于加密概念的 **学术书籍**："[**实用密码学**](https://books.google.bg/books?id=ThVRAAAAMAAJ)"（尼尔斯·弗格森和布鲁斯·施奈尔著，2003 年）。提供了对流行加密算法的深入概念和解释，以及伪代码。略过时（2003 年出版）。

### [](#crypto-libraries-and-their-documentation)加密库及其文档

一些 **加密库** 尝试提供包含加密概念和代码示例的 **文档**，但它们通常是 **有限的**，有时未完成，且组织上并不总是连贯，存在许多遗漏的点，虽然可以用来帮助使用某些库，但并不是学习加密概念的最好来源。

然而，这些文档和手册是开发者想要 **使用加密算法** 的 **最佳免费学习资源** 之一，尤其是那些在密码学领域有先前知识和技能的经验丰富的工程师。以下是一些关于加密算法的优秀文档示例，它们随某些加密库一起提供：

+   [**Nettle 文档**](http://www.lysator.liu.se/~nisse/nettle/nettle.html) - 包含了对最流行的加密概念和常用算法（如哈希、MAC、对称加密、签名）的非常优秀的描述，以及可靠且快速的 **C** 语言实现。

+   [**PyCA / Cryptography 文档**](https://cryptography.io/en/latest/hazmat/primitives/) - 包含了许多加密原语（如哈希、MAC 代码、对称加密、认证加密、非对称算法、密钥交换、KDF 等）的基本描述，以及 **Python** 中的代码示例，展示了如何使用 pyca/cryptography 库的 API 和其加密算法。

+   [**Libsodium 文档**](https://download.libsodium.org/doc/) - 将 API 文档与加密概念元素相结合。它与 **C** 语言绑定，用于 Libsodium 项目。提供示例代码。

+   [**Crypto++ Wiki**](https://www.cryptopp.com/wiki/) - 简要解释了一些密码学概念，以及如何使用 Crypto++ 库和 **C++** 类来实现某些加密算法的指南。提供示例代码。

+   [**Botan 开发者手册**](https://botan.randombit.net/manual/) - 是一个现代的 **C++** 加密库，其中包含了众多现代加密算法的实现，以及包含对底层加密概念简要描述的文档。

+   [《Libgcrypt 手册**》](https://gnupg.org/documentation/manuals/gcrypt/) - 一个加密库，作为 GnuPG 项目的一部分用 C 编写。附带对加密概念的非常轻量级介绍和一份无聊的 API 文档，几乎没有示例代码。

### [](#practical-cryptography-existing-books)实用密码学 - 现有书籍

实话实说，我在 2018 年 11 月对图书市场进行了**全面的研究**，以寻找最佳的面向开发者的密码学书籍。我感到**非常失望**！我几乎找不到任何关于**程序员密码学**的优秀实用书籍，我可以自信地向一位开发者朋友推荐这本书，确信这本书真的很棒，确实是开发者所需要的：现代密码学 + 简单解释的概念 + 代码示例。我发现了一些**非常好的学术书籍**和一些**面向开发者的书籍**（代码示例丰富），但质量要么不高，要么非常专注于某些技术（如 API 参考或库手册）。其中一些也过时了，但仍然很有价值。

#### [](#free-cryptography-books-for-developers)开发者免费密码学书籍

这是关于开发者实用密码学的**免费书籍**列表：

+   [《使用 Go 进行实用密码学**》](https://leanpub.com/gocrypto/read)（由 Kyle Isom 著，2015 年出版）- 一本关于如何使用 Go 语言进行密码学的迷你书籍，充满了代码示例。它有**免费版**（在线阅读）和**付费版**（PDF、EPUB、MOBI）。这本书不错，但其范围有限，仅简要描述了一些概念，并通过代码示例演示了如何使用它们。它涵盖了现代对称加密（如 AES-GCM 和 XSalsa20-Poly1305）、密钥派生（PBKDF2 和 Scrypt）、密钥交换和 ECDH、数字签名（ECDSA 和 Ed25519），以及一些其他概念。

+   [《Java 代码中的密码学法则**》](http://www.cs.utsa.edu/~wagner/lawsbookcolor/laws.pdf)（由 Neal Wagner 著，2003 年出版）- 一本关于密码学的学术风格书籍，包含可工作的 Java 示例，实现了某些加密算法（如 AES 加密和 RSA 密码系统）。

+   [《.NET Succinctly 中的密码学**》](https://www.syncfusion.com/ebooks/cryptography_in_net_succinctly/cryptography-a-brief-history)（由 Dirk Strauss 著，2017 年）- 关于使用某些加密原语（如 AES、散列和 RSA 签名）的.NET 代码示例汇编，从 C#出发。看起来更像是一个 API 参考，而不是一本严肃的书籍，解释了何时以及如何使用所提到的加密算法、底层密码系统的概念以及底层算法的特定细节。

#### [](#non-free-cryptography-books-for-developers)开发者非免费密码学书籍

我可以列出一些对开发者友好的、包含代码示例的 **实用密码学书籍**，它们只有付费/商业版本（**没有免费版本**）。大多数书籍与特定的技术紧密相关，如 C、C++、Java 或 JavaScript，并且对概念的解释不够好。其他书籍有不同的侧重点。有些过时，有些相当新。这是我从关于开发者友好密码学书籍的研究中找到的列表：

+   [**严肃的密码学：现代加密的实用介绍**](https://books.google.bg/books?id=hLcrDwAAQBAJ)（作者：Jean-Philippe Aumasson）- 一本关于密码学的优秀书籍，结合了学术方法和更实用的方法，包含一些 **Python** 代码示例，但并非所有概念都有涉及。近期出版（2017 年）。解释了现代密码学概念和加密套件，如 AES-GCM、ChaCha20-Poly1305 和量子安全密码学。这可能是我所找到的最好的书籍之一。

+   [**C 和 C++ 的安全编程手册**](https://books.google.bg/books?id=aL3P3eJdiREC)（作者：John Viega，Matt Messier）- 为 **C++** 开发者提供安全编码指南，包括密码学相关主题（散列、MAC 代码、对称加密、RSA 和 DSA、随机数），并包含代码示例（2009 年出版，略过时）。

+   [**开发者的密码学**](https://books.google.bg/books?id=VaiYIZHduXQC)（作者：Tom Denis）- 提供了密码学和加密算法的坚实基础，包括 **C** 和汇编器的实现，以及大量的代码示例。介于学术风格和开发者风格之间。涵盖了散列、HMAC、AES、RSA 和 ECC。略过时（2007 年出版）。

+   [**Java 入门密码学**](https://books.google.bg/books?id=WLLAD2FKH3IC)（作者：David Hook）- 一本关于 JCA、JCE、JSSE 和 Bouncy Castle 密码库的参考书，包含大量的 **Java** 代码示例（2005 年出版，过时）。

+   [**JavaScript 开发者的密码学：Web 密码学 API，SJCL**](https://books.google.bg/books?id=8oBxDwAAQBAJ)（作者：Anish Nath）- 一本充满代码示例的参考书，使用 **JS** 编写，但并未解释对称加密、认证加密等概念（2018 年出版）。

+   [**Python 实战密码学**](https://books.google.bg/books?id=LsNiDwAAQBAJ)（作者：Samuel Bowne）- 一本很好的小册子（87 页，2018 年出版），包含大量的 **Python** 代码示例，但范围非常有限：散列、AES 和 RSA。没有签名，没有椭圆曲线，没有 MAC 和密钥派生函数。

+   [**C 和 C++ 中的密码学**](https://books.google.bg/books?id=5cEYAAAAQBAJ)（作者：Michael Welschenbach）- 指导如何实现 AES 和 RSA 等密码算法的指南，在 **C** / **C++** 中。没有签名，没有椭圆曲线，没有 MAC 和密钥派生函数。2005 年出版（过时）。

缺乏**关于密码学和密码算法的优质免费实用书籍，特别是针对有代码示例的开发者**，这更加激发了我分享我的知识和技能，编写一本面向开发者的友好密码学书籍。我很高兴成为首批出版高质量免费实用密码学书籍的作者之一。

## [](#what-does-this-book-cover)本书涵盖哪些内容？

本书涵盖了软件行业中使用的最重要的现代密码学概念、密码算法和密码构造，内容丰富，并通过实际代码示例进行了演示：

+   **密码学哈希函数**：概念、SHA-2、SHA-3、BLAKE2、RIPEMD160、代码示例、碰撞

+   **MAC**码：概念、HMAC、CMAK、UMAC、应用、基于 MAC 的随机生成器、代码示例

+   密钥派生函数（**KDF**）：概念、从密码到加密密钥，PBKDF2、Scrypt、Bcrypt、Linux crypt()、Argon2，附代码示例

+   **密码加密**技术：从明文，通过散列，到现代安全的 KDFs 如 Argon2

+   随机数和**安全随机生成器**：概念、熵、安全随机数、CSPRNG、代码示例

+   **密钥交换**技术：密钥建立和密钥协商、Diffie–Hellman 密钥交换（DHKE）和椭圆曲线 Diffie–Hellman（ECDH）密钥交换，附代码示例

+   **加密**概念：对称和非对称加密、密钥、对称加密、加密方案、公钥密码系统、私钥和公钥、混合加密、数字签名

+   现代对称密钥**加密**：概念、分组密码和流密码、密码块模式（CBC、CTR、GCM）、AES（Rijndael）加密、Salsa20 / ChaCha20 加密，附代码示例

+   **对称加密**构造：认证加密、AES-256-GCM、ChaCha20-Poly1307、AES-256-CTR-HMAC，附代码示例

+   **非对称密钥加密**和公钥密码系统：RSA 密码系统（RSA 密钥对、加密、解密）、ECC（椭圆曲线密码学、EC 点和乘法、命名曲线）、ECDH（椭圆曲线 Diffie–Hellman）密钥交换，附代码示例

+   **椭圆曲线**：广泛使用的命名曲线如 secp256k1、P-256、P-521、Curve25519、Curve448-Goldilocks，附代码示例

+   **集成加密**方案：结合公钥密码学与对称加密算法、ECIES 混合加密方案，附代码示例

+   **数字签名**算法：概念、签名消息、验证签名、RSA 签名、ECDSA 和 EdDSA

+   **量子安全密码学**：哪些经典密码系统被量子破解，哪些是量子安全的，量子安全的签名和量子安全的密钥交换算法，SPHINCS+、NewHope 和其他，附代码示例

+   其他**密码学概念**：数字证书、TLS（传输层安全性）、一次性密码（OTP）、外部认证和 OAuth

+   **加密库**和为开发者提供的包：JavaScript、C#、Java、Python、C 和 C++ 中的加密

+   每个主要部分后面都有大量的**代码示例**和练习

## [](#why-python-is-used-for-the-examples)为什么示例使用 Python？

**Python** 是最易学的语言之一，一种所有开发者（甚至是没有使用过它的开发者）都能**阅读**和**理解**的语言。代码示例的目的是展示加密算法、加密方案和其他加密概念在实际中的应用，而不是推广某个库、API、语言或技术。

仅将代码示例作为参考，作为您代码可能看起来如何的指南，并将它们应用到您喜欢的语言和框架中。不要直接复制和粘贴代码示例。有时我们使用一个更用户友好且更容易安装和使用的库，而不是来自另一个供应商的更快、更可靠的库。有时我们使用**十六进制编码**的密钥、密文、签名和其他值，以便更容易在控制台上显示，但在实践中，大多数应用程序将使用二进制编码以提高性能和减少网络开销。

您可以将代码示例应用于其他语言。在本书的结尾，我们提供了如何在最流行的编程语言中使用加密的示例：**JavaScript**、**C#**、**Java** 和 **Python**。我们跳过了像 **C** 和 **C++** 这样的低级语言的示例，因为它们更适合库编写者（为了高效实现某些算法），而不是应用开发者。**C** 和 **C++** 的设置和构建更复杂，需要更多努力来管理项目依赖，并且更容易出错。

大多数**应用开发者**（例如，Web 开发者、后端开发者、移动开发者、前端开发者）**使用高级语言**（如 JS、Python、C#、Java、PHP 和 Go），但所有这些开发者都会**理解**示例中的 Python 代码。如果代码是用 C 语言编写的，它将会更长、更复杂且更难以阅读。

**Python** 在任何地方都**广泛支持**（在 Linux、Windows、Mac、移动设备和微控制器上）。所有示例也可以在**在线 Python 环境**中运行，例如：[**Repl.it**](https://repl.it/languages/python3) 和 [**PythonAnywhere**](https://www.pythonanywhere.com)。

## [](#how-to-read-this-book)如何阅读这本书？

建议您**按主题**（从开始到结束）阅读这本书。您可以跳过您不喜欢的章节和部分，但请通过它们，因为内容有内在依赖性。

与**代码示例**玩耍：运行它们、修改它们、破坏它们、探索和实验代码，并通过玩耍来学习。

尝试解决章节中的**实践练习**。开发者**通过编写代码学习最佳**，这正是我推荐的。你将得到详细描述的练习问题，包括清晰的输入和输出，全面覆盖每个主要部分后的内容。

现在，开始你的开发者**现代实用密码学之旅**。享受这本书吧！
