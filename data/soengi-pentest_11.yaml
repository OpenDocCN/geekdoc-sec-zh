- en: Chapter 8
  id: totrans-0
  prefs: []
  type: TYPE_NORMAL
  zh: 第8章
- en: Leveraging Open-Source Intelligence
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用开源情报
- en: Richard Ackroyd,    Senior Security Engineer, RandomStorm Limited
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: Richard Ackroyd，高级安全工程师，RandomStorm Limited
- en: The old saying “If I had eight hours to chop down a tree, I’d spend six sharpening
    my axe” could not relate more perfectly to this phase. The reconnaissance work
    you perform will make or break a social engineering engagement. It will truly
    form the foundations of any work that follows it. There is a wealth of information
    at our fingertips. This chapter will show you how to find and manipulate it to
    aid in your assessment. Harvesting e-mail addresses, document metadata, corporate
    websites, and social media will all be covered.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 俗话说“如果我有八个小时去砍树，我会花六个小时磨斧头”，这句话与这个阶段完美地契合。 您执行的侦察工作将决定或破坏社交工程的参与。 它确实将成为任何随后工作的基础。
    我们可以随时获取大量信息。 本章将向您展示如何找到并操纵它以帮助您进行评估。 将涵盖收集电子邮件地址、文档元数据、企业网站和社交媒体的内容。
- en: Keywords
  id: totrans-4
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 关键词
- en: Passive Spider; FOCA; Metagoofil; photographic metadata; Exiftool; image picker;
    Wget; GeoSetter; reverse image search engines; PDFGrep; document obfuscation;
    theharvester; Sam Spade; Jigsaw; Recon-ng; social media; LinkedIn; Facebook; DNS
    records; CeWL; WHOIS records
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 被动蜘蛛；FOCA；Metagoofil；图像元数据；Exiftool；图像挑选器；Wget；GeoSetter；反向图像搜索引擎；PDFGrep；文件混淆；theharvester；Sam
    Spade；Jigsaw；Recon-ng；社交媒体；LinkedIn；Facebook；DNS记录；CeWL；WHOIS记录
- en: Information in this chapter
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的信息
- en: • The Corporate Website
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: • 企业网站
- en: • Employee Names
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: • 员工姓名
- en: • Staff Hierarchy
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: • 员工层次结构
- en: • Phone Numbers
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: • 电话号码
- en: • Employee Photos and Data
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: • 员工照片和数据
- en: • Active and Passive Spidering
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: • 主动和被动蜘蛛
- en: • Document Metadata
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: • 文档元数据
- en: • FOCA
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: • FOCA
- en: • Metagoofil
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: • Metagoofil
- en: • Strings
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: • 字符串
- en: • PDFGrep
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: • PDFGrep
- en: • Photographic Metadata
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: • 图像元数据
- en: • ExifTool
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: • ExifTool
- en: • Image Picker
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: • 图像选择器
- en: • WGET
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: • WGET
- en: • GeoSetter
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: • GeoSetter
- en: • Reverse Image Search Engines
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: • 反向图像搜索引擎
- en: • Not so metadata
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: • 不太元数据
- en: • E-mail addresses & E-mail enumeration
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: • 电子邮件地址和电子邮件枚举
- en: • Phishing Attacks
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: • 网络钓鱼攻击
- en: • Password Attacks
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: • 密码攻击
- en: • E-mail address naming conventions
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: • 电子邮件地址命名约定
- en: • Social Media
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: • 社交媒体
- en: • Linked in
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: • 领英
- en: • Facebook
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: • Facebook
- en: • Twitter
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: • Twitter
- en: • DNS Records & Enumeration
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: • DNS记录和枚举
- en: • Dnsrecon
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: • Dnsrecon
- en: • Subdomain brute forcing and enumeration
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: • 子域名暴力破解和枚举
- en: • CeWL
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: • CeWL
- en: • WhoIS
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: • WhoIS
- en: Introduction
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 介绍
- en: '[Chapter 7](CHP007.xhtml) introduced a model for creating targeted scenarios.
    This chapter is going to look at how to use publicly available information to
    profile a particular target.'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '[第7章](CHP007.xhtml)介绍了一个创建有针对性场景的模型。 本章将介绍如何使用公开可用的信息来对特定目标进行轮廓化。'
- en: This is a genuinely enjoyable part of social engineering. It is truly fascinating
    just how much information a typical business puts into the public domain. The
    scary thing is, most organizations don’t even realize that they are doing it.
    The information can find its way out in document metadata or the registration
    details for their public IP addresses. It is a truly fascinating aspect of social
    engineering that will also prove useful on penetration tests.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 这是社交工程的一个真正有趣的部分。 一个典型企业放入公共领域的信息真的非常引人入胜。 令人恐慌的是，大多数组织甚至都没有意识到他们正在这样做。 信息可以通过文档元数据或其公共IP地址的注册详细信息泄漏出来。
    这是社交工程的一个真正迷人的方面，也将在渗透测试中证明有用。
- en: The chapter will begin by covering the corporate web presence, and how to interrogate
    it for useful information. That information could be basic in nature such as corporate
    direct dials and e-mail addresses. Alternatively, it could be used to provide
    the building blocks of a pretext. Pieces of seemingly uninteresting information
    such as partners, vendors, and clients suddenly become very interesting indeed.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将首先介绍企业的网络存在，以及如何对其进行询问以获取有用信息。 这些信息可能是基本的，例如企业的直拨电话和电子邮件地址。 或者，它可以用来提供假象的基石。
    看似不起眼的信息片段，如合作伙伴、供应商和客户，突然变得非常有趣。
- en: The methods for recovering information directly from the corporate website will
    be looked at both of passive and active nature.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 将介绍从企业网站直接恢复信息的方法，无论是被动还是主动的性质。
- en: Next, the chapter covers the process and tools behind the gathering of corporate
    e-mail addresses. E-mail addresses are gold dust on the vast majority of social
    engineering attacks. Not only do they provide a base for phishing attacks, but
    they give the naming convention of every other mailbox in the organization.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，本章介绍了获取公司电子邮件地址背后的过程和工具。在绝大多数社会工程攻击中，电子邮件地址都是金子般珍贵的。它们不仅为钓鱼攻击提供了基础，还提供了组织内其他邮箱的命名约定。
- en: The tools that acquire these e-mail addresses often don’t tell us where they
    found them. We will trace them back to their source to show how useful this can
    be. As an example, during a recent social engineering gig, a good proportion of
    these e-mail addresses was actually found in documents published by staff members.
    These documents were not available on the corporate website, but did included
    direct dials, mobile phone numbers, and a slew of other useful intelligence.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 获取这些电子邮件地址的工具通常不会告诉我们它们是在哪里找到的。我们将追溯到它们的来源，以展示这有多有用。例如，在最近的社会工程活动中，发现一大部分这些电子邮件地址实际上是在员工发布的文档中找到的。这些文档并不在公司网站上提供，但包括直拨电话、手机号码以及大量其他有用的情报。
- en: Document metadata will be covered in the following section. This chapter takes
    a look at some popular tools for harvesting and parsing documents that are published
    on the corporate website. Amongst the things that are expected to be seen are
    usernames, folder structures of local workstations, e-mail addresses, and operating
    systems in the output. It goes without saying that this is useful to a social
    engineer.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 文档元数据将在以下部分进行介绍。本章将介绍一些流行的工具，用于收集和解析发布在公司网站上的文档。预计将看到的内容包括用户名、本地工作站的文件夹结构、电子邮件地址和输出中的操作系统。毫无疑问，这对社会工程师非常有用。
- en: Next is the investigation into social media sites, blogs, and forums. All of
    which can be useful sources of information about a potential target. Search engine
    harvesting will be the next port of call. It never ceases to amaze me just what
    a brilliant reconnaissance tool the “Google” search engine is. The subject of
    DNS and Whois records, how to get to them, which tools to use, and how to apply
    the intelligence gained to your engagement are briefly touched upon. Finally,
    this chapter provides guidance on how all this extracted information can be used,
    including some common tasks associated with the manipulation of the data, such
    as building user and password lists, which can be leveraged in further attacks.
    A lot of really great technologies, techniques, and tools will be covered in this
    chapter, so let’s get going.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是对社交媒体网站、博客和论坛的调查。所有这些都可以成为关于潜在目标的信息的有用来源。接下来要进行搜索引擎收集。“Google”搜索引擎是一款多么出色的侦察工具，总是让人惊讶不已。还简要介绍了DNS和Whois记录的主题，如何获得它们，使用哪些工具，以及如何将获得的情报应用于您的参与。最后，本章提供了关于如何使用提取的所有信息的指导，包括与数据操作相关的一些常见任务，例如构建用户和密码列表，这些可以在进一步的攻击中利用。本章将涵盖许多真正出色的技术、技巧和工具，让我们开始吧。
- en: 'The vast majority of tools used in this chapter are installed in Kali Linux.
    You can download a Virtual machine or ISO here: [http://www.kali.org](http://www.kali.org).'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中使用的绝大多数工具都安装在Kali Linux中。您可以在这里下载虚拟机或ISO：[http://www.kali.org](http://www.kali.org)。
- en: The corporate website
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 公司网站
- en: When looking to gather intelligence on any business, their corporate web presence
    is the obvious place to start. However, what sort of information can be retrieved
    that isn’t immediately visible? Where are the hidden gems and how can these be
    applied to an on-going assessment? It is often discovered that most businesses
    are surprised at the amount of information on offer to a potential attacker. What
    kind of information can be expected to be found, and why is it useful to social
    engineers as well as malicious individuals?
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在寻求对任何业务进行情报收集时，他们的公司网络存在是显而易见的起点。然而，有哪些信息是不能立即看到的？隐藏的宝藏在哪里，如何将它们应用到正在进行的评估中？通常发现大多数企业对潜在攻击者提供的信息量感到惊讶。可以预期找到什么样的信息，以及为什么对社会工程师以及恶意个人来说这些信息是有用的？
- en: Business purpose
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 商业目的
- en: Understanding what a business does, what its ideals are, and how it operates
    are always key pieces of information. If the approach to be chosen is going to
    be impersonating a member of staff, thorough research is needed in order to pull
    it off. Understanding the basics of the organization along with some of the lingo
    used within the trade can go a long way. Knowing about a business can also help
    when making educated guesses about the type of systems that may be in use.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 了解企业的业务、理念以及其运作方式始终是关键信息。如果选择的方法是冒充员工，那么需要进行彻底的研究才能成功。了解组织的基本情况以及行业内使用的术语可以帮助很多。了解一个企业也可以在对可能正在使用的系统类型进行有根据的猜测时提供帮助。
- en: A little digging can also provide hints on how much resistance will be faced
    during a call or onsite visit. If the business is used to dealing with government
    and military agencies, the social engineer is more likely to be faced with well-trained
    individuals when it comes to information security. It is more likely that they
    will be more regimented as an organization and will be process driven. Other indicators
    to the potential security posture of an organization can include logos for information
    assurance standards such as ISO or PCI. Again, these are indicators that at least
    some people within the business will have had training that could make them more
    difficult to leverage.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 一些深入调查还可以提供有关在电话或现场拜访中可能会面临多少阻力的线索。如果企业习惯于与政府和军事机构打交道，那么社会工程师在信息安全方面遇到的人很可能是经过良好训练的。这样的组织更可能是组织化的，会按照流程进行操作。评估组织的潜在安全态度的其他指标还包括信息保障标准的标志，如ISO或PCI。同样，这些都是提示，表明企业内的一些人可能接受过培训，这可能使他们更难以被利用。
- en: A lot of what is done by social engineers is done blind, at least to start with,
    so it is recommended that as much as possible is gained from this exercise. Failing
    to prepare is preparing to fail.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程师所做的很多工作是盲目进行的，至少起初是这样，因此建议尽可能多地从这个过程中获取信息。准备不足就是准备失败。
- en: Partners, clients, vendors
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 合作伙伴、客户、供应商
- en: A lot of organizations publish lists of clients on their website, as well as
    partners and vendors. What better pretext could there be for an information gathering
    call? Calling into a help desk and impersonating a client is likely to get you
    some useful information. If the target organization has a client portal, it may
    be the case that you could gain access to it by attempting to have the client’s
    password reset. In a lot of cases, all it take to gain somebody’s confidence is
    a little bit of knowledge that would be deemed private by them. This could be
    the URL of the client portal and using the client’s name. In many cases, adding
    in a sense of urgency can apply all the pressure needed to get things moving.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 许多组织在其网站上发布客户、合作伙伴和供应商列表。还有什么更好的借口可以进行信息收集呢？打电话到帮助台并冒充客户很可能会获得一些有用的信息。如果目标组织有客户门户，有可能通过尝试重置客户的密码来获得访问权限。在许多情况下，获得某人信任所需的只是他们认为是私人的一点知识。这可能是客户门户的
    URL 和使用客户的姓名。在许多情况下，添加一种紧急感可以施加所需的所有压力，以推动事情的发展。
- en: E-mail addresses
  id: totrans-56
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 电子邮件地址
- en: E-mail addresses are exceptionally useful in social engineering attacks and
    these will be covered in more detail later in this chapter, including how to harvest
    them from publicly available resources. There are several ways to leverage them,
    e.g., choosing to go down the route of targeted or broad-scale phishing attacks,
    or using them to attack VPN and e-mail portals. While the latter may look a lot
    more like penetration testing territory, many social engineering engagements are
    made up of this blended approach.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件地址在社会工程攻击中异常有用，这将在本章后面更详细地讨论，包括如何从公开可用资源中收集它们。有几种利用它们的方法，例如选择进行有针对性或广泛规模的网络钓鱼攻击，或者使用它们攻击
    VPN 和电子邮件门户。尽管后者更像是渗透测试领域的内容，但许多社会工程参与都采用了这种混合方法。
- en: The e-mail address can also indicate the internal username convention, which
    means if more employees can be identified, an even bigger e-mail and user list
    can be built. These can be used throughout the engagement for further attacks.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件地址还可以指示内部用户名的约定，这意味着如果可以识别更多员工，那么可以建立更大的电子邮件和用户列表。这些可以在整个参与过程中用于进一步攻击。
- en: Employee names
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 员工姓名
- en: It is likely that the number of employee names on a corporate website will be
    limited to directors and shareholders. Finding people further down the hierarchy
    is still possible, especially where organizations have blogs or news articles
    written by employees. Employee names are useful from an impersonation point of
    view or for name dropping when making a call. Most will argue that LinkedIn is
    a better resource for this kind of information. Just be certain that their current
    employment status is accurate. Impersonating an employee that no longer works
    for the target will be unlikely to provide any benefit.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 公司网站上的员工名字数量可能仅限于董事和股东。在组织有员工撰写的博客或新闻文章的情况下，仍然有可能找到层级更低的人。员工的名字在伪装角度或在电话时提及名字时很有用。大多数人会认为
    LinkedIn 是这种信息的更好资源。只需确保他们当前的就业状况是准确的。冒充不再为目标工作的员工将不太可能提供任何好处。
- en: Staff hierarchy
  id: totrans-61
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 员工层级结构
- en: Understanding a staff hierarchy is always useful to a social engineer. A call
    claiming to be from someone in a position of authority can grease the wheels in
    unexpected ways. How many call center staff dare risk offending the person that
    is in charge of their entire department? Another angle to take is that of familiarity
    or lack thereof. Picking a staff member that is less likely to have regular contact
    with call center staff means less chance of being busted. There is nothing worse
    that going through the entire process of building your impersonation attempt only
    to have your target say “*hey, you don’t sound like Bob…*” At this point, you
    have probably set alarm bells ringing at an organizational level.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 了解员工层级对社会工程师总是有用的。自称是某个领导职位的人的电话可能会以意想不到的方式顺利进行。多少呼叫中心的员工敢冒险冒犯整个部门的负责人？另一个角度是熟悉或不熟悉的情况。选择一个不太可能经常与呼叫中心员工联系的员工意味着被识破的机会较小。没有什么比经历整个建立你的伪装企图过程后，却被你的目标说“*嘿，你听起来不像鲍勃…*”更糟糕的了。此时，你可能已经在组织层面引起了警报。
- en: Phone numbers
  id: totrans-63
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 电话号码
- en: Phone numbers, like e-mail addresses, are also key to the ongoing engagement.
    It is quite common to find that an organization will only publish the number for
    a central switchboard, therefore it is often believed that this is more secure,
    as the switchboard staff are likely to have had role specific security training.
    However this is often not the case. The people who answer the phone are employed
    to help, and to help the business, not to be a hindrance. They will likely be
    taking large volumes of calls too, which means little time to vet each call and
    less chance of recognizing repeat callers. Consequently, switchboards are frequently
    targeted in order to access direct dials for other employees within a business.
    It is rarely the case that someone will be challenged for much other than their
    name and the purpose of the call. Even if they are, the organization will likely
    take thousands of inbound sales calls every year so it is unlikely that any suspicions
    will be raised.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 电话号码，像电子邮件地址一样，对于持续的互动也是关键。通常情况下，组织只会公布中央总机的号码，因此通常认为这更安全，因为总机工作人员可能接受了特定角色的安全培训。然而，情况通常并非如此。接电话的人受雇于帮助和支持企业，而不是成为障碍。他们可能会接听大量的电话，这意味着很少有时间对每个电话进行审查，也很少有机会识别重复的来电者。因此，总机经常成为攻击目标，以获取企业内其他员工的直线电话。很少有人会因除了姓名和电话目的以外的任何事情而受到质疑。即使他们受到质疑，组织每年可能会接到成千上万个入站销售电话，因此不太可能引起任何怀疑。
- en: Another interesting vector relates to the lack of responsibility to authenticate
    somebody, who has already been passed through by another member of staff. This
    can pose serious problems to an organization when it comes to information leakage.
    It shouldn’t be taken at face value that the person being spoken to is a client,
    just because somebody told you they are a client doesn’t mean you can’t verify
    it before giving any sensitive information to them.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个有趣的向量与责任缺乏认证已经通过另一名员工的人有关。当涉及到信息泄露时，这可能给组织带来严重问题。不能简单地认为对话的对象是客户，仅仅因为有人告诉你他们是客户，并不意味着在向他们提供任何敏感信息之前就不能进行验证。
- en: Photos of employees and business locations
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 员工和企业位置的照片
- en: Later in this chapter, the intelligence potential from digital photographs,
    which contain all sorts of hidden information, will be investigated. This can
    include the type of device the photo was taken with geographic location and more.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 本章后面将调查数字照片中所包含的各种隐藏信息带来的智能潜力。这可能包括照片拍摄设备的类型、地理位置等。
- en: Then there is the more obvious intelligence within the photo. This can range
    from photographs of physical locations, to the interior layout of offices and
    even ID badges. [Images.google.com](http://Images.google.com) is an absolute gold
    mine for this kind of endeavor. For example, often ID badges are discovered in
    promotional photographs and then used to recreate duplicates. Even a roughly created
    ID badge can be enough to enable a social engineer to get around a building without
    any intervention from employees or security. In fact, it has been known for social
    engineers to very quickly fabricate a badge using an Inkjet printer. Despite being
    printed on photo paper, it still may pass a close up inspection by a security
    guard. The chances are all they are looking at is the photo or merely going through
    the process.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 然后是照片中更明显的情报。这可以是从物理位置的照片，到办公室的内部布局，甚至是身份证。[Images.google.com](http://Images.google.com)对这种努力来说是绝对的宝藏。例如，通常可以在宣传照片中发现身份证，并用它们来重新制作副本。即使是粗略制作的身份证，也足以让社会工程师在没有员工或安全人员干预的情况下绕过建筑物。事实上，社会工程师往往可以很快地使用喷墨打印机制作一个徽章。尽管是在照片纸上打印的，但它仍然可能通过安全人员的近距离检查。他们可能只是看照片或者只是执行程序。
- en: Having established some of the useful information gathered from a corporate
    web presence what are the tools used to retrieve it?
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在收集了企业网络存在的一些有用信息之后，我们使用了哪些工具来检索它呢？
- en: Spidering
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 爬虫
- en: Spiders, sometimes known as Crawlers, are designed to index websites and their
    contents. They do this by starting with a seed URL and then identifying all hyperlinks
    on these sites. The Spider then visits each of these links, eventually building
    a full map of the website in question. Spiders are most commonly used by search
    engine providers such as Google and Bing. This forms the basis for how the content
    is delivered when it is searched for.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 爬虫，有时也称为爬行器，旨在索引网站及其内容。它们通过从种子 URL 开始并识别这些站点上的所有超链接来实现这一点。然后爬虫访问这些链接中的每一个，最终构建出所涉及的网站的完整地图。爬虫最常用于谷歌和必应等搜索引擎提供商。这形成了当搜索时内容如何被提供的基础。
- en: Spidering can be tremendously useful both to social engineers and penetration
    testers. This is because it allows the complete mapping out of a corporate web
    presence in an automated and time effective manner.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 爬虫对社会工程师和渗透测试人员都非常有用。这是因为它允许以自动化和有效的方式完全映射企业的网络存在。
- en: A spider can be employed against a website in both a passive and active fashion.
    Here’s a look at a tool that can be used to passively map a website’s structure.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 爬虫可以 passively 和 actively 对网站进行攻击。下面介绍一种用于被动地映射网站结构的工具。
- en: Passive Spider
  id: totrans-74
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 被动爬虫
- en: Any reconnaissance effort may be for nothing if it starts to raise alarms. Wouldn’t
    it be great if we could passively spider a website? As it happens this can be
    achieved through the use of a “spider by proxy.”
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如果任何侦察工作开始引起警报，那么所有的努力都可能白费。如果我们能 passively 地爬取一个网站，那不是很好吗？事实上，通过使用“代理爬虫”就可以实现这一点。
- en: The big search engine providers, such as Google and Bing, spend a lot of time
    spidering the Internet so that the search engine user doesn’t have to. Why not
    take advantage of that?
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 谷歌和必应等大型搜索引擎提供商花费大量时间爬取互联网，以便搜索引擎用户无需自行操作。为什么不利用一下呢？
- en: Step up Passive Spider ([https://github.com/RandomStorm/passive-spider](https://github.com/RandomStorm/passive-spider))
    created by the award winning Ryan Dewhurst (@ethicalhack3r)—[http://www.ethicalhack3r.co.uk](http://www.ethicalhack3r.co.uk).
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 使用由屡获殊荣的 Ryan Dewhurst（@ethicalhack3r）创建的 Passive Spider（[https://github.com/RandomStorm/passive-spider](https://github.com/RandomStorm/passive-spider)）来映射网站。[http://www.ethicalhack3r.co.uk](http://www.ethicalhack3r.co.uk)。
- en: Passive Spider takes advantage of the search provider’s leg work by utilizing
    the search results to give the site layout.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 被动爬虫利用搜索提供商的工作，通过利用搜索结果来给出网站的布局。
- en: At the time of writing, Passive Spider uses only the Bing search engine, however
    registration for a free Bing developer API key is required to perform any searches.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本文时，被动爬虫仅使用必应搜索引擎，但需要注册免费的必应开发者 API 密钥才能执行任何搜索。
- en: The installation requires Ruby but is very straightforward. It has been tested
    on OSX running Ruby 1.9.3 and also works in Kali Linux, again on Ruby 1.9.3.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 安装需要 Ruby，但非常简单。已在运行 Ruby 1.9.3 的 OSX 上进行了测试，也可以在 Kali Linux 上运行，同样在 Ruby 1.9.3
    上工作。
- en: 'Here are the installation instructions:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是安装说明：
- en: '[PRE0]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '[PRE2]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Alternatively, you can download the ZIP archive from github ([www.https://github.com](http://www.https://github.com))
    directly and extract the files.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，您也可以直接从 GitHub（[www.https://github.com](http://www.https://github.com)）下载
    ZIP 存档并提取文件。
- en: In the passive-spider directory is a file called api_keys.config. This is where
    you need to enter the previously mentioned Bing search API key in between the
    speech marks.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在 passive-spider 目录中有一个名为 api_keys.config 的文件。这是您需要在引号之间输入之前提到的 Bing 搜索 API
    密钥的地方。
- en: 'Ensure that the pspider.rb file has execute permissions:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 确保 pspider.rb 文件具有执行权限：
- en: '[PRE3]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: At this point, Passive Spider is ready to be run. Let’s see what information
    it gathers.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，被动蜘蛛已准备就绪。让我们看看它收集了什么信息。
- en: '[PRE4]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-94
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '[PRE18]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: '[PRE19]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '[PRE20]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '[PRE21]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '[PRE22]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[PRE23]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '[PRE24]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '[PRE25]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '[PRE26]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[PRE27]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '[PRE28]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: '[PRE29]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: '[PRE30]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: '[PRE31]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '[PRE32]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '[PRE33]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: As you can see, the output is very self-explanatory. We now have the basic layout
    of the target corporation’s website without having touched it. This sort of approach
    is highly recommended prior to commencing any more active types of testing. It
    may be that a more active spider is required for the entire site further down
    the line. This will be covered later in this chapter.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，输出非常直观。现在我们已经在未触摸它的情况下获得了目标公司网站的基本布局。在开始任何更积极的测试之前，强烈建议采用这种方法。可能需要更积极的蜘蛛来处理整个网站。这将在本章后面介绍。
- en: Passive Spider doesn’t stop there. It also displays any documents it found during
    the query, which again can be extremely useful to a social engineer. Why documents
    are useful to use when looking at metadata will be covered later in this section.
    Additionally, documents prove to be extremely useful as they often contain contact
    details for employees.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 被动蜘蛛不止于此。它还显示了查询期间找到的任何文档，这对社交工程师来说可能非常有用。为什么查看元数据时文档很有用将在本节后面介绍。此外，文档通常非常有用，因为它们经常包含员工的联系方式。
- en: Scrolling to the bottom of the results reveals any subdomains and interesting
    keywords that were found during the search.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 滚动到结果的底部会显示在搜索期间找到的任何子域和有趣的关键字。
- en: Active spidering with OWASP Zed Attack Proxy
  id: totrans-123
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 使用 OWASP Zed Attack Proxy 进行主动蜘蛛。
- en: The Zed Attack Proxy (ZAP) is an easy to use integrated penetration testing
    tool for finding vulnerabilities in web applications.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: Zed Attack Proxy (ZAP) 是一个易于使用的集成渗透测试工具，用于查找 Web 应用程序中的漏洞。
- en: It is designed to be used by people with a wide range of security experience
    and as such is ideal for developers and functional testers who are new to penetration
    testing.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 它设计用于被各种安全经验水平的人使用，因此非常适合对渗透测试尚不熟悉的开发人员和功能测试人员。
- en: ZAP provides automated scanners as well as a set of tools that allow you to
    find security vulnerabilities manually.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: ZAP 提供了自动扫描器以及一套工具，使您能够手动查找安全漏洞。
- en: '[https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project)'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project)'
- en: ZAP is a yet another fantastic open-source tool that we can take advantage of,
    however the full suite of features it provides is way beyond the scope of this
    book. What we are interested in for now is its spidering ability.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: ZAP 是另一个非常棒的开源工具，我们可以利用它，但它提供的全部功能远远超出了本书的范围。目前我们感兴趣的是它的蜘蛛能力。
- en: The ZAP is so called because it proxies your connections out to your target
    of choice. This gives ZAP the ability to intercept and tamper with any outbound
    request or inbound response.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: ZAP 之所以被称为 ZAP，是因为它代理您的连接到您选择的目标。这使得 ZAP 能够拦截并篡改任何出站请求或入站响应。
- en: After launching ZAP, you configure your browser to point at it by configuring
    localhost and port 8080 in your proxy settings. I use the FoxyProxy add-on for
    Firefox, but there are alternatives out there for other browsers. You could just
    use the standard proxy settings if you choose. FoxyProxy and applications like
    it are far quicker if you are going to be changing things around a lot, and you
    probably will.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 启动 ZAP 后，您需要配置浏览器指向它，通过在代理设置中配置 localhost 和端口 8080 来进行。我使用 Firefox 的 FoxyProxy
    插件，但其他浏览器也有替代品。如果您将要频繁更改设置，则 FoxyProxy 等应用程序更快，并且您可能会这样做。
- en: So, let’s get ZAP installed and the browser configured so that we can intercept
    traffic. For the purposes of this section, I’m going to assume you are using Firefox.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，让我们安装 ZAP 并配置浏览器，以便我们可以拦截流量。为了本节的目的，我假设您正在使用 Firefox。
- en: 'Step 1: Go to the FoxyProxy website: [https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-standard/](https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-standard/).'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 1：转到 FoxyProxy 网站：[https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-standard/](https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-standard/)。
- en: 'Step 2: Click “Continue to download.”'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 2：点击“继续下载”。
- en: 'Step 3: Click “add to firefox.”'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 3：点击“添加到 Firefox”。
- en: 'Step 4: Firefox should prompt you to install FoxyProxy. Firefox will need to
    be restarted at this point.'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 4：Firefox 应提示您安装 FoxyProxy。此时需要重新启动 Firefox。
- en: That’s all there is to it. Next, we have to configure FoxyProxy to enable the
    sending of all the traffic to ZAP.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 就是这样。接下来，我们需要配置 FoxyProxy 以启用将所有流量发送到 ZAP。
- en: 'Step 1: Find the FoxyProxy button at the end of the URL bar and right click
    it. Choose options.'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 1：在 URL 栏末尾找到 FoxyProxy 按钮，右键点击它。选择选项。
- en: 'Step 2: Click “add new proxy” ([Figure 8.1](#F0010)).'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 2：点击“添加新代理”（[图 8.1](#F0010)）。
- en: 'Step 3: Fill out the proxy settings for “localhost” and port 8080 ([Figure
    8.2](#F0015)).'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 3：填写“localhost”和端口 8080 的代理设置（[图 8.2](#F0015)）。
- en: FoxyProxy will automatically send HTTPS and HTTP traffic to ZAP when we enable
    it. You may have to configure HTTPS proxying separately in the browser or system
    settings if FoxyProxy is not being used.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 当启用 FoxyProxy 时，它将自动将 HTTPS 和 HTTP 流量发送到 ZAP。如果没有使用 FoxyProxy，则可能需要在浏览器或系统设置中单独配置
    HTTPS 代理。
- en: 'Step 4: Click the General button at the top and give the entry a name, “Owasp
    ZAP” will do.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 4：点击顶部的“常规”按钮，并给条目命名，“Owasp ZAP”即可。
- en: 'Step 5: Choose a color for the entry and click ok to finish up.'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 5：选择一个颜色作为条目的颜色，然后点击“确定”完成设置。
- en: '![image](../images/F000089f08-01-9780124201248.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-01-9780124201248.jpg)'
- en: Figure 8.1 Add New Proxy.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.1 添加新代理。
- en: '![image](../images/F000089f08-02-9780124201248.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-02-9780124201248.jpg)'
- en: Figure 8.2 FoxyProxy settings.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.2 FoxyProxy 设置。
- en: Now to enable the proxy just right click the little fox icon at the end of the
    address bar and select “Use OWASP ZAP for all URLs.” This option will send all
    of the HTTP and HTTPS traffic through ZAP. As it hasn’t been launched yet, none
    of the websites will load.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 现在要启用代理，只需右键点击地址栏末尾的小狐狸图标，然后选择“用 OWASP ZAP 代替所有 URL”。此选项将通过 ZAP 发送所有 HTTP 和
    HTTPS 流量。由于尚未启动，因此没有任何网站会加载。
- en: Having grabbed ZAP from the link provided at the beginning of this section there
    is a Windows installer and a Mac version. The example given is for running it
    on a Mac but the process is the same regardless. By installing and running ZAP,
    the following screen is presented ([Figure 8.3](#F0020)).
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节开始提供的链接中获取 ZAP 后，有一个 Windows 安装程序和一个 Mac 版本。给出的示例是在 Mac 上运行它，但是无论如何，流程都是相同的。通过安装和运行
    ZAP，将呈现以下屏幕（[图 8.3](#F0020)）。
- en: '![image](../images/F000089f08-03-9780124201248.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-03-9780124201248.jpg)'
- en: Figure 8.3 ZAP initial screen.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.3 ZAP 初始界面。
- en: So, let’s jump back to Firefox to browse a site and see what happens. This is
    demonstrated through the use of the Damn Vulnerable Web Application ([http://www.dvwa.co.uk](http://www.dvwa.co.uk)),
    for the purpose of the book, which is also included in the OWASP Broken Web Applications
    operating system ([Figure 8.4](#F0025)).
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，让我们跳回 Firefox 浏览一个网站，看看会发生什么。这通过使用 Damn Vulnerable Web Application ([http://www.dvwa.co.uk](http://www.dvwa.co.uk))
    进行演示，该应用是本书的目的，也包含在 OWASP Broken Web Applications 操作系统中（[图 8.4](#F0025)）。
- en: '![image](../images/F000089f08-04-9780124201248.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-04-9780124201248.jpg)'
- en: Figure 8.4 ZAP requests.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.4 ZAP 请求。
- en: This shows that the sites visited appear in the “Sites” box on the left. The
    individual HTTP requests are in the bottom pane. At this point the only thing
    of interest is the Spider, although the reader is encouraged to explore ZAP’s
    other functionality.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 这表明所访问的站点显示在左侧的“站点”框中。底部窗格中是单个 HTTP 请求。此时，唯一感兴趣的是蜘蛛，但鼓励读者探索 ZAP 的其他功能。
- en: If the interest is in intercepting requests destined for a HTTPS site, acceptance
    of the ZAP certificate is required so that the traffic can be decrypted and re-encrypted.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 如果感兴趣的是拦截发送到 HTTPS 站点的请求，则需要接受 ZAP 证书，以便可以解密和重新加密流量。
- en: 'Here is an overview of the Spidering process:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是蜘蛛进程的概述：
- en: 'Step 1: Click the Spider button.'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 1：点击蜘蛛按钮。
- en: 'Step 2: Drop down the “Site” menu on the left-hand side and choose the site
    that the spider is to be deployed against.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 第二步：在左侧的“站点”菜单中选择要部署网络爬虫的站点。
- en: 'Step 3: Click the play button and wait for it to finish ([Figure 8.5](#F0030)).'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 第三步：点击播放按钮，等待其完成（[图 8.5](#F0030)）。
- en: '![image](../images/F000089f08-05-9780124201248.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/F000089f08-05-9780124201248.jpg)'
- en: Figure 8.5 ZAP spider.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.5 ZAP 网络爬虫。
- en: Spidering a website can be intrusive and may cause issues on some systems. Please
    be aware of the risks and seek permission prior to performing any kind of active
    testing.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 爬网站可能是侵入性的，并可能在某些系统上引起问题。在执行任何形式的主动测试之前，请注意风险并寻求许可。
- en: Why is this information useful to a social engineer?
  id: totrans-163
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 这些信息对社会工程师有什么用呢？
- en: Both passive and active spidering have been investigated, but why is this information
    useful to social engineers? The site layout is just a precursor to further exploration;
    it helps provide guidance to the reconnaissance path and ensure that time is spent
    effectively. It can provide at a glance information that can be useful to any
    social engineer such as business partners, portals, clients, vendors, and contact
    pages. It can also help to identify documents and key words across large sites.
    All of this information can be used as a platform for further reconnaissance.
    Ultimately this information will lead to the construction of one or more pretexts
    that form the basis of any assessment.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 被动和主动的网络爬虫都已经被调查过了，但是这些信息对社会工程师有什么用呢？网站布局只是进一步探索的前奏；它帮助提供对侦察路径的指导，并确保时间有效利用。它可以提供一目了然的信息，对任何社会工程师都可能有用，如商业伙伴、门户、客户、供应商和联系页面。它还可以帮助识别大型网站上的文档和关键字。所有这些信息都可以用作进一步侦察的基础。最终，这些信息将导致一个或多个构建基础的假设。
- en: Spidering is just one of the tools that would be used very early on in the reconnaissance
    lifecycle. Having thoroughly covered this tool, it is pertinent to look at some
    of the other tools that are available for use by the social engineer.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 网络爬虫只是侦察生命周期中非常早期使用的工具之一。在彻底了解了这个工具之后，看一下其他可供社会工程师使用的一些工具是非常重要的。
- en: Document metadata
  id: totrans-166
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档元数据
- en: Document metadata is basically attribute information stored within office documents.
    When a Microsoft Word or PDF document is created, it is automatically tagged with
    some metadata without the author really even knowing about it. This information
    can be retrieved by anybody who has the document.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 文档元数据基本上是存储在办公文档中的属性信息。当创建 Microsoft Word 或 PDF 文档时，会自动为其添加一些元数据，即使作者并不真正知道。任何拥有该文档的人都可以检索到这些信息。
- en: Typically the metadata will be the user and business name selected when the
    office product was installed. At least some of the document metadata can be viewed
    by checking the document properties from within the office application ([Figure
    8.6](#F0035)).
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，元数据将是安装办公产品时选择的用户和商业名称。至少可以通过从办公应用程序中查看文档属性来查看一些文档元数据（[图 8.6](#F0035)）。
- en: '![image](../images/F000089f08-06-9780124201248.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/F000089f08-06-9780124201248.jpg)'
- en: Figure 8.6 Installation options being populated into the metadata of Microsoft
    Word documents.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.6 安装选项被填充到 Microsoft Word 文档的元数据中。
- en: This clearly demonstrates that at the very least the document may provide the
    name of the individual who created it. This can then be added to username lists
    or potentially as a name drop during a call to an organization.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 这清楚地表明，至少文档可能提供了创建者的姓名。这样，它就可以被添加到用户名单中，或者在致电组织时作为一个名字的参考。
- en: There are many other metadata tags that can be added by an individual, and quite
    a few that the application adds by itself.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 还有许多其他的元数据标签可以由个人添加，以及一些应用程序自动添加的标签。
- en: 'It is common to find operating system versions, directory structures, and users
    within this hidden metadata. Additionally, the exact version of software used
    to create the file can also be found. Here are some of the tools that can be used
    to extract this intelligence:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些隐藏的元数据中，通常可以找到操作系统版本、目录结构和用户。此外，还可以找到用于创建文件的确切软件版本。以下是一些提取这些信息的工具：
- en: Strings
  id: totrans-174
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 字符串
- en: Strings searches for printable strings within a file and its metadata and displays
    them within a terminal.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 字符串搜索可在文件及其元数据中搜索可打印的字符串，并在终端中显示它们。
- en: 'For example, here is the output of strings when running it against a PDF file
    ([Figure 8.7](#F0040)):'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，当运行 strings 对 PDF 文件进行搜索时，下面是其输出（[图 8.7](#F0040)）：
- en: '![image](../images/F000089f08-07-9780124201248.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-07-9780124201248.jpg)'
- en: Figure 8.7 Strings output from PDF file.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.7 字符串从 PDF 文件输出。
- en: '[PRE34]'
  id: totrans-179
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: In this particular case, both the operating system in use, Mac OSX 10.0.4, as
    well as the version of Acrobat in use could be retrieved. Surely, it would take
    a long time to gather this information in the real world, especially if the customer
    has a lot of documents available on their website. Fortunately there are numerous
    tools that can automate this process.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种特殊情况下，可以检索到正在使用的操作系统 Mac OSX 10.0.4，以及正在使用的 Acrobat 版本。在现实世界中，特别是如果客户的网站上有大量文档的情况下，收集这些信息肯定需要很长时间。幸运的是，有很多工具可以自动化这个过程。
- en: FOCA—[http://www.informatica64.com/foca.aspx](http://www.informatica64.com/foca.aspx)
  id: totrans-181
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: FOCA—[http://www.informatica64.com/foca.aspx](http://www.informatica64.com/foca.aspx)
- en: FOCA is a Windows application designed as an information gathering tool for
    penetration testers. It is often regarded as one of the best tools out there for
    this kind of work. It covers a multitude of functionality beyond that which is
    covered in this book. The Pro version should be considered as a worthwhile investment
    for anyone using the application a great deal.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: FOCA 是一个为渗透测试人员设计的信息收集工具的 Windows 应用程序。它通常被认为是这类工作中最好的工具之一。它涵盖了本书未涵盖的多种功能。Pro
    版本应该被视为任何频繁使用该应用程序的人的一项有价值的投资。
- en: One of the first things that will strike the user about FOCA is how easy it
    is to use. It is all GUI driven, nicely laid out, and to most people will be very
    intuitive.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 用户在使用 FOCA 时的第一印象之一就是它的易用性。它完全由 GUI 驱动，布局合理，对大多数人来说非常直观。
- en: The process of extracting metadata is pretty much completely automated. FOCA
    is given a domain and it goes away and digs out any documents that exist within.
    Next, FOCA is informed to download the documents and extract the metadata. It
    will categorize each type found and display them in an easily navigated tree.
    The metadata can then be exported to files so that it can manipulate it. It really
    doesn’t get any easier than this.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 提取元数据的过程几乎完全自动化。FOCA 给定一个域名，然后它会查找出存在的任何文档。接下来，FOCA 被告知下载文档并提取元数据。它会对每种类型进行分类，并将它们显示在一个易于导航的树中。然后可以将元数据导出到文件中以便操作。真的没有比这更容易的了。
- en: Below is a walk-through of the process using FOCA Free which can be downloaded
    from the link provided. An e-mail address is required but this is a small price
    to pay for a fantastic application.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是使用可从提供的链接下载的 FOCA Free 进行的过程演示。需要提供一个电子邮件地址，但这对于一个出色的应用程序来说是微不足道的代价。
- en: At the first launch of FOCA, the user is greeted by a screen not unlike the
    one in [Figure 8.8](#F0045).
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在 FOCA 的首次启动时，用户将看到一个与 [图 8.8](#F0045) 类似的屏幕。
- en: '![image](../images/F000089f08-08-9780124201248.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-08-9780124201248.jpg)'
- en: Figure 8.8 FOCA.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.8 FOCA。
- en: 'Here is the “step-by-step” guide:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 这是“逐步指南”：
- en: 'Step 1: Click “Project” at the top left and then “New Project.”'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 1：点击左上角的“项目”，然后点击“新项目”。
- en: 'Step 2: Give the project a name and then enter a domain in the “Domain Website”
    field. This should just be [mydomain.com](http://mydomain.com), not a URL.'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 2：给项目命名，然后在“域网站”字段中输入一个域名。这应该只是 [mydomain.com](http://mydomain.com)，而不是一个
    URL。
- en: 'Step 3: Tell FOCA where to store the project documents and add any notes that
    may be useful later ([Figure 8.9](#F0050)).'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 3：告诉 FOCA 在哪里存储项目文档，并添加可能以后有用的任何注释（[图 8.9](#F0050)）。
- en: 'Step 4: Click “Create” and choose a location to save the project file. The
    desktop will suffice for now.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 4：点击“创建”，选择一个位置保存项目文件。桌面现在就够了。
- en: Now, a screen like the one in [Figure 8.10](#F0055) will be seen.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，会看到一个类似于 [图 8.10](#F0055) 中的屏幕。
- en: Select Google and Bing, leaving the Extensions as they are. The Extensions are
    the types of file that FOCA is going to look for during its search.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 选择 Google 和 Bing，将扩展名保持不变。扩展名是 FOCA 将在搜索中查找的文件类型。
- en: 'Step 5: Click “Search All.”'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 5：点击“搜索全部”。
- en: Documents should start to populate the screen. The name, size, and type will
    all be visible.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 文档应该开始填充屏幕。名称、大小和类型都将可见。
- en: 'Step 6: Now the document search has finished, right click on any document,
    and select “Download all.” This will download all of the documents to your previously
    configured location ([Figure 8.11](#F0060)).'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤 6：现在文档搜索已经完成，右键单击任何文档，然后选择“全部下载”。这将把所有文档下载到您之前配置的位置（[图 8.11](#F0060)）。
- en: It may take some time to download all of the documents. Go and grab a coffee
    and check on it in 5 minutes.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 下载所有文档可能需要一些时间。去拿杯咖啡，5分钟后再来查看一下。
- en: 'Step 7: Now that all of the documents are downloaded, again right click on
    any document in the search results and choose “Extract All Metadata.”'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤7：现在所有文档都已下载，请再次右键单击搜索结果中的任何文档，并选择“提取所有元数据”。
- en: '![image](../images/F000089f08-09-9780124201248.jpg)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/F000089f08-09-9780124201248.jpg)'
- en: Figure 8.9 FOCA—Setting up a project.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.9 FOCA—设置项目。
- en: '![image](../images/F000089f08-10-9780124201248.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/F000089f08-10-9780124201248.jpg)'
- en: Figure 8.10 FOCA file extensions.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.10 FOCA文件扩展名。
- en: '![image](../images/F000089f08-11-9780124201248.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/F000089f08-11-9780124201248.jpg)'
- en: Figure 8.11 FOCA download documents.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.11 FOCA下载文档。
- en: This should result in a nicely organized view of the metadata ([Figure 8.12](#F0065)).
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 这应该会产生一个良好组织的元数据视图（[图8.12](#F0065)）。
- en: '![image](../images/F000089f08-12-9780124201248.jpg)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../images/F000089f08-12-9780124201248.jpg)'
- en: Figure 8.12 FOCA metadata.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.12 FOCA元数据。
- en: FOCA has extracted users, folder structures, software versions, and operating
    systems from all of the documents available and all that was required was to give
    it a domain. During a real world assessment a greater amount of detail will be
    seen than is shown in this screenshot, assuming the client has not sanitized all
    documents before publishing them. Rarely is the “Passwords” metadata category
    seen to light up to this day, but it is often the first thing that is looked for.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: FOCA已从所有可用文档中提取了用户、文件夹结构、软件版本和操作系统，而所需的一切只是给出一个域名。在真实的世界评估中，将看到比这张截图显示的更多细节，假设客户在发布文档之前未对其进行消毒。很少有“密码”元数据类别到目前为止能够见到光明，但它往往是首先被寻找的内容。
- en: For example, a right click on any of the metadata categories on the left and
    exporting the results to a file can be especially useful for building user lists.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，右键单击左侧的任何元数据类别，并将结果导出到文件中，可以特别有用用于构建用户列表。
- en: Additionally, a right click within the documents pane and adding a local file
    or directory for metadata extraction can prove to be extremely useful.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，在文档窗格中右键单击并添加一个本地文件或目录进行元数据提取也可能非常有用。
- en: This has demonstrated some of the uses of FOCA; however, there are open-source
    alternatives to FOCA. Let’s take a look at one now.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 这展示了FOCA的一些用途；但是，FOCA也有开源替代品。让我们现在看一个。
- en: Metagoofil
  id: totrans-214
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Metagoofil
- en: Metagoofil works in a similar way to FOCA. It starts by searching in Google
    and then downloads documents from the target website. Metagoofil can then start
    to strip metadata from the documents and present the results in a report. As with
    FOCA, Metagoofil is capable of retrieving usernames, software versions, e-mail
    addresses, and document paths.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: Metagoofil的工作方式类似于FOCA。它首先从Google搜索，然后从目标网站下载文档。然后，Metagoofil可以开始从文档中剥离元数据，并在报告中呈现结果。与FOCA一样，Metagoofil能够检索用户名、软件版本、电子邮件地址和文档路径。
- en: Metagoofil can be obtained from [http://code.google.com/p/metagoofil/](http://code.google.com/p/metagoofil/),
    and has been tested in Linux and OSX. It should also be bundled in BackTrack and
    Kali Linux.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: Metagoofil可以从[http://code.google.com/p/metagoofil/](http://code.google.com/p/metagoofil/)获取，并且已经在Linux和OSX中进行了测试。它还应该捆绑在BackTrack和Kali
    Linux中。
- en: 'Here’s an example of the command line switches:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是命令行开关的一个例子：
- en: '[PRE35]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: '[PRE36]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: '[PRE37]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: '[PRE38]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: '[PRE39]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: '[PRE40]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: '[PRE41]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '[PRE42]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '[PRE43]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: '[PRE44]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: '[PRE45]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: '[PRE46]'
  id: totrans-229
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: '[PRE47]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: '[PRE48]'
  id: totrans-231
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: '[PRE49]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: '[PRE50]'
  id: totrans-233
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: '[PRE51]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'It’s all very straightforward really. Give Metagoofil a domain name, tell it
    the type of documents to look at and limit the search results and number of file
    downloads. These limits are going to be defined by the size of client and the
    amount of time available. It is best to try and avoid downloading hundreds of
    each type of document if there is only a short reconnaissance window. Some clients
    may only have a handful of documents in any case. Here the tool is run to see
    what it brings back:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 这其实非常简单。给Metagoofil一个域名，告诉它要查看的文档类型，以及限制搜索结果和文件下载的数量。这些限制将由客户的规模和可用时间来定义。如果只有很短的侦察时间窗口，最好尝试避免下载大量每种类型的文档。无论如何，某些客户可能只有少数几个文档。在这里运行工具以查看它返回了什么：
- en: '[PRE52]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'The -d switch has been used to set the domain, -t to define .doc (Microsoft
    Word), followed by limiting the search results to 200 with the -l switch. The
    number of files downloaded per type is 50 as defined by the -n option. Next the
    choice was made to download the files to the metadata folder on the Desktop. Finally,
    the results were published to an HTML file with the -f option. Here’s a look at
    the output from the tool:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 -d 开关设置了域，-t 定义了 .doc（Microsoft Word），然后使用 -l 开关将搜索结果限制为 200 个。每种类型下载的文件数量由
    -n 选项定义为 50。接下来，选择将文件下载到桌面上的 metadata 文件夹中。最后，结果被发布到一个 HTML 文件中，使用 -f 选项。以下是该工具的输出：
- en: '[PRE53]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: '[PRE54]'
  id: totrans-239
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: '[PRE55]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: '[PRE56]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: '[PRE57]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: '[PRE58]'
  id: totrans-243
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: '[PRE59]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: '[PRE60]'
  id: totrans-245
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: '[PRE61]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: '[PRE62]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: '[PRE63]'
  id: totrans-248
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: '[PRE64]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: '[PRE65]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: '[PRE66]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: '[PRE67]'
  id: totrans-252
  prefs: []
  type: TYPE_PRE
  zh: '[PRE67]'
- en: '[PRE68]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE68]'
- en: '[PRE69]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE69]'
- en: '[PRE70]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE70]'
- en: '[PRE71]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE71]'
- en: '[PRE72]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE72]'
- en: '[PRE73]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE73]'
- en: '[PRE74]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE74]'
- en: '[PRE75]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE75]'
- en: '[PRE76]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE76]'
- en: '[PRE77]'
  id: totrans-262
  prefs: []
  type: TYPE_PRE
  zh: '[PRE77]'
- en: '[PRE78]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE78]'
- en: '[PRE79]'
  id: totrans-264
  prefs: []
  type: TYPE_PRE
  zh: '[PRE79]'
- en: '[PRE80]'
  id: totrans-265
  prefs: []
  type: TYPE_PRE
  zh: '[PRE80]'
- en: '[PRE81]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE81]'
- en: '[PRE82]'
  id: totrans-267
  prefs: []
  type: TYPE_PRE
  zh: '[PRE82]'
- en: '[PRE83]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE83]'
- en: '[PRE84]'
  id: totrans-269
  prefs: []
  type: TYPE_PRE
  zh: '[PRE84]'
- en: '[PRE85]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE85]'
- en: '[PRE86]'
  id: totrans-271
  prefs: []
  type: TYPE_PRE
  zh: '[PRE86]'
- en: '[PRE87]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE87]'
- en: '[PRE88]'
  id: totrans-273
  prefs: []
  type: TYPE_PRE
  zh: '[PRE88]'
- en: '[PRE89]'
  id: totrans-274
  prefs: []
  type: TYPE_PRE
  zh: '[PRE89]'
- en: '[PRE90]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE90]'
- en: '[PRE91]'
  id: totrans-276
  prefs: []
  type: TYPE_PRE
  zh: '[PRE91]'
- en: '[PRE92]'
  id: totrans-277
  prefs: []
  type: TYPE_PRE
  zh: '[PRE92]'
- en: '[PRE93]'
  id: totrans-278
  prefs: []
  type: TYPE_PRE
  zh: '[PRE93]'
- en: '[PRE94]'
  id: totrans-279
  prefs: []
  type: TYPE_PRE
  zh: '[PRE94]'
- en: '[PRE95]'
  id: totrans-280
  prefs: []
  type: TYPE_PRE
  zh: '[PRE95]'
- en: '[PRE96]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE96]'
- en: '[PRE97]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE97]'
- en: '[PRE98]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE98]'
- en: '[PRE99]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE99]'
- en: '[PRE100]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE100]'
- en: '[PRE101]'
  id: totrans-286
  prefs: []
  type: TYPE_PRE
  zh: '[PRE101]'
- en: '[PRE102]'
  id: totrans-287
  prefs: []
  type: TYPE_PRE
  zh: '[PRE102]'
- en: '[PRE103]'
  id: totrans-288
  prefs: []
  type: TYPE_PRE
  zh: '[PRE103]'
- en: '[PRE104]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE104]'
- en: '[PRE105]'
  id: totrans-290
  prefs: []
  type: TYPE_PRE
  zh: '[PRE105]'
- en: '[PRE106]'
  id: totrans-291
  prefs: []
  type: TYPE_PRE
  zh: '[PRE106]'
- en: '[PRE107]'
  id: totrans-292
  prefs: []
  type: TYPE_PRE
  zh: '[PRE107]'
- en: '[PRE108]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE108]'
- en: '[PRE109]'
  id: totrans-294
  prefs: []
  type: TYPE_PRE
  zh: '[PRE109]'
- en: '[PRE110]'
  id: totrans-295
  prefs: []
  type: TYPE_PRE
  zh: '[PRE110]'
- en: '[PRE111]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE111]'
- en: '[PRE112]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE112]'
- en: '[PRE113]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE113]'
- en: '[PRE114]'
  id: totrans-299
  prefs: []
  type: TYPE_PRE
  zh: '[PRE114]'
- en: '[PRE115]'
  id: totrans-300
  prefs: []
  type: TYPE_PRE
  zh: '[PRE115]'
- en: '[PRE116]'
  id: totrans-301
  prefs: []
  type: TYPE_PRE
  zh: '[PRE116]'
- en: '[PRE117]'
  id: totrans-302
  prefs: []
  type: TYPE_PRE
  zh: '[PRE117]'
- en: '[PRE118]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE118]'
- en: '[PRE119]'
  id: totrans-304
  prefs: []
  type: TYPE_PRE
  zh: '[PRE119]'
- en: '[PRE120]'
  id: totrans-305
  prefs: []
  type: TYPE_PRE
  zh: '[PRE120]'
- en: '[PRE121]'
  id: totrans-306
  prefs: []
  type: TYPE_PRE
  zh: '[PRE121]'
- en: '[PRE122]'
  id: totrans-307
  prefs: []
  type: TYPE_PRE
  zh: '[PRE122]'
- en: '[PRE123]'
  id: totrans-308
  prefs: []
  type: TYPE_PRE
  zh: '[PRE123]'
- en: Wow, we really hit the jackpot there. A single command and a few downloads later
    a vast amount more data about our target is known. The results were also dropped
    into a nicely formatted HTML file for us using -o command switch ([Figure 8.13](#F0070)).
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 哇，我们真的赢得了头彩。一个命令和几次下载后，我们已经知道了关于目标的大量更多数据。结果还通过 -o 命令开关放入了一个漂亮格式的 HTML 文件中（见[图
    8.13](#F0070)）。
- en: '![image](../images/F000089f08-13-9780124201248.jpg)'
  id: totrans-310
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-13-9780124201248.jpg)'
- en: Figure 8.13 Metagoofil results HTML.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.13 Metagoofil 结果 HTML。
- en: Metagoofil can work with locally downloaded files too. For example if somebody
    sends a file as a mail attachment, metagoofil can be tasked to strip the metadata
    from it. Simply use the -h command switch.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: Metagoofil 也可以与本地下载的文件一起工作。例如，如果有人将文件作为邮件附件发送，可以让 metagoofil 去除其中的元数据。只需使用 -h
    命令开关。
- en: '[PRE124]'
  id: totrans-313
  prefs: []
  type: TYPE_PRE
  zh: '[PRE124]'
- en: This assumes we have put our local documents in the /root/Desktop/metadata directory.
    The process from here is identical. Metagoofil strips the document metadata and
    prints it to screen as well as writing the results.html file.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 这假设我们已经将本地文档放在 /root/Desktop/metadata 目录中。从这里开始的过程是相同的。Metagoofil 剥离文档元数据并将其打印到屏幕上，同时将结果写入
    results.html 文件。
- en: Why document metadata is useful to social engineers
  id: totrans-315
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 为什么文档元数据对社会工程师有用
- en: I’m guessing at this point, you can see why this is a useful tool for social
    engineers. A couple of commands and a few downloads later, we have gathered an
    insane amount of information about our target organization. We know what software
    the target is using and in a lot of cases which operating system.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: 我猜你现在可以看出为什么这是社会工程师的有用工具了。几个命令和几次下载后，我们已经收集了大量关于目标组织的信息。我们知道目标在使用什么软件，而且在很多情况下，知道他们使用的操作系统。
- en: We know who creates their documents for publishing. We have a nice collection
    of e-mail addresses which could be used in a phishing attack or for pretexts where
    e-mail is the primary means of communication. Given that we know what software
    and OS they may be using we can also ensure that we choose attacks that are more
    likely to work given the target environment.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道谁为他们的出版物创建文档。我们有一个不错的电子邮件地址收集，可以用于钓鱼攻击或以电子邮件为主要通信手段的借口。考虑到我们知道他们可能在使用的软件和操作系统，我们还可以确保选择更有可能在目标环境下奏效的攻击。
- en: On top of all this, the internal usernames and the naming convention for those
    users have been harvested. This can be useful when performing a blended assessment
    or if attempting an attack of login portals or Webmail. It also means that LinkedIn
    and other social media sites can be farmed, obtaining a list of employees which
    is then used to build an even bigger list of e-mail address for any phishing attack.
    Not forgetting that each of those documents may well contain the basis for an
    effective pretext, so check through them religiously.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这一切之上，内部用户名和这些用户的命名约定已经被收集。这在执行混合评估或尝试攻击登录门户或 Webmail 时可能会很有用。这还意味着可以对 LinkedIn
    和其他社交媒体网站进行挖掘，获取员工列表，然后用于构建更大规模的电子邮件地址列表，用于任何钓鱼攻击。别忘了，每个文档都可能包含有效的借口基础，所以要认真检查它们。
- en: Photographic metadata
  id: totrans-319
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 照片元数据
- en: There is just no escaping the fact that every digital file created will contain
    its own fingerprint. This might be relatively harmless information, like the type
    of system that created it, or it could potentially be far more sensitive, like
    the exact geolocation at which the photograph was taken.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 每个数字文件创建的事实都无法逃避。这可能是相对无害的信息，比如创建它的系统类型，或者可能是更敏感的信息，比如拍摄该照片的确切地理位置。
- en: The age of the smartphone has ensured that these devices have become the most
    popular for taking pictures, remember that such devices also have built-in GPS
    functionality. That means that every photograph that is uploaded directly to Facebook,
    LinkedIn, or Twitter also has the location data contained within. This information
    is known as Exif (exchangeable image file format) data.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 智能手机的时代确保了这些设备成为拍照的最受欢迎的设备，记住这些设备也具有内置的GPS功能。这意味着每张直接上传到Facebook、LinkedIn或Twitter的照片中也包含位置数据。这些信息被称为Exif（可交换图像文件格式）数据。
- en: Here is a look at some tools for Exif data extraction.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是一些用于提取 Exif 数据的工具。
- en: Exiftool—[http://www.sno.phy.queensu.ca/~phil/exiftool/](http://www.sno.phy.queensu.ca/~phil/exiftool/)
  id: totrans-323
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Exiftool—[http://www.sno.phy.queensu.ca/~phil/exiftool/](http://www.sno.phy.queensu.ca/~phil/exiftool/)
- en: Exiftool is a free Exif reader for both Windows and OSX. This example uses the
    OSX version, but the Windows version works in much the same way.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: Exiftool 是 Windows 和 OSX 都支持的免费 Exif 阅读器。这个例子使用的是OSX版本，但Windows版本的工作方式基本相同。
- en: Exiftool can be used to edit metadata as well as retrieve it, meaning it can
    be used to sanitize any corporate photographs before publishing them.
  id: totrans-325
  prefs: []
  type: TYPE_NORMAL
  zh: Exiftool 不仅可以用于检索元数据，还可以用于编辑元数据，这意味着它可以用于在发布之前对任何企业照片进行消毒处理。
- en: Running the application is simple, simply tell it which photo to extract data
    from.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 运行该应用程序非常简单，只需告诉它从哪张照片中提取数据即可。
- en: '[PRE125]'
  id: totrans-327
  prefs: []
  type: TYPE_PRE
  zh: '[PRE125]'
- en: Anyone following this through as they read through the book will likely have
    a screen full of output. A lot of it is surplus to requirements to us as social
    engineers, but some things stand out ([Figure 8.14](#F0075)).
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 随着读者跟着书本阅读，他们可能会看到屏幕上满满的输出。对于我们作为社交工程师来说，很多信息都是多余的，但有些东西很突出（参见[图 8.14](#F0075)）。
- en: '![image](../images/F000089f08-14-9780124201248.jpg)'
  id: totrans-329
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-14-9780124201248.jpg)'
- en: Figure 8.14 Exiftool data.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.14 Exiftool 数据。
- en: The first screen grab shows us some key pieces of information (namely the time
    the image was created and the type of phone and software in use). The latter will
    prove far more useful should they be looking at exploits or potential asset recovery
    during the engagement? Older versions of IOS as in this example are more susceptible
    to data retrieval. The time the image was taken is also useful, mainly to understand
    if the image is still relevant to us or not. It may be that we are trying to identify
    the location of satellite offices for a business, but we know that they only opened
    after a specific date.
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 第一张屏幕截图向我们展示了一些关键信息（即图像创建的时间以及所使用的手机和软件类型）。后者如果他们正在寻找漏洞或潜在的资产回收将会更有用。像这个例子中的旧版IOS更容易被检索数据。照片被拍摄的时间也很有用，主要是为了了解照片对我们是否仍然相关。也许我们正在尝试识别业务的卫星办事处的位置，但我们知道它们仅在特定日期之后开业。
- en: Next is the really interesting stuff; the latitude and longitude at which the
    image was taken ([Figure 8.15](#F0080)). In this instance, the full string was
    51°30′39.60″N, 0°5′6.60″W.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来是真正有趣的部分；图像被拍摄的纬度和经度（参见[图 8.15](#F0080)）。在这个例子中，完整字符串为51°30′39.60″N，0°5′6.60″W。
- en: '![image](../images/F000089f08-15-9780124201248.jpg)'
  id: totrans-333
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-15-9780124201248.jpg)'
- en: Figure 8.15 Exiftool geo location data.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.15 Exiftool 地理位置数据。
- en: My mapping tool of choice here is Google Maps, predictably. We will need to
    manipulate the string a little, so that Google will accept it. All you need to
    do is remove “deg” from both the latitude and longitude. So, where was I when
    the photo was taken? ([Figure 8.16](#F0085)). As it turns out, just down the road
    from the Gherkin, London.
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: 我在这里选择的地图工具是谷歌地图，可以预见的。我们需要稍微修改字符串，以便谷歌接受它。你只需要从纬度和经度中都删除“deg”。那么，当照片拍摄时我在哪里？（参见[图
    8.16](#F0085)）。结果证明，就在伦敦Gherkin大楼附近。
- en: '![image](../images/F000089f08-16-9780124201248.jpg)'
  id: totrans-336
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-16-9780124201248.jpg)'
- en: Figure 8.16 Google Maps location.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.16 谷歌地图位置。
- en: How can the process of image retrieval and metadata extraction be automated?
    Certainly downloading files individually and stripping them out one by one should
    be avoided. As it happens, someone, somewhere has tackled the issue already.
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 如何自动化图像检索和元数据提取过程？当然，应该避免逐个下载文件并逐个剥离它们。恰好，某人已经解决了这个问题。
- en: Here are some of the options.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一些选项。
- en: Image Picker—a Firefox add-on—[https://addons.mozilla.org/en-us/firefox/addon/image-picker/](https://addons.mozilla.org/en-us/firefox/addon/image-picker/)
  id: totrans-340
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 图像选择器——Firefox 的一个附加组件——[https://addons.mozilla.org/en-us/firefox/addon/image-picker/](https://addons.mozilla.org/en-us/firefox/addon/image-picker/)
- en: Image picker is an add-on for Firefox, which will download all images from the
    page you are browsing. Installation of Firefox add-ons is very straightforward.
    Click the link above, hit install, and then restart Firefox.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: Image picker是Firefox的一个附加组件，可以从您正在浏览的页面下载所有图片。安装Firefox附加组件非常简单。点击上面的链接，点击安装，然后重新启动Firefox。
- en: When Firefox restarts, there will be a little button that looks like a picture
    with a download arrow on it. Clicking this button will give the option to download
    all images within the tab.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 当Firefox重新启动时，将会有一个看起来像一个带有下载箭头的图片的小按钮。点击这个按钮将会有一个选项来下载标签中的所有图片。
- en: This add-on is still only going to be really useful on image heavy sites, as
    it will not spider the site looking for images. So, if the targets are Flickr
    or Picasa accounts, this could be a really useful tool, not to mention very straight
    forward to use.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 这个附加组件仍然只在图片较多的网站上才真正有用，因为它不会搜索网站以查找图片。所以，如果目标是Flickr或Picasa账户，这可能是一个非常有用的工具，更不用说非常简单直接地使用了。
- en: Now there are a lot of photos, so Exiftool can be used to process the entire
    directory. The command is the same, just give it the directory name instead of
    the image name.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 现在有很多照片，所以Exiftool可以用来处理整个目录。命令是一样的，只是给它目录名而不是图片名。
- en: '[PRE126]'
  id: totrans-345
  prefs: []
  type: TYPE_PRE
  zh: '[PRE126]'
- en: You could grep for the values you want if necessary. The following command will
    print the GPS position of each photo.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有必要，您可以使用grep查找所需的值。以下命令将打印每张照片的GPS位置。
- en: '[PRE127]'
  id: totrans-347
  prefs: []
  type: TYPE_PRE
  zh: '[PRE127]'
- en: Interestingly, Twitter sanitizes all Exif data from images uploaded to it, so
    this is no longer an avenue of interest for us. This wasn’t always the case with
    some high profile examples highlighting the issues. Roelof Temmingh, founder of
    Paterva ([http://paterva.com/web6/](http://paterva.com/web6/)) once gave a talk
    and demonstration which highlighted who was tweeting from within the confines
    of the NSA’s parking lot. Using Maltego to gather geolocation data they were able
    to highlight potential employees of the NSA in very short order, as well as link
    rather startling personal data. It is out-of-the-box thinking like this that can
    really bolster a social engineering engagement, not to mention highlight that
    maybe we are looking in the wrong places when it comes to security.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 有趣的是，Twitter会清除上传到其平台的所有图片的Exif数据，因此这对我们不再是一个感兴趣的渠道了。这在以前并不总是这样，一些知名案例突显了这个问题。Paterva的创始人Roelof
    Temmingh（[http://paterva.com/web6/](http://paterva.com/web6/)）曾经做过一次演讲和演示，突显了谁在NSA停车场内发推文。他们使用Maltego来收集地理位置数据，很快就能突出NSA的潜在员工，以及联系相当惊人的个人数据。像这样的创造性思维真的可以增强社会工程的参与度，更不用说，也许我们在安全方面寻找的地方不对。
- en: Using Wget to download images from a site
  id: totrans-349
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 使用Wget从网站下载图片
- en: Wget is a command line tool that can make HTTP, HTTPS, and FTP connections to
    a site, mainly for the purpose of automated retrieval of files. It is a command
    line tool that is available for Linux, OSX, and Windows. If either OSX or Linux
    is being used, it is likely that the user will already be in possession of it.
    If not, take a look here to download and install the package—[http://www.gnu.org/software/wget/](http://www.gnu.org/software/wget/).
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: Wget是一个命令行工具，可以建立与网站的HTTP、HTTPS和FTP连接，主要用于自动检索文件。它是一个可用于Linux、OSX和Windows的命令行工具。如果使用的是OSX或Linux，用户可能已经拥有它了。如果没有，请查看这里下载和安装包—[http://www.gnu.org/software/wget/](http://www.gnu.org/software/wget/)。
- en: Wget can be instructed to spider links on a page and download any images it
    finds to a specific depth. It is basically going to do what Image Picker does,
    but on steroids. Remember that scene from “The Social Network” where Mark Zuckerberg
    needs to download all the profile pictures of students from their Facebook? He
    used wget too.
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 可以指示Wget在页面上蜘蛛链接并下载它找到的任何图片到特定的深度。基本上它会做Image Picker所做的事情，但是更强大。还记得《社交网络》中马克·扎克伯格需要下载所有学生的Facebook头像的场景吗？他也用了wget。
- en: '[PRE128]'
  id: totrans-352
  prefs: []
  type: TYPE_PRE
  zh: '[PRE128]'
- en: '[PRE129]'
  id: totrans-353
  prefs: []
  type: TYPE_PRE
  zh: '[PRE129]'
- en: This command will recursively download files from the site and follow a single
    level of links, downloading images from each. It will then drop them all conveniently
    in a directory named [www.offensivesite.com](http://www.offensivesite.com). Again,
    Exiftool pointed at the directory to strip all the GPS data.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 这个命令将从该网站递归下载文件，并跟踪一个层级的链接，从每个链接下载图片。然后，它会将它们全部方便地放在一个名为[www.offensivesite.com](http://www.offensivesite.com)的目录中。再次，Exiftool指向该目录以剥离所有GPS数据。
- en: GeoSetter—[http://www.geosetter.de/en/](http://www.geosetter.de/en/)
  id: totrans-355
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: GeoSetter—[http://www.geosetter.de/en/](http://www.geosetter.de/en/)
- en: GeoSetter is a Windows application which strips geo data from images and then
    builds a map from them. It is extremely simple to use and quickly highlights potential
    physical locations that could be used in your assessments. It supports the export
    of data to Google Earth and the editing of geoinformation, should you wish to
    sanitize an image.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: GeoSetter 是一个 Windows 应用程序，它从图像中剥离地理数据，然后构建地图。它非常简单易用，并快速突出显示可能用于评估的物理位置。它支持将数据导出到谷歌地球，并编辑地理信息，如果您希望清理图像。
- en: GeoSetter is a GUI-driven application with a simple installer. Simply tell the
    application where to find the images you want to look at and it will do the rest.
    This can be achieved by clicking the “Images” menu item and then opening the correct
    folder. It will take a short while for the images to be imported if you have a
    large collection, so be patient, and check the progress indicator on the left
    below your images.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: GeoSetter 是一个带有简单安装程序的 GUI 应用程序。只需告诉应用程序要查看的图像在哪里，它就会完成剩下的工作。这可以通过点击“图像”菜单项，然后打开正确的文件夹来实现。如果你有大量的图像集合，导入图像可能需要一段时间，所以请耐心等待，并检查左侧图像下方的进度指示器。
- en: In the interests of science, I uploaded the contents of my iPhone’s photo library
    and Geomapped them ([Figure 8.17](#F0090)).
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 出于科学兴趣，我上传了我的 iPhone 照片库的内容，并对其进行了地理标记（参见图 8.17）。
- en: '![image](../images/F000089f08-17-9780124201248.jpg)'
  id: totrans-359
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-17-9780124201248.jpg)'
- en: Figure 8.17 GeoSetter in action.
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.17 GeoSetter 的操作。
- en: Immediately it can be identified just from the grouping of image locations where
    the majority of my time is spent. The iPhone’s owner lives just outside Leeds,
    Yorkshire, England. Leeds is half obscured under a mass of mapping pins.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 立即可以通过图像位置的分组来确定我大部分时间所在的地点。iPhone 的所有者住在英格兰约克郡利兹市郊。利兹市被大量的地图标记遮挡。
- en: Selecting all of the relevant images and choosing “Export to Google Earth” from
    the images menu is also a nice way to visualize the data. The end result is much
    like the Google map above, but with overlays of each of the images instead of
    map markers. This enables the swift identification of which images were taken
    where ([Figure 8.18](#F0095)).
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 选择所有相关图像并从图像菜单中选择“导出到谷歌地球”也是可视化数据的一种好方法。最终结果与上面的谷歌地图非常相似，但是每个图像都有覆盖而不是地图标记。这使得可以迅速识别哪些图像是在哪里拍摄的（参见图
    8.18）。
- en: '![image](../images/F000089f08-18-9780124201248.jpg)'
  id: totrans-363
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-18-9780124201248.jpg)'
- en: Figure 8.18 Google Earth output.
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.18 谷歌地球输出。
- en: 'Piecing all of the data together is a fairly simple task. A corporate website
    or employee blog has been targeted and every image has been downloaded using wget.
    Next, either Exiftool, or GeoSetter has been used to map out the locations at
    which the images were taken. Here are some examples of the kinds of useful intel
    this exercise can provide to a social engineer:'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: 汇总所有数据是一个相当简单的任务。一个公司网站或员工博客已被定位，并使用 wget 下载了每个图像。接下来，可以使用 Exiftool 或 GeoSetter
    来标记图像拍摄的位置。以下是这种练习可以为社会工程师提供的有用情报的一些示例：
- en: • Corporate locations and offices
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: • 公司的各个地点和办公室
- en: • Data Center locations
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: • 数据中心位置
- en: • Potential spots at which employees of an organization go to socialize
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: • 组织员工社交的潜在地点
- en: • Clients and vendors related to the organization
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: • 与组织相关的客户和供应商
- en: • Corporate device types (iPhone, Android)
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: • 公司设备类型（iPhone，Android）
- en: • Device names. (The iPhone device name is very often the users name too.)
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: • 设备名称。（iPhone 设备名称很常常也是用户的姓名。）
- en: Some organizations keep their facility locations closely guarded, so being able
    to show them the damage done by not educating their employees regarding Exif data
    can be a valuable exercise in and of itself.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 一些组织将他们的设施位置严密保密，因此展示由于未教育员工有关 Exif 数据而造成的损害可以是一个有价值的练习。
- en: Identifying potential locations where employees may hang out provides a social
    engineer with all sorts of opportunities. It could be as simple as swiping an
    RFID badge, or as complex as coercing information out of employees when they are
    off their guard.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 确定员工可能聚集的地点为社会工程师提供了各种机会。这可能只是简单地偷取一个 RFID 徽章，或者在员工放松警惕时胁迫获取信息。
- en: Twitter was a gold mine for this kind of information, but that has changed now
    that Exif data is scrubbed on upload. This is a great move by Twitter and hopefully
    more will follow.
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: Twitter 曾经是这种信息的宝库，但现在上传时已清除 Exif 数据。这是 Twitter 的一个很好的举措，希望更多人效仿。
- en: Reverse image search engines
  id: totrans-375
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 反向图像搜索引擎
- en: Whilst on the topic of images, a serious look at reverse image search engines
    should be carried out. These services offer the ability to upload an image file
    and watch the search engine trace it back to its other locations. Some of these
    also attempt to match attributes within the image to other photographs stored
    online, e.g., colors and shapes.
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 谈到图像，应该认真研究一下反向图像搜索引擎。这些服务提供了上传图像文件并观察搜索引擎将其追溯到其他位置的功能。其中一些还尝试将图像中的属性与在线存储的其他照片进行匹配，例如颜色和形状。
- en: There are plenty, although the most popular are arguably Google’s reverse image
    search—[http://www.google.com/insidesearch/features/images/searchbyimage.html](http://www.google.com/insidesearch/features/images/searchbyimage.html)
    and Tineye—[http://www.tineye.com](http://www.tineye.com).
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然有很多，但最流行的可能是谷歌的反向图像搜索—[http://www.google.com/insidesearch/features/images/searchbyimage.html](http://www.google.com/insidesearch/features/images/searchbyimage.html)和Tineye—[http://www.tineye.com](http://www.tineye.com)。
- en: Both of the services offer the ability to upload a file or provide a URL for
    the file. Please note that if an image is uploaded, it is important to ensure
    that the image rights are not granted to somebody else.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 这两种服务都提供了上传文件或提供文件URL的功能。请注意，如果上传了图像，则重要的是确保图像权利没有被授予给其他人。
- en: This kind of service is useful to social engineers because it helps to map a
    single image back to social networking accounts, blogs, twitter accounts, corporate
    websites, and personal websites. As an example, a colleague’s LinkedIn photo fed
    into Google reverse image search. It immediately identified their Twitter account
    within the search results, therefore if a picture of an employee is discovered
    on a corporate website but there is no idea who it is, this can provide a tremendously
    useful function. The more online presence that can be linked to an individual,
    the more chance there is of constructing a believable pretext and retrieving further
    intelligence.
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 这种服务对社会工程师很有用，因为它帮助将单个图像映射回社交网络账户、博客、Twitter账户、公司网站和个人网站。例如，将同事的LinkedIn照片输入到Google反向图像搜索中。它立即在搜索结果中识别出他们的Twitter账户，因此如果在公司网站上发现了员工的照片但不知道是谁，这将提供非常有用的功能。将更多在线存在关联到个人，就越有可能构建一个可信的借口并获取更多情报。
- en: Not so metadata
  id: totrans-380
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 不是元数据
- en: There are other kinds of data within documents that cannot be ignored. They
    aren’t pieces of metadata, nor are they necessarily directly visible within the
    document, but they could potentially be the most damaging.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 文档中还有其他种类的数据，不能被忽视。它们不是元数据片段，也不一定直接可见于文档中，但它们可能是最具破坏力的。
- en: First, and most obvious of all, is document content. It isn’t completely unusual
    to find information relating to internal systems or members of staff, even entire
    contact lists within files uploaded to an organizational website. This is why
    it can often pay to scour these documents for interesting information. There are
    a handful of ways to go about this, some manual, some less so.
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，也是最明显的是文档内容。在上传到组织网站的文件中找到与内部系统或员工相关的信息，甚至是整个联系人列表并不完全不寻常。这就是为什么经常搜索这些文件以获取有趣信息可能是值得的原因。有几种方法可以做到这一点，有些是手动的，有些则不是。
- en: Using the built-in “finder” in OSX is one of the ways that can be chosen to
    go about it. Simply browsing to the folder that contains the files, click the
    magnifying glass in the top right and choose the keywords “password” or “system”
    for example. Another good idea is to search for the area code section of a phone
    number. Finder will then return any matches that should be investigated further.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 使用OSX中的内置“查找器”是可以选择的方式之一。只需浏览到包含文件的文件夹，点击右上角的放大镜，然后选择关键字“密码”或“系统”等。另一个好主意是搜索电话号码的区号部分。查找器然后会返回任何需要进一步调查的匹配项。
- en: PDFGrep—[http://pdfgrep.sourceforge.net](http://pdfgrep.sourceforge.net)
  id: totrans-384
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: PDFGrep—[http://pdfgrep.sourceforge.net](http://pdfgrep.sourceforge.net)
- en: If there was ever a tool that did what it said on the packet, pdfgrep is it.
    It can be pointed at either an individual PDF or a directory full of them, and
    it will search them all for a pattern of choosing. This works with regex as well
    as direct string matching.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 如果说有一个工具确实做到了其所说的，那么PDFGrep就是其中之一。它可以指向单个PDF文件或整个目录，并搜索其中的所有选定模式。它可以使用正则表达式以及直接字符串匹配。
- en: In order to get the tool compiled in Kali Linux, poppler needs to be installed,
    which is a toolset for PDF rendering.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在Kali Linux中编译工具，需要安装poppler，这是一个用于PDF渲染的工具集。
- en: '[PRE130]'
  id: totrans-387
  prefs: []
  type: TYPE_PRE
  zh: '[PRE130]'
- en: Then all that needs to be done is to follow the instructions within the INSTALL
    file within the PDFGrep directory.
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，只需按照 PDFGrep 目录中的 INSTALL 文件中的说明进行操作。
- en: Briefly, the shell commands `./configure; make; make install’ should configure,
    build, and install this package.
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，shell 命令 `./configure; make; make install’ 应该配置、构建和安装这个软件包。
- en: '[PRE131]'
  id: totrans-390
  prefs: []
  type: TYPE_PRE
  zh: '[PRE131]'
- en: Once this process is complete, there should be an executable file called “pdfgrep.”
    Running it couldn’t be simpler, here is an example of searching through documents
    for the word “password.”
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此过程后，应该会有一个名为“pdfgrep”的可执行文件。运行它非常简单，这里是一个搜索文档中“密码”一词的示例。
- en: '[PRE132]'
  id: totrans-392
  prefs: []
  type: TYPE_PRE
  zh: '[PRE132]'
- en: '[PRE133]'
  id: totrans-393
  prefs: []
  type: TYPE_PRE
  zh: '[PRE133]'
- en: Given that the pattern can be a regular expression, the only limitation is your
    imagination. Strings can be searched for that contain, start with, or end with
    certain values.
  id: totrans-394
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于模式可以是正则表达式，唯一的限制就是你的想象力。可以搜索包含、以某些值开头或以某些值结尾的字符串。
- en: Even if the regex is not known, there are many great examples that are just
    a Google search away. Here are some examples of what to look out for within these
    documents, some more common than others.
  id: totrans-395
  prefs: []
  type: TYPE_NORMAL
  zh: 即使不知道正则表达式，也有许多很好的示例可以通过谷歌搜索获得。以下是在这些文档中要注意的一些示例，有些比其他的更常见。
- en: • National Insurance (UK) or Social Security (US) numbers.
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: • 国民保险（英国）或社会保障（美国）号码。
- en: • Phone numbers
  id: totrans-397
  prefs: []
  type: TYPE_NORMAL
  zh: • 电话号码
- en: • E-mail addresses
  id: totrans-398
  prefs: []
  type: TYPE_NORMAL
  zh: • 电子邮件地址
- en: • Postal codes (which then should lead you to addresses)
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: • 邮政编码（然后应该可以找到地址）
- en: • Names (search for titles, Mr, Mrs, Dr, etc.).
  id: totrans-400
  prefs: []
  type: TYPE_NORMAL
  zh: • 姓名（搜索头衔，先生，夫人，博士等）。
- en: Pdfgrep is a great way to quickly find key pieces of data during any reconnaissance
    work. If Metagoofil or FOCA has been used, each will have already downloaded all
    of the PDF documents from the corporate website. Now, pdfgrep can be rerun against
    the folder looking for key words. However, this is not a replacement for manually
    reviewing each document, but it can help to shave hours of this part of the assessment.
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: Pdfgrep 是在任何侦察工作中快速查找关键数据的好方法。如果已经使用了 Metagoofil 或 FOCA，每个都已经从公司网站下载了所有 PDF
    文档。现在，可以重新运行 pdfgrep 对文件夹进行关键字搜索。然而，这并不是手动审查每个文档的替代方法，但可以帮助节省大量时间。
- en: Document obfuscation
  id: totrans-402
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 文档混淆
- en: While this is certainly one of the more obscure document sanitization issues,
    it has been seen on several occasions.
  id: totrans-403
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管这肯定是较为晦涩的文件消毒问题之一，但已经在几个场合看到过。
- en: The first time it was seen was on a penetration testing gig, but it was quickly
    realized that it could apply quite nicely to social engineering. The organizations
    in question did not seem to have any real process for document sanitization prior
    to submission to their website. While the engineer was trawling through the list
    of documents downloaded by FOCA, they noticed that several of them had been obfuscated
    with black squares and rectangles. Opening the documents in the Adobe Creative
    suite showed that the shape could be moved away, revealing the sensitive data
    below. This one can definitely be counted as one of the rarer issues, but it is
    always worth checking those documents through manually.
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次看到这种情况是在一次渗透测试中，但很快意识到它也可以很好地应用于社会工程。相关组织似乎在提交到他们的网站之前没有进行任何真正的文件消毒过程。当工程师在通过
    FOCA 下载的文档列表中查找时，他们注意到其中几个已经用黑色方块和矩形混淆了。在 Adobe Creative 套件中打开这些文档后，可以移开形状，显示下面的敏感数据。这绝对可以算作是较为罕见的问题之一，但始终值得手动检查这些文档。
- en: The Way Back Machine—[http://archive.org/web/web.php](http://archive.org/web/web.php)
  id: totrans-405
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Way Back Machine—[http://archive.org/web/web.php](http://archive.org/web/web.php)
- en: The Way Back Machine is an archive of older versions of websites. In some instances,
    it stretches back years and has regular snapshots of many websites. It can often
    be useful to check a target’s domain for sensitive information such as contact
    details and physical locations. While information security is a big deal today,
    you don’t have to go back too far to realize it wasn’t always this way.
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: Way Back Machine 是一个存档旧版网站的工具。在某些情况下，它可以追溯数年，并定期快照许多网站。检查目标域名以查找诸如联系方式和实际位置等敏感信息通常是很有用的。虽然信息安全在今天非常重要，但你不必回溯太久就会意识到情况并非总是如此。
- en: As is clearly evident, the corporate web presence is a great source of information
    for a social engineer. Some of the things available are more obvious such as contact
    details, staff hierarchies, and business purpose. These, alongside information
    relating to clients, vendors, and partners can be used to form effective pretexts.
    When added to all of the fantastic intelligence that can be harvested using the
    tools discussed in this section, the engagement is starting to look very healthy.
    Let’s dive straight into e-mail addresses, how to find them, and their significance
    in engagements of this type.
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 正如明显可见的那样，企业的网站存在很多信息可以供社会工程师使用。其中一些更明显的包括联系方式、员工层级和业务目的。这些信息与客户、供应商和合作伙伴相关的信息一起，可以用来形成有效的借口。当加上本节讨论的工具可以收集到的所有出色情报时，这次工作开始看起来非常健康。让我们直接深入探讨电子邮件地址，如何找到它们以及它们在这类工作中的重要性。
- en: E-mail addresses
  id: totrans-408
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 电子邮件地址
- en: The importance of acquiring a target’s e-mail addresses during an assessment
    cannot be overstated, yet they are given away without a thought. They are used
    to sign up for forums, online shopping accounts, social networks, and even personal
    blogs. Is the e-mail address a piece of information that should be taking more
    seriously? Should it be treated like guarding the crown jewels?
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 在评估过程中获取目标的电子邮件地址的重要性不言而喻，但它们却被毫不考虑地泄露出去。它们用于注册论坛、在线购物账户、社交网络甚至个人博客。电子邮件地址是否应该被更加重视？它是否应该像保护皇冠珠宝一样对待？
- en: The general experience has always been that a lot of businesses don’t police
    what their users do with corporate e-mail addresses. Sometimes it might be better
    to only assign a mailbox to those that really need it.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 通常的经验一直是很多企业不监管他们的用户如何使用公司电子邮件地址。有时，只分配邮箱给那些真正需要的人可能会更好。
- en: So why are social engineers so interested in what is seemingly such an unimportant
    piece of information?
  id: totrans-411
  prefs: []
  type: TYPE_NORMAL
  zh: 那么为什么社会工程师对看似不重要的信息如此感兴趣呢？
- en: Phishing attacks
  id: totrans-412
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 钓鱼攻击
- en: Phishing attacks have become very popular in the modern threat landscape. The
    reason for this is might be twofold. First of all, they are incredibly easy to
    perform, at least to a basic standard. Second of all, people fall for them in
    their millions every single day. Seems like a winning combination for any would
    be scammer.
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 钓鱼攻击在现代威胁格局中变得非常流行。这样做的原因可能有两个。首先，它们非常容易执行，至少达到基本标准。其次，每天都有数百万人上当受骗。对于任何可能的骗子来说，这似乎是一个胜利的组合。
- en: Including a phishing exercise as a part of a social engineering engagement is
    always worthwhile, especially where the attempt is targeted. That being said,
    broad scope phishing attacks also have their place, it just boils down to timescales.
    Phishing attacks and how to perform them will be covered in greater detail in
    [Chapter 9](CHP009.xhtml).
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 将钓鱼演练作为社会工程工作的一部分总是值得的，特别是在尝试进行定向攻击时。话虽如此，广泛范围的钓鱼攻击也有其位置，这只是时间问题。钓鱼攻击以及如何执行它们将在[第9章](CHP009.xhtml)中更详细地介绍。
- en: Password attacks
  id: totrans-415
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 密码攻击
- en: As already mentioned, a lot of engagements include elements of penetration testing
    as well as social engineering. For example, gathering e-mail addresses can allow
    an attack using Outlook Web Access (OWA). The e-mail address can also be broken
    down into different permutations to guess internal naming conventions for users.
    This information can then be used to attack VPN portals.
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: 正如前面提到的，很多工作都包括渗透测试和社会工程的元素。例如，收集电子邮件地址可以让攻击者使用 Outlook Web Access（OWA）进行攻击。电子邮件地址还可以分解成不同的排列组合，以猜测用户的内部命名惯例。然后可以利用这些信息来攻击
    VPN 门户。
- en: Insider knowledge
  id: totrans-417
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 内幕知识
- en: Gathering an e-mail address and then finding out where it is used on the Internet
    can lead to further useful information. This can lead to a pretext all of its
    own. Calling into an organization pretending to be a user who cannot log into
    his mailbox may seem cliche, but it has a long history of success. Just knowing
    the URL of an organization’s OWA or VPN device along with the username can create
    enough plausibility for a successful attack. How to find an organization’s assets
    will be covered in greater detail, later in the chapter when DNS enumeration techniques
    are looked at.
  id: totrans-418
  prefs: []
  type: TYPE_NORMAL
  zh: 收集电子邮件地址，然后查找其在互联网上的使用情况可能会带来更多有用的信息。这可能会引发一种假装的借口。假装成一个无法登录邮箱的用户致电组织可能看起来老套，但这在历史上很成功。只要知道组织的
    OWA 或 VPN 设备的 URL 以及用户名，就足以为成功的攻击创造足够的可信度。如何找到组织的资产将在本章稍后详细讨论，届时将看到 DNS 枚举技术。
- en: E-mail address conventions
  id: totrans-419
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 电子邮件地址约定
- en: Although briefly mentioned when looking at password attacks, one corporate e-mail
    address can be a real foot in the door.
  id: totrans-420
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管在查看密码攻击时简要提到过，但一个企业电子邮件地址可以是一个真正的入门点。
- en: Most organizations try to publish generic mailboxes such as [info@targetbusiness.com](mailto:info@targetbusiness.com).
    This makes it difficult for a social engineer to run any sort of phishing scam.
    If access can be gained to a single user’s address, all of that changes. Now a
    list of all employees of the target business can be gained using LinkedIn ([www.linkedin.com](http://www.linkedin.com)).
    This intel can be used to create a much larger list of potential target e-mail
    addresses with a reasonable level of certainty that they will exist.
  id: totrans-421
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数组织尝试发布通用邮箱，例如 [info@targetbusiness.com](mailto:info@targetbusiness.com)。这使得社会工程师难以进行任何形式的网络钓鱼。如果可以访问单个用户的地址，则所有情况都会改变。现在可以使用
    LinkedIn（[www.linkedin.com](http://www.linkedin.com)）获取目标企业所有员工的列表。这些情报可以用来创建一个更大的潜在目标电子邮件地址列表，可以合理地确定它们存在。
- en: Now that several good reasons for wanting to harvest corporate e-mail addresses
    have been covered, here’s an overview of how this can be achieved.
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 现在已经介绍了收集企业电子邮件地址的几个好理由，接下来将概述如何实现这一目标。
- en: theharvester—[https://code.google.com/p/theharvester/](https://code.google.com/p/theharvester/)
  id: totrans-423
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: theharvester—[https://code.google.com/p/theharvester/](https://code.google.com/p/theharvester/)
- en: theharvester actually performs a lot more than just e-mail address retrieval,
    it also finds subdomains, employee names, hosts, and open ports to name a few.
    The intention of the tool was to provide a platform for intelligence gathering
    during penetration testing. The information it returns is still of use to social
    engineers, probably more so than penetration testers strictly speaking.
  id: totrans-424
  prefs: []
  type: TYPE_NORMAL
  zh: theharvester 实际上不仅仅是执行电子邮件地址检索，它还可以找到子域、员工姓名、主机和开放端口等等。该工具的意图是在渗透测试期间提供情报收集平台。它返回的信息对于社会工程师仍然有用，可能比严格意义上的渗透测试者更有用。
- en: The tool is included in BackTrack and Kali Linux by default.
  id: totrans-425
  prefs: []
  type: TYPE_NORMAL
  zh: 该工具默认包含在 BackTrack 和 Kali Linux 中。
- en: 'theharvester is a command line tool, but is extremely straightforward to use
    as the examples from the documentation show:'
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: theharvester 是一个命令行工具，但如文档中的示例所示，使用起来非常简单：
- en: '[PRE134]'
  id: totrans-427
  prefs: []
  type: TYPE_PRE
  zh: '[PRE134]'
- en: '[PRE135]'
  id: totrans-428
  prefs: []
  type: TYPE_PRE
  zh: '[PRE135]'
- en: '[PRE136]'
  id: totrans-429
  prefs: []
  type: TYPE_PRE
  zh: '[PRE136]'
- en: The -d command switch specifies your target domain or organization.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 `-d` 命令开关指定目标域名或组织。
- en: The -b command switch is the search mechanism you would like to employ, be that
    “Google,” “Bing,” or “all”.
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: '`-b` 命令开关是您想要使用的搜索机制，可以是“Google”、“Bing”或“all”。'
- en: The -l command switch limits the number of results you will retrieve.
  id: totrans-432
  prefs: []
  type: TYPE_NORMAL
  zh: '`-l` 命令开关限制您将检索到的结果数量。'
- en: Let’s run theharvester against an actual domain and see what it brings back.
  id: totrans-433
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们针对一个实际域名运行 theharvester 看看它会带回什么。
- en: '[PRE137]'
  id: totrans-434
  prefs: []
  type: TYPE_PRE
  zh: '[PRE137]'
- en: '[PRE138]'
  id: totrans-435
  prefs: []
  type: TYPE_PRE
  zh: '[PRE138]'
- en: '[PRE139]'
  id: totrans-436
  prefs: []
  type: TYPE_PRE
  zh: '[PRE139]'
- en: '[PRE140]'
  id: totrans-437
  prefs: []
  type: TYPE_PRE
  zh: '[PRE140]'
- en: '[PRE141]'
  id: totrans-438
  prefs: []
  type: TYPE_PRE
  zh: '[PRE141]'
- en: '[PRE142]'
  id: totrans-439
  prefs: []
  type: TYPE_PRE
  zh: '[PRE142]'
- en: '[PRE143]'
  id: totrans-440
  prefs: []
  type: TYPE_PRE
  zh: '[PRE143]'
- en: '[PRE144]'
  id: totrans-441
  prefs: []
  type: TYPE_PRE
  zh: '[PRE144]'
- en: '[PRE145]'
  id: totrans-442
  prefs: []
  type: TYPE_PRE
  zh: '[PRE145]'
- en: '[PRE146]'
  id: totrans-443
  prefs: []
  type: TYPE_PRE
  zh: '[PRE146]'
- en: '[PRE147]'
  id: totrans-444
  prefs: []
  type: TYPE_PRE
  zh: '[PRE147]'
- en: '[PRE148]'
  id: totrans-445
  prefs: []
  type: TYPE_PRE
  zh: '[PRE148]'
- en: '[PRE149]'
  id: totrans-446
  prefs: []
  type: TYPE_PRE
  zh: '[PRE149]'
- en: '[PRE150]'
  id: totrans-447
  prefs: []
  type: TYPE_PRE
  zh: '[PRE150]'
- en: '[PRE151]'
  id: totrans-448
  prefs: []
  type: TYPE_PRE
  zh: '[PRE151]'
- en: '[PRE152]'
  id: totrans-449
  prefs: []
  type: TYPE_PRE
  zh: '[PRE152]'
- en: The output has been reduced for the sake of brevity, but theharvester has very
    quickly and efficiently identified 12 e-mail addresses which can be used in an
    engagement all by harvesting search engines. It is important to note that a domain
    name needn’t be provided, just passing the company name to theharvester is sufficient.
    This may lead to some inaccuracy in the results, so do be careful before using
    them during an attack. It can also lead to results for the other top level domains
    (TLDs), such as .com, .co.uk, and .org, which may otherwise have been missed.
    The general findings are that specifying the full domain returns the most usable
    results, therefore it is recommended that each of the TLDs is manually cycled
    through.
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简洁起见，输出已经被减少，但是theharvester已经非常快速和高效地识别出了12个可以通过搜索引擎收集的电子邮件地址，这些可以在一个项目中使用。需要注意的是，不需要提供域名，只需将公司名称传递给theharvester即可。这可能导致结果的某些不准确性，因此在攻击之前务必小心使用。它还可以导致其他顶级域名（TLDs）的结果，例如.com，.co.uk和.org，否则可能会被忽略。一般的发现是指定完整的域返回最可用的结果，因此建议手动循环遍历每个TLD。
- en: As with Metagoofil, which was covered earlier, an output of the results to an
    HTML file is possible for easier viewing ([Figure 8.19](#F0100)).
  id: totrans-451
  prefs: []
  type: TYPE_NORMAL
  zh: 与早期涵盖的Metagoofil一样，可以将结果输出到HTML文件以便更容易查看（[图8.19](#F0100)）。
- en: '![image](../images/F000089f08-19-9780124201248.jpg)'
  id: totrans-452
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-19-9780124201248.jpg)'
- en: Figure 8.19 theharvester results.
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.19 theharvester的结果。
- en: '[PRE153]'
  id: totrans-454
  prefs: []
  type: TYPE_PRE
  zh: '[PRE153]'
- en: Having established the naming convention for the target domain’s e-mail addresses,
    LinkedIn can be harvested to create more. Again, theharvester provides the functionality.
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: 已经建立了目标域的电子邮件地址的命名约定，LinkedIn可以被收集以创建更多的地址。同样，theharvester提供了这个功能。
- en: '[PRE154]'
  id: totrans-456
  prefs: []
  type: TYPE_PRE
  zh: '[PRE154]'
- en: '[PRE155]'
  id: totrans-457
  prefs: []
  type: TYPE_PRE
  zh: '[PRE155]'
- en: '[PRE156]'
  id: totrans-458
  prefs: []
  type: TYPE_PRE
  zh: '[PRE156]'
- en: '[PRE157]'
  id: totrans-459
  prefs: []
  type: TYPE_PRE
  zh: '[PRE157]'
- en: '[PRE158]'
  id: totrans-460
  prefs: []
  type: TYPE_PRE
  zh: '[PRE158]'
- en: '[PRE159]'
  id: totrans-461
  prefs: []
  type: TYPE_PRE
  zh: '[PRE159]'
- en: '[PRE160]'
  id: totrans-462
  prefs: []
  type: TYPE_PRE
  zh: '[PRE160]'
- en: '[PRE161]'
  id: totrans-463
  prefs: []
  type: TYPE_PRE
  zh: '[PRE161]'
- en: '[PRE162]'
  id: totrans-464
  prefs: []
  type: TYPE_PRE
  zh: '[PRE162]'
- en: '[PRE163]'
  id: totrans-465
  prefs: []
  type: TYPE_PRE
  zh: '[PRE163]'
- en: '[PRE164]'
  id: totrans-466
  prefs: []
  type: TYPE_PRE
  zh: '[PRE164]'
- en: '[PRE165]'
  id: totrans-467
  prefs: []
  type: TYPE_PRE
  zh: '[PRE165]'
- en: '[PRE166]'
  id: totrans-468
  prefs: []
  type: TYPE_PRE
  zh: '[PRE166]'
- en: '[PRE167]'
  id: totrans-469
  prefs: []
  type: TYPE_PRE
  zh: '[PRE167]'
- en: '[PRE168]'
  id: totrans-470
  prefs: []
  type: TYPE_PRE
  zh: '[PRE168]'
- en: '[PRE169]'
  id: totrans-471
  prefs: []
  type: TYPE_PRE
  zh: '[PRE169]'
- en: '[PRE170]'
  id: totrans-472
  prefs: []
  type: TYPE_PRE
  zh: '[PRE170]'
- en: '[PRE171]'
  id: totrans-473
  prefs: []
  type: TYPE_PRE
  zh: '[PRE171]'
- en: '[PRE172]'
  id: totrans-474
  prefs: []
  type: TYPE_PRE
  zh: '[PRE172]'
- en: '[PRE173]'
  id: totrans-475
  prefs: []
  type: TYPE_PRE
  zh: '[PRE173]'
- en: '[PRE174]'
  id: totrans-476
  prefs: []
  type: TYPE_PRE
  zh: '[PRE174]'
- en: '[PRE175]'
  id: totrans-477
  prefs: []
  type: TYPE_PRE
  zh: '[PRE175]'
- en: '[PRE176]'
  id: totrans-478
  prefs: []
  type: TYPE_PRE
  zh: '[PRE176]'
- en: '[PRE177]'
  id: totrans-479
  prefs: []
  type: TYPE_PRE
  zh: '[PRE177]'
- en: '[PRE178]'
  id: totrans-480
  prefs: []
  type: TYPE_PRE
  zh: '[PRE178]'
- en: '[PRE179]'
  id: totrans-481
  prefs: []
  type: TYPE_PRE
  zh: '[PRE179]'
- en: Obviously there is a need to manipulate this list slightly to get the right
    output, but the size of the attack surface is increasing every minute.
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，有必要稍微操纵一下这个列表才能得到正确的输出，但攻击面的大小每一分钟都在增加。
- en: theharvester discovers more than we will cover at this point although I do encourage
    you to try it for yourself. All of the functionality is very self-explanatory
    and accessible.
  id: totrans-483
  prefs: []
  type: TYPE_NORMAL
  zh: theharvester发现的内容比我们在这一点上将要涵盖的要多，尽管我鼓励您自己尝试。所有功能都非常自说明和易于访问。
- en: FOCA
  id: totrans-484
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: FOCA
- en: FOCA has already been touched upon when looking specifically at document metadata,
    so this will be kept brief. During that topic, it was seen that an e-mail address
    could be retrieved from within documents. These could also be exported to a text
    file so that the output of all tools could be combined. It is a good policy to
    use several tools to obtain any intelligence to ensure complete coverage. Good
    social engineers are always on the lookout for new ways to harvest open-source
    intelligence, so it is important that the output of each tool is manipulated and
    built into a master list of intelligence.
  id: totrans-485
  prefs: []
  type: TYPE_NORMAL
  zh: FOCA已经在专门查看文档元数据时有所涉及，因此这部分将简要说明。在那个主题中，可以从文档中检索到电子邮件地址。这些也可以导出到文本文件中，以便将所有工具的输出合并。使用几种工具获取情报是一个好策略，以确保完整覆盖。优秀的社会工程师总是在寻找收集开源情报的新方法，因此重要的是每个工具的输出都被操纵并构建成一个情报的主列表。
- en: Metagoofil
  id: totrans-486
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Metagoofil
- en: 'As with FOCA, the basics of using Metagoofil have already been covered. Metagoofil
    will strip the e-mail addresses out of document metadata and print them to screen
    in a usable format. As always, it is highly recommended that intelligence is gained
    from as many different sources as is possible, storing them in a master list of
    information. As a quick refresher, the command should look something like this:'
  id: totrans-487
  prefs: []
  type: TYPE_NORMAL
  zh: 与FOCA一样，已经涵盖了使用Metagoofil的基础知识。Metagoofil将从文档元数据中剥离电子邮件地址，并以可用格式打印到屏幕上。像往常一样，强烈建议从尽可能多的不同来源获得情报，并将它们存储在信息的主列表中。作为一个快速的提醒，命令应该看起来像这样：
- en: '[PRE180]'
  id: totrans-488
  prefs: []
  type: TYPE_PRE
  zh: '[PRE180]'
- en: Don’t forget that more than just .doc and .pdf can be chosen. It is always worth
    checking for other document types, as it is never known what interesting pieces
    of information may be discovered.
  id: totrans-489
  prefs: []
  type: TYPE_NORMAL
  zh: 不要忘记可以选择除了.doc和.pdf以外的其他文件类型。检查其他文档类型总是值得的，因为永远不知道可能会发现什么有趣的信息。
- en: Whois
  id: totrans-490
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Whois
- en: 'Whois records can often have the administrative, technical, and registrant
    contacts attached. Each of these records can contain e-mail addresses which can
    be added to our list. Whois commands can be run from a linux command line with
    ease:'
  id: totrans-491
  prefs: []
  type: TYPE_NORMAL
  zh: Whois记录通常附有行政、技术和注册联系人。每个记录都可能包含电子邮件地址，可以添加到我们的列表中。Whois命令可以在Linux命令行中轻松运行：
- en: '[PRE181]'
  id: totrans-492
  prefs: []
  type: TYPE_PRE
  zh: '[PRE181]'
- en: '[PRE182]'
  id: totrans-493
  prefs: []
  type: TYPE_PRE
  zh: '[PRE182]'
- en: '[PRE183]'
  id: totrans-494
  prefs: []
  type: TYPE_PRE
  zh: '[PRE183]'
- en: '[PRE184]'
  id: totrans-495
  prefs: []
  type: TYPE_PRE
  zh: '[PRE184]'
- en: '[PRE185]'
  id: totrans-496
  prefs: []
  type: TYPE_PRE
  zh: '[PRE185]'
- en: '[PRE186]'
  id: totrans-497
  prefs: []
  type: TYPE_PRE
  zh: '[PRE186]'
- en: '[PRE187]'
  id: totrans-498
  prefs: []
  type: TYPE_PRE
  zh: '[PRE187]'
- en: '[PRE188]'
  id: totrans-499
  prefs: []
  type: TYPE_PRE
  zh: '[PRE188]'
- en: The output has been shortened for brevity, but it provides an idea of the final
    product. It is quite common to have these records removed or sanitized to avoid
    information disclosure, but it should still be checking during each engagement.
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简洁起见，输出已经被缩短了，但它提供了最终产品的一个想法。通常会删除或清理这些记录以避免信息泄露，但在每次参与中仍应进行检查。
- en: Sam Spade
  id: totrans-501
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Sam Spade
- en: Sam Spade is a free Windows utility that can be used for a multitude of reconnaissance
    exercises. Although it may not be the latest and greatest, in fact it’s been around
    for about as long as I can remember, it still has some nice features that can
    be added to any reconnaissance effort.
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
  zh: Sam Spade 是一个免费的 Windows 实用程序，可用于多种侦察练习。虽然它可能不是最新最好的，实际上它已经存在了我记忆中的时间，但它仍具有一些可以添加到任何侦察工作中的不错功能。
- en: 'Unfortunately the official website [http://www.samspade.org](http://www.samspade.org)
    is down at the time of writing with no signs of ever being reinstated. Luckily,
    there are plenty of places still hosting the installer around the web, therefore
    try the following link in the meantime:'
  id: totrans-503
  prefs: []
  type: TYPE_NORMAL
  zh: 不幸的是，官方网站 [http://www.samspade.org](http://www.samspade.org) 在撰写时已经关闭，没有恢复的迹象。幸运的是，在网络上仍有许多地方提供安装程序，因此可以尝试以下链接：
- en: '[http://www.majorgeeks.com/files/details/sam_spade.html](http://www.majorgeeks.com/files/details/sam_spade.html).'
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.majorgeeks.com/files/details/sam_spade.html](http://www.majorgeeks.com/files/details/sam_spade.html).'
- en: Sam Spade is more of a toolkit rather than just a one trick pony. It covers
    everything from DNS enumeration to website crawling, and for this exercise it
    is the latter that is of interest.
  id: totrans-505
  prefs: []
  type: TYPE_NORMAL
  zh: Sam Spade 更像是一个工具包，而不仅仅是一个单一的技巧。它涵盖了从 DNS 枚举到网站爬行的所有内容，对于这个练习来说，后者是感兴趣的。
- en: Several options are available when crawling a website, one of which is to search
    for e-mail addresses and present them in the output. Mirroring the site to a local
    directory for further investigations or even to clone sites for phishing attacks
    is a viable option ([Figure 8.20](#F0105)).
  id: totrans-506
  prefs: []
  type: TYPE_NORMAL
  zh: 当爬取网站时有几种选项可用，其中之一是搜索电子邮件地址并将其呈现在输出中。将网站镜像到本地目录进行进一步调查，甚至克隆网站进行钓鱼攻击都是可行的选项（参见[图
    8.20](#F0105)）。
- en: '![image](../images/F000089f08-20-9780124201248.jpg)'
  id: totrans-507
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-20-9780124201248.jpg)'
- en: Figure 8.20 Sam Spade.
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.20 Sam Spade。
- en: Because Sam Spade has been around so long, most people don’t think it has a
    lot of relevance any more, but it is another useful tool in the box. Sure there
    are other ways to get the same functionality, but having options is always useful.
  id: totrans-509
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Sam Spade 已经存在了很长时间，大多数人认为它不再具有太多相关性，但它仍然是工具箱中的另一个有用工具。当然，有其他方法可以获得相同的功能，但拥有选择总是有用的。
- en: Jigsaw
  id: totrans-510
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 锯齿
- en: Recently acquired by salesforce, Jigsaw is a contact management site that was
    initially crowd sourced. While full access to the site is not free, the level
    of information available is vast.
  id: totrans-511
  prefs: []
  type: TYPE_NORMAL
  zh: 最近被 Salesforce 收购的 Jigsaw 是一个最初以众包方式进行的联系管理网站。虽然网站的完整访问并非免费，但提供的信息量是巨大的。
- en: A search for Syngress brings back 341 contact records, which include names and
    positions. By drilling down into each record, individual e-mail addresses and
    phone numbers can be retrieved. Drilling down into each contact costs points,
    which can be paid for, but in reality all that is really needed is one e-mail
    address to then build a list based on its convention. Given that some credits
    are available for free, it is possible to play around to get the e-mail addresses
    needed. This is because viewing the names of each employee is not only free, but
    presented in a list for easy manipulation ([Figure 8.21](#F0110)).
  id: totrans-512
  prefs: []
  type: TYPE_NORMAL
  zh: 对 Syngress 的搜索返回了 341 条联系记录，其中包括姓名和职位。通过深入了解每条记录，可以检索到单个电子邮件地址和电话号码。深入了解每个联系人都需要消耗点数，可以支付，但实际上真正需要的只是一个电子邮件地址，然后可以根据其约定构建列表。由于一些积分可免费获得，因此可以尝试获取所需的电子邮件地址。这是因为查看每个员工的姓名不仅是免费的，而且以列表形式呈现，易于操作（参见[图
    8.21](#F0110)）。
- en: '![image](../images/F000089f08-21-9780124201248.jpg)'
  id: totrans-513
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-21-9780124201248.jpg)'
- en: Figure 8.21 Jigsaw results.
  id: totrans-514
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.21 锯齿结果。
- en: The format above will literally copy and paste straight into Excel or a tool
    of choice for manipulation elsewhere—cat, sed, awk, etc. So if we take the first
    contact on the list and drill down, an e-mail address format can be grabbed ([Figure
    8.22](#F0115)).
  id: totrans-515
  prefs: []
  type: TYPE_NORMAL
  zh: 上述格式可以直接复制粘贴到 Excel 或其他工具中进行其他处理，例如 cat、sed、awk 等。因此，如果我们选取列表中的第一个联系人并深入了解，就可以获取电子邮件地址格式（参见[图
    8.22](#F0115)）。
- en: '![image](../images/F000089f08-22-9780124201248.jpg)'
  id: totrans-516
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-22-9780124201248.jpg)'
- en: Figure 8.22 Jigsaw results.
  id: totrans-517
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.22 锯齿结果。
- en: Now that we know the convention is firstname.lastname we can build an e-mail
    address list for further attacks. I copied the above into Excel and then the name
    column out into a text file called “emailsort.txt” for further editing. Following
    which, “awk” is then used to chop things around a little from the command line.
  id: totrans-518
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道约定是名字.姓氏，我们可以为进一步的攻击构建电子邮件地址列表。我将上述内容复制到Excel中，然后将名字列导出到名为“emailsort.txt”的文本文件中以进行进一步编辑。之后，通过命令行使用“awk”对其进行一些调整。
- en: '[PRE189]'
  id: totrans-519
  prefs: []
  type: TYPE_PRE
  zh: '[PRE189]'
- en: '[PRE190]'
  id: totrans-520
  prefs: []
  type: TYPE_PRE
  zh: '[PRE190]'
- en: '[PRE191]'
  id: totrans-521
  prefs: []
  type: TYPE_PRE
  zh: '[PRE191]'
- en: '[PRE192]'
  id: totrans-522
  prefs: []
  type: TYPE_PRE
  zh: '[PRE192]'
- en: '[PRE193]'
  id: totrans-523
  prefs: []
  type: TYPE_PRE
  zh: '[PRE193]'
- en: '[PRE194]'
  id: totrans-524
  prefs: []
  type: TYPE_PRE
  zh: '[PRE194]'
- en: '[PRE195]'
  id: totrans-525
  prefs: []
  type: TYPE_PRE
  zh: '[PRE195]'
- en: '[PRE196]'
  id: totrans-526
  prefs: []
  type: TYPE_PRE
  zh: '[PRE196]'
- en: '[PRE197]'
  id: totrans-527
  prefs: []
  type: TYPE_PRE
  zh: '[PRE197]'
- en: '[PRE198]'
  id: totrans-528
  prefs: []
  type: TYPE_PRE
  zh: '[PRE198]'
- en: '[PRE199]'
  id: totrans-529
  prefs: []
  type: TYPE_PRE
  zh: '[PRE199]'
- en: '[PRE200]'
  id: totrans-530
  prefs: []
  type: TYPE_PRE
  zh: '[PRE200]'
- en: '[PRE201]'
  id: totrans-531
  prefs: []
  type: TYPE_PRE
  zh: '[PRE201]'
- en: '[PRE202]'
  id: totrans-532
  prefs: []
  type: TYPE_PRE
  zh: '[PRE202]'
- en: '[PRE203]'
  id: totrans-533
  prefs: []
  type: TYPE_PRE
  zh: '[PRE203]'
- en: '[PRE204]'
  id: totrans-534
  prefs: []
  type: TYPE_PRE
  zh: '[PRE204]'
- en: '[PRE205]'
  id: totrans-535
  prefs: []
  type: TYPE_PRE
  zh: '[PRE205]'
- en: '[PRE206]'
  id: totrans-536
  prefs: []
  type: TYPE_PRE
  zh: '[PRE206]'
- en: '[PRE207]'
  id: totrans-537
  prefs: []
  type: TYPE_PRE
  zh: '[PRE207]'
- en: '[PRE208]'
  id: totrans-538
  prefs: []
  type: TYPE_PRE
  zh: '[PRE208]'
- en: '[PRE209]'
  id: totrans-539
  prefs: []
  type: TYPE_PRE
  zh: '[PRE209]'
- en: What I did here is read the file which contained lastname.firstname format users,
    and swapped those values around with awk so that the first name came first. I
    then used “sed” to add the “@elsevier.com” to the end of each line. If you weren’t
    happy that the list did not contain duplicates, you could go further by sorting
    for uniques with “sort -u.” You could very easily achieve the same results by
    using Excel by importing the lastname.firstname text file using a comma as the
    delimiter, swapping the fields around and using concatenate to add in the @elsevier.com.
  id: totrans-540
  prefs: []
  type: TYPE_NORMAL
  zh: 我在这里所做的是读取包含姓氏.名字格式用户的文件，并用awk交换这些值，使名字首先出现。然后我使用“sed”将“@elsevier.com”添加到每行的末尾。如果你不满意列表不包含重复项，你可以进一步通过“sort
    -u”对唯一性进行排序。你也可以通过使用Excel来实现相同的结果，方法是使用逗号作为分隔符导入姓氏.名字文本文件，交换字段并使用concatenate添加@elsevier.com。
- en: Recon-ng—[https://bitbucket.org/LaNMaSteR53/recon-ng](https://bitbucket.org/LaNMaSteR53/recon-ng)—also
    includes a handful of Jigsaw modules
  id: totrans-541
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: Recon-ng—[https://bitbucket.org/LaNMaSteR53/recon-ng](https://bitbucket.org/LaNMaSteR53/recon-ng)—还包括一些Jigsaw模块
- en: The “recon/contacts/gather/http/web/jigsaw” module only needs to be given a
    company name to work its magic. It will pull each contact record and add them
    to its database for your use.
  id: totrans-542
  prefs: []
  type: TYPE_NORMAL
  zh: “recon/contacts/gather/http/web/jigsaw”模块只需提供一个公司名称即可发挥其魔力。它将获取每个联系人记录并将其添加到其数据库供您使用。
- en: '[PRE210]'
  id: totrans-543
  prefs: []
  type: TYPE_PRE
  zh: '[PRE210]'
- en: '[PRE211]'
  id: totrans-544
  prefs: []
  type: TYPE_PRE
  zh: '[PRE211]'
- en: '[PRE212]'
  id: totrans-545
  prefs: []
  type: TYPE_PRE
  zh: '[PRE212]'
- en: '[PRE213]'
  id: totrans-546
  prefs: []
  type: TYPE_PRE
  zh: '[PRE213]'
- en: '[PRE214]'
  id: totrans-547
  prefs: []
  type: TYPE_PRE
  zh: '[PRE214]'
- en: '[PRE215]'
  id: totrans-548
  prefs: []
  type: TYPE_PRE
  zh: '[PRE215]'
- en: '[PRE216]'
  id: totrans-549
  prefs: []
  type: TYPE_PRE
  zh: '[PRE216]'
- en: '[PRE217]'
  id: totrans-550
  prefs: []
  type: TYPE_PRE
  zh: '[PRE217]'
- en: '[PRE218]'
  id: totrans-551
  prefs: []
  type: TYPE_PRE
  zh: '[PRE218]'
- en: '[PRE219]'
  id: totrans-552
  prefs: []
  type: TYPE_PRE
  zh: '[PRE219]'
- en: '[PRE220]'
  id: totrans-553
  prefs: []
  type: TYPE_PRE
  zh: '[PRE220]'
- en: '[PRE221]'
  id: totrans-554
  prefs: []
  type: TYPE_PRE
  zh: '[PRE221]'
- en: '[PRE222]'
  id: totrans-555
  prefs: []
  type: TYPE_PRE
  zh: '[PRE222]'
- en: '[PRE223]'
  id: totrans-556
  prefs: []
  type: TYPE_PRE
  zh: '[PRE223]'
- en: '[PRE224]'
  id: totrans-557
  prefs: []
  type: TYPE_PRE
  zh: '[PRE224]'
- en: '[PRE225]'
  id: totrans-558
  prefs: []
  type: TYPE_PRE
  zh: '[PRE225]'
- en: '[PRE226]'
  id: totrans-559
  prefs: []
  type: TYPE_PRE
  zh: '[PRE226]'
- en: '[PRE227]'
  id: totrans-560
  prefs: []
  type: TYPE_PRE
  zh: '[PRE227]'
- en: The contacts can be copied from the database and you can start building a list
    of potential e-mail addresses from it based on the earlier examples.
  id: totrans-561
  prefs: []
  type: TYPE_NORMAL
  zh: 联系人可以从数据库中复制，你可以根据先前的示例开始构建潜在电子邮件地址列表。
- en: As has been seen in this section, there are a multitude of techniques that can
    be used to exploit the gathering or guessing of e-mail addresses. Next comes the
    use of social media and how this can be leveraged in social engineering engagements.
  id: totrans-562
  prefs: []
  type: TYPE_NORMAL
  zh: 正如在本节中所见，有许多技术可以用来利用收集或猜测电子邮件地址。接下来是社交媒体的使用以及如何在社会工程活动中利用它。
- en: Social media
  id: totrans-563
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 社交媒体
- en: Social networking sites have always been a gold mine of information for social
    engineers. People upload their entire lives to sites such as Facebook without
    giving a second thought to their privacy.
  id: totrans-564
  prefs: []
  type: TYPE_NORMAL
  zh: 社交网络网站一直是社会工程师获取信息的金矿。人们在诸如Facebook之类的网站上上传了他们的整个生活，而不会考虑他们的隐私。
- en: According to Mark Zuckerberg, founder of Facebook, the age of privacy is over.
    But of course he would say that. As far as he is concerned, the more information
    he has about you, the better. Why? Because it enables Facebook to commoditize
    you more efficiently. They can deliver adverts in a more targeted fashion and
    ensure that click through rates are as high as possible. This is of course making
    the assumption that targeted advertising is the limit of Facebook’s intentions.
  id: totrans-565
  prefs: []
  type: TYPE_NORMAL
  zh: 根据Facebook创始人马克·扎克伯格的说法，隐私的时代已经结束了。但他当然会这么说。在他看来，对你了解得越多，越好。为什么？因为这能让Facebook更有效地将你商品化。他们可以以更有针对性的方式提供广告，并确保点击率尽可能高。当然，这是基于有针对性广告是Facebook意图的极限的假设。
- en: The more social networking has become a part of everyday life, the more it has
    come under scrutiny in the news media. Privacy has been an on-going concern with
    major changes to the way that social networks operate to account for this. It
    has been interesting to see the impact of these mainstream news articles. The
    vast majority of people who use sites such as Facebook are far more aware of privacy
    issues now than they ever were. This proves that if awareness exercises are delivered
    in the right way, and are relevant to the recipient, they can be very effective
    indeed.
  id: totrans-566
  prefs: []
  type: TYPE_NORMAL
  zh: 随着社交网络成为日常生活的一部分，它越来越受到新闻媒体的关注。隐私一直是一个持续关注的问题，社交网络的运作方式发生了重大变化以解决这个问题。看到这些主流新闻文章的影响是很有趣的。使用Facebook等网站的绝大多数人现在比以往任何时候都更加关注隐私问题。这证明了如果以正确的方式传递意识练习，并且与接收者相关，它们确实可以非常有效。
- en: Given that social network sites have tightened up their game, can social engineers
    still exploit them? To answer this, we will look at some of the more popular social
    media sites and identify any useful intelligence.
  id: totrans-567
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于社交网络站点已经加强了他们的游戏，社会工程师还能够利用它们吗？为了回答这个问题，我们将查看一些更受欢迎的社交媒体网站，并确定任何有用的情报。
- en: LinkedIn
  id: totrans-568
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: LinkedIn
- en: LinkedIn is basically the corporate world’s equivalent of Facebook. It is an
    online networking application that allows people to connect with others throughout
    various industries. Most people reading this will already have an account and
    some sort of profile on the site.
  id: totrans-569
  prefs: []
  type: TYPE_NORMAL
  zh: LinkedIn 基本上是企业界的 Facebook 等同物。它是一个在线社交应用程序，允许人们在各个行业之间建立联系。阅读本文的大多数人可能已经有了账户，并在该网站上建立了某种类型的个人资料。
- en: The bulk of the useful information needed relates to profiles. A LinkedIn profile
    is in essence an online CV. People add their employment history, skills and specializations,
    photograph, and references. It is also possible to endorse people for their specific
    skill set.
  id: totrans-570
  prefs: []
  type: TYPE_NORMAL
  zh: 所需的大部分有用信息与个人资料相关。LinkedIn 个人资料本质上是在线简历。人们会添加他们的工作经历、技能和专业知识、照片和参考资料。还可以为他们的特定技能背书。
- en: Basically, LinkedIn is a gold mine of information for anyone trying to track
    somebody or somebody’s skill set down. For this reason, LinkedIn is exceptionally
    popular in sales and recruitment environments. It is this level of employee information
    that makes LinkedIn priceless to social engineers.
  id: totrans-571
  prefs: []
  type: TYPE_NORMAL
  zh: 基本上，LinkedIn 对于试图追踪某人或某人的技能集的任何人来说都是信息的宝库。因此，LinkedIn 在销售和招聘环境中异常受欢迎。正是这种员工信息的丰富性使得
    LinkedIn 对社会工程师来说价值连城。
- en: What is often found is that an organization will manage their own group on LinkedIn.
    What is great about this functionality is that it provides us with a ready-made
    list of employees with their entire history. If a social engineer is seeking to
    impersonate a member of staff, this level of intelligence is going to prove useful.
    As already touched upon earlier, it can also be useful for building lists of e-mail
    addresses, assuming that the convention has already been discovered for the addresses.
    In other words, it expands the scope or attack surface.
  id: totrans-572
  prefs: []
  type: TYPE_NORMAL
  zh: 经常发现的情况是一个组织会在 LinkedIn 上管理他们自己的小组。这个功能的好处在于它为我们提供了一个现成的员工列表，包括他们的整个历史。如果社会工程师试图冒充一名员工，这种情报水平将会非常有用。正如之前已经提到的，假设已经发现了地址的约定，这也可以用于构建电子邮件地址列表。换句话说，它扩大了攻击面。
- en: It is worth noting at this point that LinkedIn is not free. It is also not anonymous.
    When viewing people’s profiles, they may know that this has been done. For this
    reason, it is beneficial to sign up for the pro version, avoiding using individual
    profiles and changing the settings control panel in the “What others see when
    you view their profile” option, clicking the radio button for “*You will be totally
    anonymous.*”
  id: totrans-573
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，LinkedIn 不是免费的。它也不是匿名的。当查看他人的个人资料时，他们可能会知道这已经被做过。因此，注册专业版，避免使用个人资料，并在“他人查看您的个人资料时看到的内容”选项中更改设置控制面板，选择“*您将完全匿名*”的单选按钮是有益的。
- en: There is one limitation in the free version of LinkedIn that can be bypassed
    in any case. For example, search for an organization name, it will reveal a list
    of employees. What it doesn’t do is reveal the full name of each person. Typically,
    the first page of results will have a full name, and the rest will be the first
    name and last initial.
  id: totrans-574
  prefs: []
  type: TYPE_NORMAL
  zh: 在 LinkedIn 的免费版本中有一个限制，但在任何情况下都可以绕过。例如，搜索一个组织名称，它会显示一个员工列表。但它不会显示每个人的全名。通常，结果的第一页会显示全名，其余的会显示名字和姓氏的首字母。
- en: Syngress was searched for, as a business, and then we selected Elsevier, their
    parent organization. On the first page of results, the name “Steve.E” was discovered.
    By clicking on the profile, it states “*upgrade for full name.*” The preferred
    option would be to have it for free. Simply select everything to the right of
    the picture, job title and below, and copy and paste it into Google ([Figure 8.23](#F0120)).
  id: totrans-575
  prefs: []
  type: TYPE_NORMAL
  zh: 搜索了 Syngress 作为一家企业，然后我们选择了他们的母公司 Elsevier。在结果的第一页中，发现了“Steve.E”的姓名。通过点击个人资料，它表示“*升级以获取全名*”。最好的选择是免费获取。只需选择图片右侧、职位标题下的所有内容，然后将其复制并粘贴到
    Google 中（参见[图 8.23](#F0120)）。
- en: '![image](../images/F000089f08-23-9780124201248.jpg)'
  id: totrans-576
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-23-9780124201248.jpg)'
- en: Figure 8.23 LinkedIn reconnaissance.
  id: totrans-577
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.23 LinkedIn 侦察。
- en: Perhaps the general belief would be that this wouldn’t work, but the second
    hit was exactly what is needed. Clicking it reveals the full name of the employee,
    allowing them to be added to the list of targets or to use as a name drop during
    a call ([Figure 8.24](#F0125)).
  id: totrans-578
  prefs: []
  type: TYPE_NORMAL
  zh: 或许一般的信念是这不会起作用，但第二个命中正是所需的。点击它会显示员工的全名，从而可以将其添加到目标列表中或在电话中使用名字（参见[图 8.24](#F0125)）。
- en: '![image](../images/F000089f08-24-9780124201248.jpg)'
  id: totrans-579
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-24-9780124201248.jpg)'
- en: Figure 8.24 LinkedIn details revealed.
  id: totrans-580
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.24 LinkedIn 详细信息显示。
- en: It was actually one of our sales guys that showed me this hack, and I was blown
    away not only by its simplicity, but again by the devious nature of our sales
    team.
  id: totrans-581
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上是我们销售人员向我展示了这个黑客技巧，我被它的简单性所震惊，也被我们销售团队的狡猾本质所震惊。
- en: We already covered a tool that can harvest information from LinkedIn, the immeasurably
    useful “theharvester”.
  id: totrans-582
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经介绍了一个可以从 LinkedIn 收集信息的工具，即无法估量地有用的“theharvester”。
- en: '[PRE228]'
  id: totrans-583
  prefs: []
  type: TYPE_PRE
  zh: '[PRE228]'
- en: The output provided will need to be manually ratified before it can be used
    in an engagement. theharvester will pick up on past employees of an organization
    as well as current.
  id: totrans-584
  prefs: []
  type: TYPE_NORMAL
  zh: 提供的输出需要在使用之前手动批准。theharvester 将会捕获组织内的过去员工以及现在的员工。
- en: Recon-ng—[https://bitbucket.org/LaNMaSteR53/recon-ng](https://bitbucket.org/LaNMaSteR53/recon-ng)
  id: totrans-585
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Recon-ng—[https://bitbucket.org/LaNMaSteR53/recon-ng](https://bitbucket.org/LaNMaSteR53/recon-ng)
- en: Recon-ng is a reconnaissance framework for social engineers and penetration
    testers. It ships with Kali Linux, so you can just launch it by typing “recon-ng”
    from a command shell. I would recommend getting the latest version with “git clone—[https://bitbucket.org/LaNMaSteR53/recon-ng.git](https://bitbucket.org/LaNMaSteR53/recon-ng.git).”
    You can then run ./recon-ng.py to get up and running. If you are familiar with
    Metasploit, then this will feel familiar. Navigation is very similar, as is the
    setup of each module.
  id: totrans-586
  prefs: []
  type: TYPE_NORMAL
  zh: Recon-ng 是针对社交工程师和渗透测试人员的侦察框架。它随 Kali Linux 一起提供，因此您只需在命令 shell 中键入“recon-ng”即可启动它。我建议您使用“git
    clone—[https://bitbucket.org/LaNMaSteR53/recon-ng.git](https://bitbucket.org/LaNMaSteR53/recon-ng.git)”获取最新版本。然后您可以运行
    ./recon-ng.py 来启动和运行它。如果您熟悉 Metasploit，那么这会感觉很熟悉。导航非常类似，每个模块的设置也是如此。
- en: The linkedin_auth module relies on both a user account on LinkedIn and an API
    key to harvest contact details. Once you have configured this you simply set the
    target company name and run the module ([Figure 8.25](#F0130)).
  id: totrans-587
  prefs: []
  type: TYPE_NORMAL
  zh: linkedin_auth 模块依赖于 LinkedIn 上的用户帐户和 API 密钥来收集联系人详情。一旦配置好了，你只需设置目标公司名称并运行该模块（参见[图
    8.25](#F0130)）。
- en: '![image](../images/F000089f08-25-9780124201248.jpg)'
  id: totrans-588
  prefs: []
  type: TYPE_IMG
  zh: '![image](../images/F000089f08-25-9780124201248.jpg)'
- en: Figure 8.25 Recon-ng output.
  id: totrans-589
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.25 Recon-ng 输出。
- en: Setting this up is quite simple. Sign up for a developer API key, and then assign
    the key to recon-ng with the “keys add” command. Recon-ng will provide guidance
    through the rest of the setup.
  id: totrans-590
  prefs: []
  type: TYPE_NORMAL
  zh: 设置这个非常简单。注册开发者 API 密钥，然后用“keys add”命令将密钥分配给 recon-ng。 Recon-ng 将指导您完成其余的设置。
- en: There are more long-game approaches when it comes to the use of LinkedIn. For
    example, setting up fake profiles and networking with the target employees. While
    this angle can yield results, it is beyond the scope of this section.
  id: totrans-591
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用 LinkedIn 时还有更长远的方法。例如，建立假档案并与目标员工建立网络联系。虽然这个角度可能会产生结果，但超出了本节的范围。
- en: Facebook
  id: totrans-592
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Facebook
- en: Facebook is without a doubt, the most popular social networking site in existence,
    however this is mainly from a personal usage standpoint. While there are corporate
    presences on Facebook, they are certainly more limited in scope than LinkedIn.
  id: totrans-593
  prefs: []
  type: TYPE_NORMAL
  zh: 毫无疑问，Facebook 是目前存在的最流行的社交网络网站，但这主要是从个人使用的角度来看的。虽然在 Facebook 上有企业存在，但它们的范围肯定比
    LinkedIn 更有限。
- en: There are several areas of potential information gathering that can be exploited.
    First of all, techniques that were documented earlier to harvest any images from
    the corporate profile. In this instance it’s not a case of looking for GPS location
    data, as Facebook strips this upon upload, but looking for photographs of locations,
    the interior of offices, or employees.
  id: totrans-594
  prefs: []
  type: TYPE_NORMAL
  zh: 有几个潜在的信息收集领域可以利用。首先，之前记录的技术可以收集公司资料中的任何图片。在这种情况下，不是在寻找 GPS 位置数据，因为 Facebook
    在上传时会删除这些数据，而是在寻找位置的照片、办公室内部或员工的照片。
- en: Another avenue of approach is to look at comments on any posts, see if these
    can be linked to the accounts to employees of the target.
  id: totrans-595
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种途径是查看任何帖子上的评论，看看这些评论是否可以与目标的员工帐户联系起来。
- en: One of the more powerful tools available to a social engineer is Graph Search.
    This Facebook functionality allows the ability to craft search terms, relating
    to anything that has been touched by a Facebook user. The possibilities are nearly
    endless, but obviously require the target(s) to have profiles that allow some
    level of access. Let’s take a quick look at some useful terms and see what the
    fallout is.
  id: totrans-596
  prefs: []
  type: TYPE_NORMAL
  zh: 对于社会工程师来说，其中一种更强大的工具是图搜索。这个 Facebook 功能允许制定搜索词，与任何被 Facebook 用户接触过的东西相关联。可能性几乎无限，但显然需要目标拥有某种程度的访问权限。让我们快速看一下一些有用的术语，并看看结果如何。
- en: “*People who like Microsoft*”—An interesting search term that could identify
    potential partners, employees, or investors. At the very least this can be classed
    as useful information, but with some manual investigation could be a lot more.
    Try it with your employer and see if the results are employees, suffice it to
    say that a good proportion of them will be. Now start digging through profiles
    and looking for useful information. It is recommended to start with the “places”
    functionality. When a user check-in or adds a location to a post, this is where
    it shows up. It is in essence a map of the employees whereabouts and is likely
    to contain corporate locations.
  id: totrans-597
  prefs: []
  type: TYPE_NORMAL
  zh: “*喜欢微软的人*”—一个有趣的搜索词，可以确定潜在的合作伙伴、员工或投资者。至少可以将其归类为有用信息，但通过一些手动调查可能会更多。试试看用你的雇主，看看结果是否是员工，可以肯定其中相当一部分是。现在开始浏览个人资料，寻找有用信息。建议从“地点”功能开始。当用户签到或在帖子中添加位置时，这就会显示出来。从本质上讲，这是员工活动的地图，很可能包含公司的地点。
- en: “*People who work at Microsoft*”—Now things are starting to really get juicy.
    A full list of people can be seen that claim to work for Microsoft including job
    titles. Each of these profiles potentially contains sensitive information that
    could be used in any social engineering engagement.
  id: totrans-598
  prefs: []
  type: TYPE_NORMAL
  zh: “*在微软工作的人*”—现在事情开始变得真正有趣了。可以看到声称在微软工作的所有人的完整列表，包括职称。每个这样的个人资料都可能包含用于任何社会工程活动的敏感信息。
- en: This can also be modified to look at potential ex-employees with “*people who
    worked at Microsoft in 2012.*”
  id: totrans-599
  prefs: []
  type: TYPE_NORMAL
  zh: 这也可以修改为查看潜在的前员工，“*2012 年曾在微软工作的人*”。
- en: “*Photos taken in Redmond, Washington of Microsoft*”—If there is a rough physical
    location, this search can turn up fantastic results. You could go from knowing
    nothing about a target to having a rough layout of the grounds as well as an idea
    of physical security.
  id: totrans-600
  prefs: []
  type: TYPE_NORMAL
  zh: “*在华盛顿雷德蒙德拍摄的微软照片*”—如果有一个大概的实际位置，这个搜索可以得到很棒的结果。你可以从对目标一无所知到对场地的大致布局以及物理安全的概念。
- en: “*Photos of people who work at Microsoft taken in Redmond, Washington*”—This
    would be a useful search term when looking for photos of employees that may contain
    ID badges. Again, the results may also contain useful information on physical
    security.
  id: totrans-601
  prefs: []
  type: TYPE_NORMAL
  zh: “*在华盛顿雷德蒙德工作的微软员工拍摄的照片*”—这将是一个有用的搜索词，当寻找可能包含工作证的员工照片时。同样，结果可能还包含有关物理安全的有用信息。
- en: “*Places in Washington, District of Columbia Microsoft employees visited*”—This
    is an interesting search term when looking for employee hangouts. The search results
    can be further narrowed down to the exact employees that went to the locations.
    In the results, click the “*Microsoft Employees were here*” button to get a list
    of people. This will automatically populate the search term, for example, “*Microsoft
    employees who visited 9:30 Club.*”
  id: totrans-602
  prefs: []
  type: TYPE_NORMAL
  zh: “*华盛顿哥伦比亚特区微软员工访问过的地方*”—当寻找员工聚会地点时，这是一个有趣的搜索词。搜索结果可以进一步缩小到确切去过这些地点的员工。在结果中，点击“*微软员工曾在此处*”按钮，以获取人员名单。这将自动填充搜索词，例如，“*微软员工曾访问
    9:30 俱乐部*”。
- en: Of course, access can be restricted through the use of the privacy settings
    in an account. A lot of people may not know that this is even possible, let alone
    have taken the time to lock it down. It is akin to having a Google search engine
    for people and their lives.
  id: totrans-603
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，通过帐户的隐私设置可以限制访问。很多人可能不知道这甚至是可能的，更不用说花时间来锁定了。这就像拥有一个人们生活的谷歌搜索引擎一样。
- en: Recon-ng had a module for harvesting sensitive data from Graph Search via the
    API, but the functionality appears to have been removed. I predict a slew of reconnaissance
    tools on the horizon for this functionality.
  id: totrans-604
  prefs: []
  type: TYPE_NORMAL
  zh: Recon-ng 有一个模块，通过 API 从图搜索中收集敏感数据，但该功能似乎已被移除。我预测未来会出现大量的侦察工具，用于此功能。
- en: Let’s have a brief look at Twitter to round up the social networking sites.
  id: totrans-605
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们简要地查看一下 Twitter，以完成社交网络站点的概述。
- en: Twitter
  id: totrans-606
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Twitter
- en: Twitter is another of the more popular social media sites in existence. Unlike
    Facebook or LinkedIn, the concept of a profile within Twitter is very limited.
    You can add a little detail about yourself, but nowhere close to the level of
    LinkedIn or Facebook. This narrows our attack surface to an extent, but Twitter
    can still sometimes be a useful source of intelligence.
  id: totrans-607
  prefs: []
  type: TYPE_NORMAL
  zh: Twitter 是另一个存在的更受欢迎的社交媒体网站。与 Facebook 或 LinkedIn 不同，Twitter 中的个人资料概念非常有限。您可以添加一些关于自己的细节，但远不及
    LinkedIn 或 Facebook 的水平。这在一定程度上缩小了我们的攻击面，但 Twitter 有时仍然可以是一个有用的情报来源。
- en: Twitter are another social media provider that are constantly in the public
    eye, as a result of which they have gradually tightened up security. As an example,
    Exif data is now scrubbed upon upload so we can no longer harvest location data
    from a user’s photos.
  id: totrans-608
  prefs: []
  type: TYPE_NORMAL
  zh: Twitter 是另一个经常受到公众关注的社交媒体提供商，因此他们逐渐加强了安全性。例如，现在在上传时已经清除了 Exif 数据，因此我们无法再从用户的照片中获取位置数据。
- en: Even though things have been locked down to an extent, there are still some
    interesting angles to pursue.
  id: totrans-609
  prefs: []
  type: TYPE_NORMAL
  zh: 即使事情在一定程度上被封锁，仍然有一些有趣的角度可以追求。
- en: Recon-ng
  id: totrans-610
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Recon-ng
- en: Recon-ng steps up the plate again with a useful reconnaissance module. The Twitter
    contact gathering module searches for users who have mentioned the handle you
    provided. This can help to map out potential colleagues for use down the line.
  id: totrans-611
  prefs: []
  type: TYPE_NORMAL
  zh: Recon-ng 再次提供了一个有用的侦察模块。Twitter 联系人收集模块搜索提到您提供的句柄的用户。这可以帮助为将来使用的潜在同事绘制地图。
- en: There is a need to sign up for a Twitter API at [https://dev.twitter.com](https://dev.twitter.com),
    however possessing a Twitter account allows us to sign in using that but there
    is still a requirement to fill out a form stating the intention for the application
    and one or two other details.
  id: totrans-612
  prefs: []
  type: TYPE_NORMAL
  zh: 需要在 [https://dev.twitter.com](https://dev.twitter.com) 注册 Twitter API，但拥有 Twitter
    账户允许我们使用该账户登录，但仍需要填写一个表格说明应用程序的意图和一两个其他细节。
- en: Launching recon-ng is as simple as typing it into a command shell and waiting
    for the console to pop up. Then just choose the module with the “use” command.
  id: totrans-613
  prefs: []
  type: TYPE_NORMAL
  zh: 启动 recon-ng 就像在命令 shell 中输入它并等待控制台弹出一样简单。然后只需使用“use”命令选择模块。
- en: '[PRE229]'
  id: totrans-614
  prefs: []
  type: TYPE_PRE
  zh: '[PRE229]'
- en: '[PRE230]'
  id: totrans-615
  prefs: []
  type: TYPE_PRE
  zh: '[PRE230]'
- en: '[PRE231]'
  id: totrans-616
  prefs: []
  type: TYPE_PRE
  zh: '[PRE231]'
- en: '[PRE232]'
  id: totrans-617
  prefs: []
  type: TYPE_PRE
  zh: '[PRE232]'
- en: '[PRE233]'
  id: totrans-618
  prefs: []
  type: TYPE_PRE
  zh: '[PRE233]'
- en: '[PRE234]'
  id: totrans-619
  prefs: []
  type: TYPE_PRE
  zh: '[PRE234]'
- en: At this point, you can start configuring your api keys with the “keys add” command.
    You will configure both the twitter_api and twitter_secret keys. These are actually
    called the “consumer key” and the “consumer secret” in the Twitter control panel.
  id: totrans-620
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，您可以开始使用“keys add”命令配置您的 API 密钥。您将配置 twitter_api 和 twitter_secret 两个密钥。在
    Twitter 控制面板中，这些实际上被称为“消费者密钥”和“消费者密钥”。
- en: '[PRE235]'
  id: totrans-621
  prefs: []
  type: TYPE_PRE
  zh: '[PRE235]'
- en: '[PRE236]'
  id: totrans-622
  prefs: []
  type: TYPE_PRE
  zh: '[PRE236]'
- en: '[PRE237]'
  id: totrans-623
  prefs: []
  type: TYPE_PRE
  zh: '[PRE237]'
- en: '[PRE238]'
  id: totrans-624
  prefs: []
  type: TYPE_PRE
  zh: '[PRE238]'
- en: Next, just set the handle of choice and run the module
  id: totrans-625
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，只需设置所选的句柄并运行该模块
- en: '[PRE239]'
  id: totrans-626
  prefs: []
  type: TYPE_PRE
  zh: '[PRE239]'
- en: '[PRE240]'
  id: totrans-627
  prefs: []
  type: TYPE_PRE
  zh: '[PRE240]'
- en: '[PRE241]'
  id: totrans-628
  prefs: []
  type: TYPE_PRE
  zh: '[PRE241]'
- en: '[PRE242]'
  id: totrans-629
  prefs: []
  type: TYPE_PRE
  zh: '[PRE242]'
- en: '[PRE243]'
  id: totrans-630
  prefs: []
  type: TYPE_PRE
  zh: '[PRE243]'
- en: '[PRE244]'
  id: totrans-631
  prefs: []
  type: TYPE_PRE
  zh: '[PRE244]'
- en: '[PRE245]'
  id: totrans-632
  prefs: []
  type: TYPE_PRE
  zh: '[PRE245]'
- en: '[PRE246]'
  id: totrans-633
  prefs: []
  type: TYPE_PRE
  zh: '[PRE246]'
- en: '[PRE247]'
  id: totrans-634
  prefs: []
  type: TYPE_PRE
  zh: '[PRE247]'
- en: '[PRE248]'
  id: totrans-635
  prefs: []
  type: TYPE_PRE
  zh: '[PRE248]'
- en: '[PRE249]'
  id: totrans-636
  prefs: []
  type: TYPE_PRE
  zh: '[PRE249]'
- en: The tool should enable the narrowing down of potential colleagues without having
    to manually dig through the target’s Twitter history. Once correlated with data
    from LinkedIn and Facebook, the accuracy of the intelligence should increase exponentially.
  id: totrans-637
  prefs: []
  type: TYPE_NORMAL
  zh: 该工具应该能够在不必手动搜索目标的 Twitter 历史记录的情况下缩小潜在同事的范围。一旦与 LinkedIn 和 Facebook 的数据相关联，情报的准确性应该呈指数增长。
- en: DNS records
  id: totrans-638
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: DNS 记录
- en: Enumerating DNS records can lead to some interesting finds when it comes to
    social engineering and penetration testing. For example, knowing the location
    of an organizations webmail service as well as a username and e-mail address can
    immediately grant you credibility if you call up the help desk. Most first tier
    help desk operators aren’t going to know about subdomain brute forcing and will
    assume that if you know the URL, you are an employee. I have been in situations
    where I have successfully had an employee’s domain password reset over the phone,
    having only these pieces of information.
  id: totrans-639
  prefs: []
  type: TYPE_NORMAL
  zh: 枚举 DNS 记录可能会在社会工程和渗透测试中带来一些有趣的发现。例如，知道组织的网络邮件服务的位置以及用户名和电子邮件地址，如果您打电话给帮助台，立即可以获得可信度。大多数一线帮助台操作员不会了解子域暴力破解，他们会假设如果您知道
    URL，那么您就是员工。我曾经处于这样的情况，仅凭这些信息就成功地通过电话重置了员工的域密码。
- en: From a penetration testing point of view, this information can be used to identify
    key assets that could be leveraged during password attacks. As I have already
    noted, a lot of engagements included elements of social engineering and penetration
    testing.
  id: totrans-640
  prefs: []
  type: TYPE_NORMAL
  zh: 从渗透测试的角度来看，这些信息可以用来识别在密码攻击中可以利用的关键资产。正如我已经指出的，许多项目包括社会工程和渗透测试的元素。
- en: So, given that we have covered how to get the e-mail addresses of employees,
    how do we go about using DNS in an engagement?
  id: totrans-641
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，鉴于我们已经介绍了如何获取员工的电子邮件地址，那么在参与中如何使用 DNS 呢？
- en: Dnsrecon—[https://github.com/darkoperator/dnsrecon](https://github.com/darkoperator/dnsrecon)—Twitter—@Carlos_Perez
  id: totrans-642
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Dnsrecon—[https://github.com/darkoperator/dnsrecon](https://github.com/darkoperator/dnsrecon)—Twitter—@Carlos_Perez
- en: Dnsrecon is my go-to tool when it comes to DNS reconnaissance. It is easy to
    use, fast, and flexible. It ships with Kali and Backtrack, so fire the system
    up and test it as the motions are walked through.
  id: totrans-643
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到DNS侦察时，Dnsrecon是我的首选工具。它易于使用，快速而灵活。它附带了Kali和Backtrack，因此启动系统并按照操作进行测试。
- en: 'Here’s how the standard output looks:'
  id: totrans-644
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是标准输出的方式：
- en: '[PRE250]'
  id: totrans-645
  prefs: []
  type: TYPE_PRE
  zh: '[PRE250]'
- en: '[PRE251]'
  id: totrans-646
  prefs: []
  type: TYPE_PRE
  zh: '[PRE251]'
- en: '[PRE252]'
  id: totrans-647
  prefs: []
  type: TYPE_PRE
  zh: '[PRE252]'
- en: '[PRE253]'
  id: totrans-648
  prefs: []
  type: TYPE_PRE
  zh: '[PRE253]'
- en: '[PRE254]'
  id: totrans-649
  prefs: []
  type: TYPE_PRE
  zh: '[PRE254]'
- en: '[PRE255]'
  id: totrans-650
  prefs: []
  type: TYPE_PRE
  zh: '[PRE255]'
- en: '[PRE256]'
  id: totrans-651
  prefs: []
  type: TYPE_PRE
  zh: '[PRE256]'
- en: '[PRE257]'
  id: totrans-652
  prefs: []
  type: TYPE_PRE
  zh: '[PRE257]'
- en: '[PRE258]'
  id: totrans-653
  prefs: []
  type: TYPE_PRE
  zh: '[PRE258]'
- en: '[PRE259]'
  id: totrans-654
  prefs: []
  type: TYPE_PRE
  zh: '[PRE259]'
- en: '[PRE260]'
  id: totrans-655
  prefs: []
  type: TYPE_PRE
  zh: '[PRE260]'
- en: '[PRE261]'
  id: totrans-656
  prefs: []
  type: TYPE_PRE
  zh: '[PRE261]'
- en: '[PRE262]'
  id: totrans-657
  prefs: []
  type: TYPE_PRE
  zh: '[PRE262]'
- en: '[PRE263]'
  id: totrans-658
  prefs: []
  type: TYPE_PRE
  zh: '[PRE263]'
- en: '[PRE264]'
  id: totrans-659
  prefs: []
  type: TYPE_PRE
  zh: '[PRE264]'
- en: '[PRE265]'
  id: totrans-660
  prefs: []
  type: TYPE_PRE
  zh: '[PRE265]'
- en: '[PRE266]'
  id: totrans-661
  prefs: []
  type: TYPE_PRE
  zh: '[PRE266]'
- en: '[PRE267]'
  id: totrans-662
  prefs: []
  type: TYPE_PRE
  zh: '[PRE267]'
- en: '[PRE268]'
  id: totrans-663
  prefs: []
  type: TYPE_PRE
  zh: '[PRE268]'
- en: '[PRE269]'
  id: totrans-664
  prefs: []
  type: TYPE_PRE
  zh: '[PRE269]'
- en: '[PRE270]'
  id: totrans-665
  prefs: []
  type: TYPE_PRE
  zh: '[PRE270]'
- en: '[PRE271]'
  id: totrans-666
  prefs: []
  type: TYPE_PRE
  zh: '[PRE271]'
- en: Basically, the Start of Authority record has been enumerated and the name servers
    (NS) and Mail Exchange (MX) records recovered. This information could be useful
    in some scenarios but there is nothing particularly exciting here.
  id: totrans-667
  prefs: []
  type: TYPE_NORMAL
  zh: 基本上，开始权威记录已被枚举，并且已恢复名称服务器（NS）和邮件交换（MX）记录。在某些情况下，这些信息可能有用，但这里没有什么特别令人兴奋的。
- en: Subdomain brute forcing
  id: totrans-668
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 子域暴力破解
- en: Brute forcing is a misnomer here, because we are going to use a list, or a dictionary,
    but the principal still stands. Dnsrecon is instructed to use a list of possible
    subdomains, and attempt a name lookup against each. Any that return successfully
    will be printed to screen, granting us insight into the target’s public facing
    footprint. Due to the speed at which these names can be resolved, it is possible
    to get through sizeable lists in very little time. While it is unlikely that any
    disruption to a DNS server will be caused, it is always worth bearing in mind
    the impact that there may be on a system.
  id: totrans-669
  prefs: []
  type: TYPE_NORMAL
  zh: 这里所说的暴力破解是一个误称，因为我们将使用一个列表或字典，但原则仍然适用。Dnsrecon被指示使用可能的子域名列表，并对每个进行名称查找。任何成功返回的都将被打印到屏幕上，为我们提供了有关目标公开面的洞察。由于这些名称可以被解析的速度很快，所以有可能在很短的时间内完成大量列表的处理。虽然不太可能对DNS服务器造成任何干扰，但始终要记住可能对系统造成的影响。
- en: 'Thankfully, dnsrecon ships with a standard name list that can be used to get
    started. Here’s how the command looks to start with:'
  id: totrans-670
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，dnsrecon附带了一个可以用于入门的标准名称列表。以下是开始使用该命令的方式：
- en: '[PRE272]'
  id: totrans-671
  prefs: []
  type: TYPE_PRE
  zh: '[PRE272]'
- en: '[PRE273]'
  id: totrans-672
  prefs: []
  type: TYPE_PRE
  zh: '[PRE273]'
- en: '[PRE274]'
  id: totrans-673
  prefs: []
  type: TYPE_PRE
  zh: '[PRE274]'
- en: '[PRE275]'
  id: totrans-674
  prefs: []
  type: TYPE_PRE
  zh: '[PRE275]'
- en: '[PRE276]'
  id: totrans-675
  prefs: []
  type: TYPE_PRE
  zh: '[PRE276]'
- en: '[PRE277]'
  id: totrans-676
  prefs: []
  type: TYPE_PRE
  zh: '[PRE277]'
- en: '[PRE278]'
  id: totrans-677
  prefs: []
  type: TYPE_PRE
  zh: '[PRE278]'
- en: '[PRE279]'
  id: totrans-678
  prefs: []
  type: TYPE_PRE
  zh: '[PRE279]'
- en: '[PRE280]'
  id: totrans-679
  prefs: []
  type: TYPE_PRE
  zh: '[PRE280]'
- en: '[PRE281]'
  id: totrans-680
  prefs: []
  type: TYPE_PRE
  zh: '[PRE281]'
- en: '[PRE282]'
  id: totrans-681
  prefs: []
  type: TYPE_PRE
  zh: '[PRE282]'
- en: '[PRE283]'
  id: totrans-682
  prefs: []
  type: TYPE_PRE
  zh: '[PRE283]'
- en: '[PRE284]'
  id: totrans-683
  prefs: []
  type: TYPE_PRE
  zh: '[PRE284]'
- en: '[PRE285]'
  id: totrans-684
  prefs: []
  type: TYPE_PRE
  zh: '[PRE285]'
- en: '[PRE286]'
  id: totrans-685
  prefs: []
  type: TYPE_PRE
  zh: '[PRE286]'
- en: '[PRE287]'
  id: totrans-686
  prefs: []
  type: TYPE_PRE
  zh: '[PRE287]'
- en: There are a great deal of confirmed subdomains coming back in the output. The
    command structure is straightforward. -d is used to define the domain needed to
    look at and then -t to specify the type, in this case brt or “Brute Force.” We
    then fed it a list of potential subdomains to use with the -D switch, followed
    by the use of the standard name list that ships with dnsrecon in Kali. There were
    a lot more results than those listed too. Try experimenting with independent domains,
    to see what can be found.
  id: totrans-687
  prefs: []
  type: TYPE_NORMAL
  zh: 输出中返回了大量已确认的子域。命令结构很简单。-d用于定义需要查看的域，然后-t用于指定类型，这里是brt或“暴力破解”。然后我们使用-D开关提供了一个潜在子域名列表，然后使用Kali中附带的标准名称列表。还有比列出的更多的结果。尝试使用独立的域名进行实验，看看能发现什么。
- en: 'There are some wordlists and alternative methods that are definitely worth
    exploring. First of all, Ryan Dewhurst A.K.A @ethicalhack3r did some research
    on the topic. By leveraging the Alexa top 1 million, and attempting a zone transfer
    against each domain, he was able to get a 6% success rate. This obviously yielded
    massive amounts of data as far as plain text lists go. Ryan kindly split that
    data up into more usable files for us to use. You can check out the full post
    here: [http://www.ethicalhack3r.co.uk/zone-transfers-on-the-alexa-top-1-million-part-2/#more-17123](http://www.ethicalhack3r.co.uk/zone-transfers-on-the-alexa-top-1-million-part-2/#more-17123).'
  id: totrans-688
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些单词列表和备选方法绝对值得探索。首先，Ryan Dewhurst，又名@ethicalhack3r对这个主题进行了一些研究。通过利用Alexa前100万名，并对每个域尝试区域传送，他能够获得6%的成功率。这显然产生了大量的数据，就纯文本列表而言是如此。Ryan友善地将这些数据分割成更可用的文件供我们使用。您可以在这里查看完整的帖子：[http://www.ethicalhack3r.co.uk/zone-transfers-on-the-alexa-top-1-million-part-2/#more-17123](http://www.ethicalhack3r.co.uk/zone-transfers-on-the-alexa-top-1-million-part-2/#more-17123)。
- en: If Ryan’s “Subdomains top 5000” list is used, are better results seen? Over
    time this is highly likely as these are real world subdomains over a broad scope.
  id: totrans-689
  prefs: []
  type: TYPE_NORMAL
  zh: 如果使用Ryan的“子域前5000名”列表，会看到更好的结果吗？随着时间的推移，这很有可能，因为这些是真实世界的子域名，涵盖了广泛的范围。
- en: As a direct comparison, dnsrecon was run against [apple.com](http://apple.com)
    with both the standard “namelist.txt” and Ryan’s “subdomains-top1mil-5000.txt.”
    The namelist.txt file returned 194 records. The “subdomains-top1mil-5000.txt”
    file returned 408 records. Certainly food for thought in any case.
  id: totrans-690
  prefs: []
  type: TYPE_NORMAL
  zh: 作为直接比较，dnsrecon针对[apple.com](http://apple.com)同时使用标准的“namelist.txt”和Ryan的“subdomains-top1mil-5000.txt”进行了运行。namelist.txt文件返回了194条记录。“subdomains-top1mil-5000.txt”文件返回了408条记录。无论如何，这都是值得思考的问题。
- en: What if we wanted to be more targeted with our attempts though? What can we
    do if we want to generate a list that is specific to the business we are targeting?
  id: totrans-691
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，如果我们想要更有针对性地尝试呢？如果我们想要生成一个特定于我们所针对的业务的列表，我们可以做些什么？
- en: CeWL—[http://www.digininja.org/projects/cewl.php](http://www.digininja.org/projects/cewl.php)
  id: totrans-692
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CeWL—[http://www.digininja.org/projects/cewl.php](http://www.digininja.org/projects/cewl.php)
- en: Robin Wood’s CeWL project is a Ruby application that will Spider a target website,
    and build a wordlist based on that site’s content. While the vast majority of
    use cases for the tool are to build password lists, good results have been observed
    when used as a subdomain list generator. In essence, it will provide about as
    targeted a list as we could hope for. Every single word in the list comes directly
    from the target’s website.
  id: totrans-693
  prefs: []
  type: TYPE_NORMAL
  zh: Robin Wood 的 CeWL 项目是一个 Ruby 应用程序，将 Spider 目标网站，并基于该站点的内容构建一个单词列表。虽然该工具的绝大多数用例是构建密码列表，但在用作子域列表生成器时也观察到了良好的结果。实质上，它将提供我们所希望的大致定位列表。列表中的每个单词都直接来自目标网站。
- en: 'Here’s how the command looks:'
  id: totrans-694
  prefs: []
  type: TYPE_NORMAL
  zh: 命令的样子如下：
- en: '[PRE288]'
  id: totrans-695
  prefs: []
  type: TYPE_PRE
  zh: '[PRE288]'
- en: 'The help file is always the best place to start. I’ll let you play around with
    the options, all we need for now is as follows:'
  id: totrans-696
  prefs: []
  type: TYPE_NORMAL
  zh: 帮助文件始终是最好的起点。我会让你尝试一下选项，现在我们所需的只有以下内容：
- en: '[PRE289]'
  id: totrans-697
  prefs: []
  type: TYPE_PRE
  zh: '[PRE289]'
- en: Pay attention to the depth option. As we touched upon when talking about Spidering,
    we don’t want go crawl every link on a gigantic site. It will take forever, and
    if you are midengagement, you may even set alarm bells ringing.
  id: totrans-698
  prefs: []
  type: TYPE_NORMAL
  zh: 注意深度选项。正如我们在谈论 Spidering 时提到的，我们不希望爬取庞大网站上的每个链接。这将耗费大量时间，如果您正在进行中的任务，甚至可能引起警报。
- en: CeWL will print the output to screen by default, but you could pipe it to a
    file if needed.
  id: totrans-699
  prefs: []
  type: TYPE_NORMAL
  zh: CeWL 默认会将输出打印到屏幕上，但如果需要，您可以将其重定向到文件中。
- en: The CeWL generated wordlist returned 171 record overall. While it doesn’t return
    anywhere near as many results as the “5000.txt file”, it will often pick out the
    handful that would otherwise have been missed as they are very business specific.
    This is why it is always a good idea to use both methods to ensure good coverage.
    The total size of our sorted and trimmed subdomain list is 282 entries in total.
    Try these methods against your own domain and see how few are missed.
  id: totrans-700
  prefs: []
  type: TYPE_NORMAL
  zh: CeWL 生成的单词列表总共返回了 171 条记录。虽然它的结果远不及“5000.txt 文件”那么多，但通常会挑出那些否则会被忽略的几个，因为它们非常特定于业务。这就是为什么始终建议同时使用两种方法以确保良好的覆盖范围。我们排序和修剪后的子域列表的总大小为
    282 个条目。尝试对您自己的域名使用这些方法，看看有多少被忽略。
- en: Whois records
  id: totrans-701
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Whois 记录
- en: We touched briefly upon Whois records when talking about e-mail address harvesting.
    As well as e-mail addresses, they also provide us with other useful intelligence.
  id: totrans-702
  prefs: []
  type: TYPE_NORMAL
  zh: 在谈论电子邮件地址收集时，我们简要提到了 Whois 记录。除了电子邮件地址外，它们还为我们提供其他有用的情报。
- en: First of all, a Whois can identify the address space assigned to an organization.
    Start by performing an nslookup against the target website, then perform a Whois
    of the IP Address that comes back.
  id: totrans-703
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，Whois 可以识别分配给组织的地址空间。首先执行针对目标网站的 nslookup，然后对返回的 IP 地址执行 Whois。
- en: '[PRE290]'
  id: totrans-704
  prefs: []
  type: TYPE_PRE
  zh: '[PRE290]'
- en: '[PRE291]'
  id: totrans-705
  prefs: []
  type: TYPE_PRE
  zh: '[PRE291]'
- en: '[PRE292]'
  id: totrans-706
  prefs: []
  type: TYPE_PRE
  zh: '[PRE292]'
- en: '[PRE293]'
  id: totrans-707
  prefs: []
  type: TYPE_PRE
  zh: '[PRE293]'
- en: '[PRE294]'
  id: totrans-708
  prefs: []
  type: TYPE_PRE
  zh: '[PRE294]'
- en: '[PRE295]'
  id: totrans-709
  prefs: []
  type: TYPE_PRE
  zh: '[PRE295]'
- en: '[PRE296]'
  id: totrans-710
  prefs: []
  type: TYPE_PRE
  zh: '[PRE296]'
- en: '[PRE297]'
  id: totrans-711
  prefs: []
  type: TYPE_PRE
  zh: '[PRE297]'
- en: '[PRE298]'
  id: totrans-712
  prefs: []
  type: TYPE_PRE
  zh: '[PRE298]'
- en: '[PRE299]'
  id: totrans-713
  prefs: []
  type: TYPE_PRE
  zh: '[PRE299]'
- en: '[PRE300]'
  id: totrans-714
  prefs: []
  type: TYPE_PRE
  zh: '[PRE300]'
- en: '[PRE301]'
  id: totrans-715
  prefs: []
  type: TYPE_PRE
  zh: '[PRE301]'
- en: '[PRE302]'
  id: totrans-716
  prefs: []
  type: TYPE_PRE
  zh: '[PRE302]'
- en: '[PRE303]'
  id: totrans-717
  prefs: []
  type: TYPE_PRE
  zh: '[PRE303]'
- en: '[PRE304]'
  id: totrans-718
  prefs: []
  type: TYPE_PRE
  zh: '[PRE304]'
- en: '[PRE305]'
  id: totrans-719
  prefs: []
  type: TYPE_PRE
  zh: '[PRE305]'
- en: '[PRE306]'
  id: totrans-720
  prefs: []
  type: TYPE_PRE
  zh: '[PRE306]'
- en: '[PRE307]'
  id: totrans-721
  prefs: []
  type: TYPE_PRE
  zh: '[PRE307]'
- en: '[PRE308]'
  id: totrans-722
  prefs: []
  type: TYPE_PRE
  zh: '[PRE308]'
- en: '[PRE309]'
  id: totrans-723
  prefs: []
  type: TYPE_PRE
  zh: '[PRE309]'
- en: In this website, then the address space belongs to Akamai, but that won’t always
    be the case on your assessments. It is always worth looking to see if the target
    has their own registered address space, and then performing reconnaissance against
    that. Between this and your earlier DNS reconnaissance, you should have a good
    layout of their public facing resources.
  id: totrans-724
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个网站上，地址空间属于 Akamai，但在您的评估中情况并非总是如此。值得一提的是，查看目标是否拥有自己注册的地址空间，然后对其进行侦察。通过这一步和之前的
    DNS 侦察，您应该能够很好地了解他们的公共资源布局。
- en: Whois records also contain physical addresses, e-mail addresses, and phone numbers.
    One of our sales guys was recently trying to get through to the HQ of an organization,
    but the call center staff would not provide the number. A quick Whois later and
    we had the first number in the Direct Dial pool for the HQ, somebody answered
    and we spoke to the person we needed. This is not only useful to us, but evidence
    of what nontechnical people think is not public knowledge. Calling in with what
    is deemed to be privileged information adds weight to your claims.
  id: totrans-725
  prefs: []
  type: TYPE_NORMAL
  zh: Whois 记录还包含物理地址、电子邮件地址和电话号码。我们的销售人员最近试图联系一个组织的总部，但呼叫中心工作人员不愿提供号码。稍后进行快速的 Whois
    查询，我们得到了总部直拨池中的第一个号码，有人接听了电话，我们与所需的人交谈了。这不仅对我们有用，而且证明了非技术人员认为不是公开知识的内容。使用被视为特权信息打电话，可以增加您的主张的说服力。
- en: Another piece of information you will see a lot can also be leveraged by a social
    engineer. When you run the Whois and get back a hosting company, you already have
    a potential pretext. You could go with “*Hi, It’s Rob from XYZ* *hosting, we noticed
    a red light on one of the servers in your cab earlier, have you noticed any issues?*”
    At this point you can get a feel for how on-guard an individual is, wait and see
    what the response is—they may at least confirm that their systems are indeed hosted
    there, even if it is just by saying they didn’t notice a problem. Maybe go down
    the route of offering to KVM onto the system and figure out what is going on.
    You may end being given credentials that will work elsewhere. Whatever the pitch
    you choose, you can at least make the call with a usable pretext.
  id: totrans-726
  prefs: []
  type: TYPE_NORMAL
  zh: 你将经常看到的另一条信息也可以被社会工程师利用。当你运行 Whois 并得到一个托管公司时，你已经有了一个潜在的借口。你可以说：“*嗨，我是来自 XYZ
    托管的 Rob，我们早些时候在您的机柜中的一个服务器上看到了一个红灯，您有没有注意到任何问题？*”此时你可以感受到个人的警惕程度，等待并看看回应是什么——他们可能至少会确认他们的系统确实是托管在那里的，即使只是说他们没有注意到问题。也许可以提供
    KVM 登录到系统并弄清楚发生了什么。你可能会得到在其他地方也管用的凭证。无论你选择什么样的理由，你至少可以带着一个可用的借口打电话。
- en: An alternative would be to register an e-mail domain that is similar to the
    hosting company, and send a planned outage e-mail for a business critical time
    of the day. The reaction to this e-mail is likely to be panic, and you may just
    catch someone off-guard who will click your malicious link. What your e-mail contains
    will be covered in our chapter on e-mail attacks. As a starter though, I would
    say a cloned customer portal for the hosting company would be a safe bet.
  id: totrans-727
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种选择是注册一个与托管公司类似的电子邮件域，并在业务关键时间发送计划中的停机邮件。对这封邮件的反应很可能是恐慌，你可能会在不经意间捕捉到一个会点击你恶意链接的人。你的邮件内容将在我们关于电子邮件攻击的章节中讨论。不过，作为一个入门，我会说为托管公司创建一个克隆的客户门户是一个安全的选择。
- en: It is surprising what can be gleaned from a simple Whois. In many cases, organizations
    will have the records sanitized to avoid abuse.
  id: totrans-728
  prefs: []
  type: TYPE_NORMAL
  zh: 从一个简单的 Whois 中可以得到令人惊讶的信息。在许多情况下，组织会对记录进行清理以避免滥用。
- en: Making use of the intel
  id: totrans-729
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 利用情报
- en: We have covered the manipulation of data as we have moved through this chapter.
    In essence, there will be data that we will make use of directly and indirectly.
    When I say indirect, I mean calling up a help desk and name dropping a VPN portal’s
    URL, or a user’s e-mail address. When I say directly, I’m thinking more along
    the lines of straight password attacks against the target’s assets. To perform
    attacks of this nature, we need to build user lists from the data we have harvested.
  id: totrans-730
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在本章中穿插讨论了数据的操作。本质上，有数据我们会直接使用，也有间接使用。当我说间接时，我指的是打电话给帮助台并提及 VPN 门户的 URL 或用户的电子邮件地址。当我说直接时，我更多地考虑对目标资产进行直接密码攻击。要执行这种类型的攻击，我们需要从我们收集到的数据中构建用户列表。
- en: 'Let’s take the earlier Jigsaw module in recon-ng as an example. We used the
    ‘recon/contacts/gather/http/web/jigsaw’ module to gather contacts for a business.
    Once the module has finished, we can view the results by entering “show contacts.”
    We can also choose to drop the results into a comma separated values (CSV) file
    by entering “use reporting/csv_file” and then typing “run”. The output will look
    a little like the below:'
  id: totrans-731
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们以前面 recon-ng 中的 Jigsaw 模块为例。我们使用 'recon/contacts/gather/http/web/jigsaw'
    模块来收集一个企业的联系人。模块完成后，我们可以输入“show contacts”来查看结果。我们也可以选择将结果放入一个逗号分隔值 (CSV) 文件中，方法是输入“use
    reporting/csv_file”，然后输入“run”。输出看起来会像下面这样：
- en: '[PRE310]'
  id: totrans-732
  prefs: []
  type: TYPE_PRE
  zh: '[PRE310]'
- en: '[PRE311]'
  id: totrans-733
  prefs: []
  type: TYPE_PRE
  zh: '[PRE311]'
- en: '[PRE312]'
  id: totrans-734
  prefs: []
  type: TYPE_PRE
  zh: '[PRE312]'
- en: '[PRE313]'
  id: totrans-735
  prefs: []
  type: TYPE_PRE
  zh: '[PRE313]'
- en: '[PRE314]'
  id: totrans-736
  prefs: []
  type: TYPE_PRE
  zh: '[PRE314]'
- en: '[PRE315]'
  id: totrans-737
  prefs: []
  type: TYPE_PRE
  zh: '[PRE315]'
- en: '[PRE316]'
  id: totrans-738
  prefs: []
  type: TYPE_PRE
  zh: '[PRE316]'
- en: As with the last Jigsaw example, my route now would be to try and establish
    an actual e-mail address convention, typically by looking on the corporate website
    or checking Whois records. Let’s say for the sake of argument the target users
    [firstname.lastname@offensivesite.com](mailto:firstname.lastname@offensivesite.com).
    We can manipulate the above CSV file to build that list for us.
  id: totrans-739
  prefs: []
  type: TYPE_NORMAL
  zh: 就像上一个 Jigsaw 示例一样，我的做法现在是尝试建立一个实际的电子邮件地址约定，通常是通过查看公司网站或检查 Whois 记录来完成。举个例子，为了论证目的，我们假设目标用户的电子邮件是
    [firstname.lastname@offensivesite.com](mailto:firstname.lastname@offensivesite.com)。我们可以操纵上述
    CSV 文件来为我们构建该列表。
- en: '[PRE317]'
  id: totrans-740
  prefs: []
  type: TYPE_PRE
  zh: '[PRE317]'
- en: '[PRE318]'
  id: totrans-741
  prefs: []
  type: TYPE_PRE
  zh: '[PRE318]'
- en: '[PRE319]'
  id: totrans-742
  prefs: []
  type: TYPE_PRE
  zh: '[PRE319]'
- en: '[PRE320]'
  id: totrans-743
  prefs: []
  type: TYPE_PRE
  zh: '[PRE320]'
- en: '[PRE321]'
  id: totrans-744
  prefs: []
  type: TYPE_PRE
  zh: '[PRE321]'
- en: '[PRE322]'
  id: totrans-745
  prefs: []
  type: TYPE_PRE
  zh: '[PRE322]'
- en: '[PRE323]'
  id: totrans-746
  prefs: []
  type: TYPE_PRE
  zh: '[PRE323]'
- en: '[PRE324]'
  id: totrans-747
  prefs: []
  type: TYPE_PRE
  zh: '[PRE324]'
- en: Obviously this is of benefit where the lists are much larger, which they were
    in this instance, for sanity’s sake this has been kept brief. First stripping
    out the quotes, before printing the first and second fields (first name and last
    name) based on a comma delimiter. Next, appending the @companyname.com to the
    end of each line. There are more elegant ways to go about this, but this is quick
    and it works and therefore it will be a case of experimenting for the one that
    suits best. Microsoft users may employ to manipulate data in this fashion. Even
    for a Windows guy or girl, it’s definitely worth having a Linux VM on hand to
    perform data manipulation.
  id: totrans-748
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，在列表更大的情况下，这是有利的，就像在这个例子中一样，为了清醒起见，这里只是简要描述。首先剥离引号，然后基于逗号分隔符打印第一个和第二个字段（名字和姓氏）。接下来，在每一行的末尾附加
    @companyname.com。有更优雅的方法来做这件事，但这是快速并且有效的，因此将尝试找到最合适的方法。Microsoft 用户可以使用这种方式来操纵数据。即使对于
    Windows 用户来说，随时准备一个 Linux 虚拟机来执行数据操作也是值得的。
- en: Try combining the above list with the e-mail addresses gathered during the entire
    reconnaissance exercise. This could be split up into groups for targeted and broad
    scope phishing attacks, as well as using them for password attacks against public
    facing portals. All of this really boils down to the scope that has been given.
    As already mentioned, hybrid assessments include elements of penetration testing
    and social engineering, so password attacks against OWA are not beyond the realms
    of possibility.
  id: totrans-749
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试将上述列表与整个侦察过程中收集到的电子邮件地址结合起来。这可以分成针对性和广泛范围的网络钓鱼攻击组，以及在面向公众的门户网站上使用它们进行密码攻击。所有这些都归结为已确定的范围。如前所述，混合评估包括渗透测试和社会工程学的元素，因此对
    OWA 的密码攻击并非不可能。
- en: 'The Metasploit framework ships with a module for password attacking OWA. The
    “auxiliary/scanner/http/owa_login” only needs to be configured with the following
    details to work:'
  id: totrans-750
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit 框架附带了一个针对 OWA 的密码攻击模块。“auxiliary/scanner/http/owa_login” 只需配置以下细节即可工作：
- en: RHOST—The target IP Address of the OWA system.
  id: totrans-751
  prefs: []
  type: TYPE_NORMAL
  zh: RHOST — OWA 系统的目标 IP 地址。
- en: RPORT—The port that OWA is listening on, which is typically 443.
  id: totrans-752
  prefs: []
  type: TYPE_NORMAL
  zh: RPORT — OWA 正在监听的端口，通常是 443。
- en: USER_FILE—The output we have created above. Often “firstname.lastname” will
    work as well as the full e-mail address.
  id: totrans-753
  prefs: []
  type: TYPE_NORMAL
  zh: USER_FILE — 我们上面创建的输出。通常“firstname.lastname”也可以像完整的电子邮件地址一样起作用。
- en: PASSWORD—Start with the basics. Password1, password, password1\. If a lot of
    contacts have been retrieved, the chances of finding one of these are high. Don’t
    forget to try the organization’s name too.
  id: totrans-754
  prefs: []
  type: TYPE_NORMAL
  zh: PASSWORD — 从基础开始。Password1、password、password1\. 如果检索到了许多联系人，则找到其中之一的机会很高。不要忘记尝试组织的名称。
- en: When running the module it will try the specified password against every user
    that has been harvested, displaying any successes or failures. Unfortunately there
    is a need to be aware that there is a likelihood of locking out accounts. Most
    certainly, it will be like flying blind unless someone can be convinced of giving
    out the lockout policy over the phone. Err on the side of caution and keep the
    attempts to a couple every 30 minutes or so. This should be below the most common
    lockout threshold of three attempts before lockout with a 30-minutes reset timer
    on the attempts.
  id: totrans-755
  prefs: []
  type: TYPE_NORMAL
  zh: 运行模块时，它将针对已获取的每个用户尝试指定的密码，显示任何成功或失败。不幸的是，需要注意的是，有可能会锁定账户。毫无疑问，这将像盲目飞行一样，除非有人愿意通过电话透露锁定策略。务必慎重行事，并将尝试次数控制在每
    30 分钟一到两次以下。这应该低于大多数锁定前尝试次数为三次，并在尝试的 30 分钟后重置计时器的阈值。
- en: If running a password attack and access to a handful of accounts is gained,
    what happens next? If the scope allows for it, check for sensitive information
    within the e-mails. Further access details may be discovered for additional systems
    or information that the client has asked to be compromised.
  id: totrans-756
  prefs: []
  type: TYPE_NORMAL
  zh: 如果进行密码攻击并获得了一些账户的访问权限，接下来会发生什么？如果范围允许，检查电子邮件中的敏感信息。可能会发现更多的系统或客户要求被侵犯的信息的进一步访问详细信息。
- en: Having completed this step, the entire corporate address list could be downloaded,
    enabling yet another password attack against OWA. This may provide a more privileged
    account than was already possessed.
  id: totrans-757
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了这一步之后，整个公司的地址列表就可以下载了，从而使得对 OWA 的另一种密码攻击成为可能。这可能提供了比已经拥有的更特权的账户。
- en: This account could also be used as a base for further phishing attacks, only
    this time they will be coming from inside the business and are much more likely
    to be trusted. It is likely that the victim will get wise when they see the responses
    come pouring in.
  id: totrans-758
  prefs: []
  type: TYPE_NORMAL
  zh: 这个账户也可以被用作进一步钓鱼攻击的基础，只不过这一次攻击将来自企业内部，更有可能被信任。当受害者看到回应纷至沓来时，他们可能会警觉起来。
- en: Another interesting idea is to attach a malicious attachment to a meeting request
    or calendar entry. People are far less likely to be suspicious as we are so used
    to being told that e-mail attachments are the root of all evil. Another angle
    is to try and employ these accounts against other systems. It is common to find
    that VPN systems are tied into Active Directory for their authentication. It may
    be possible to gain remote access to internal servers through Citrix. At this
    point, it may be getting far beyond the scope of this text and well into the realms
    of penetration testing.
  id: totrans-759
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个有趣的想法是将恶意附件附加到会议请求或日历条目中。人们很少会怀疑，因为我们习惯于被告知电子邮件附件是万恶之源。另一个角度是尝试利用这些账户攻击其他系统。通常会发现VPN系统与Active
    Directory绑定进行身份验证。可能可以通过 Citrix 获得对内部服务器的远程访问。此时，这可能已经远远超出了本文的范围，而进入了渗透测试的领域。
- en: Summary
  id: totrans-760
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, we have covered many aspects of reconnaissance for social engineering
    and penetration testing. We have looked at using the corporate website as a source
    of intelligence and highlighted the types of information that could be retrieved.
    We have looked at search engine harvesting and the impact of living in such a
    connected age. We then looked at e-mail address harvesting and discussed why this
    seemingly harmless piece of information can be used against us when it finds its
    way into the wrong hands.
  id: totrans-761
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们涵盖了社会工程和渗透测试的侦察的许多方面。我们研究了如何利用企业网站作为情报来源，并突出了可以检索到的信息类型。我们研究了搜索引擎收集和生活在如此互联的时代的影响。然后我们研究了电子邮件地址收集，并讨论了为什么这看似无害的信息在落入错误手中时会被用来对付我们。
- en: No discussion on reconnaissance would be complete without looking at the more
    popular social networking sites. While there are far more than just the big three
    that we discussed, these are certainly the most relevant today. We took a look
    at bypassing some of LinkedIn’s restrictions to gain contact details, as well
    as using Facebook’s graph search to surprising effect.
  id: totrans-762
  prefs: []
  type: TYPE_NORMAL
  zh: 没有探讨侦察的讨论会完整，而不看一下更受欢迎的社交网络网站。虽然我们讨论的不仅仅是这三大社交网站，但它们今天肯定是最相关的。我们看了一下如何绕过 LinkedIn
    的一些限制来获取联系方式，以及如何利用 Facebook 的图搜索产生惊人的效果。
- en: We also looked at how to use DNS and Whois records to augment your assessment,
    and how they often contain more information than is sensible.
  id: totrans-763
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还研究了如何使用 DNS 和 Whois 记录来增强您的评估，以及它们通常包含比较明智的更多信息。
- en: To finish things up, we had a brief look at manipulating that data with a view
    to using it in an attack.
  id: totrans-764
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们简要地研究了如何操纵这些数据，以便在攻击中使用。
- en: As luck would have it, or maybe careful planning, we will now move into e-mail
    attack vectors within our next chapter. That means we get to use a lot of the
    data that we have just gathered in a series of attacks.
  id: totrans-765
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，或许是精心策划，我们现在将进入下一章节中的电子邮件攻击向量。这意味着我们可以利用刚刚收集到的大量数据进行一系列攻击。
