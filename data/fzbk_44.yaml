- en: Timeout
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 超时
- en: 原文：[http://www.fuzzingbook.org/html/Timeout.html](http://www.fuzzingbook.org/html/Timeout.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[http://www.fuzzingbook.org/html/Timeout.html](http://www.fuzzingbook.org/html/Timeout.html)
- en: The code in this notebook helps in interrupting execution after a given time.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本笔记本中的代码有助于在给定时间后中断执行。
- en: '**Prerequisites**'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '**先决条件**'
- en: This notebook needs some understanding on advanced concepts in Python, notably
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这个笔记本需要对 Python 的高级概念有所了解，特别是
- en: classes
  id: totrans-5
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类
- en: the Python `with` statement
  id: totrans-6
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 的 `with` 语句
- en: the Python `signal` functions
  id: totrans-7
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 的 `signal` 函数
- en: measuring time
  id: totrans-8
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测量时间
- en: Synopsis
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概述
- en: To [use the code provided in this chapter](Importing.html), write
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 要 [使用本章节提供的代码](Importing.html)，请编写
- en: '[PRE0]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: and then make use of the following features.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 然后利用以下功能。
- en: 'The `Timeout` class throws a `TimeoutError` exception after a given timeout
    has expired. Its typical usage is in conjunction with a `with` clause:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '`Timeout` 类在给定超时时间到期后抛出 `TimeoutError` 异常。它的典型用法是与 `with` 语句结合使用：'
- en: '[PRE1]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Note: On Unix/Linux systems, the `Timeout` class uses [`SIGALRM` signals](https://docs.python.org/3.10/library/signal.html)
    (interrupts) to implement timeouts; this has no effect on performance of the tracked
    code. On other systems (notably Windows), `Timeout` uses the [`sys.settrace()`](https://docs.python.org/3.10/library/sys.html?highlight=settrace#sys.settrace)
    function to check the timer after each line of code, which affects performance
    of the tracked code.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：在 Unix/Linux 系统上，`Timeout` 类使用 [SIGALRM 信号](https://docs.python.org/3.10/library/signal.html)（中断）来实现超时；这对跟踪代码的性能没有影响。在其他系统（特别是
    Windows）上，`Timeout` 使用 [sys.settrace()](https://docs.python.org/3.10/library/sys.html?highlight=settrace#sys.settrace)
    函数在每行代码后检查计时器，这会影响跟踪代码的性能。
- en: Measuring Time
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测量时间
- en: The class `Timeout` allows interrupting some code execution after a given time
    interval.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '`Timeout` 类允许在给定时间间隔后中断某些代码执行。'
- en: '[PRE2]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Variant 1: Unix (using signals, efficient)'
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 变体 1：Unix（使用信号，高效）
- en: '[PRE5]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '[PRE6]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Here''s an example:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个例子：
- en: '[PRE7]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Variant 2: Generic / Windows (using trace, not very efficient)'
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 变体 2：通用/Windows（使用跟踪，效率不高）
- en: '[PRE10]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Again, our example:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 再次，我们的例子：
- en: '[PRE12]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Choosing the right variant
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择正确的变体
- en: '[PRE14]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Exercises
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 练习
- en: Create a `Timeout` variant that works efficiently on Windows. Note that how
    to do this a long debated issue in programming forums.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个在 Windows 上高效运行的 `Timeout` 变体。请注意，如何在编程论坛上这是一个长期争论的问题。
- en: '![Creative Commons License](../Images/2f3faa36146c6fb38bbab67add09aa5f.png)
    The content of this project is licensed under the [Creative Commons Attribution-NonCommercial-ShareAlike
    4.0 International License](https://creativecommons.org/licenses/by-nc-sa/4.0/).
    The source code that is part of the content, as well as the source code used to
    format and display that content is licensed under the [MIT License](https://github.com/uds-se/fuzzingbook/blob/master/LICENSE.md#mit-license).
    [Last change: 2023-11-11 18:25:46+01:00](https://github.com/uds-se/fuzzingbook/commits/master/notebooks/Timeout.ipynb)
    • [Cite](#citation) • [Imprint](https://cispa.de/en/impressum)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![Creative Commons License](../Images/2f3faa36146c6fb38bbab67add09aa5f.png)
    本项目的内容受 [Creative Commons Attribution-NonCommercial-ShareAlike 4.0 国际许可协议](https://creativecommons.org/licenses/by-nc-sa/4.0/)
    的许可。作为内容一部分的源代码，以及用于格式化和显示该内容的源代码，受 [MIT 许可协议](https://github.com/uds-se/fuzzingbook/blob/master/LICENSE.md#mit-license)
    的许可。 [最后更改：2023-11-11 18:25:46+01:00](https://github.com/uds-se/fuzzingbook/commits/master/notebooks/Timeout.ipynb)
    • [引用](#citation) • [版权信息](https://cispa.de/en/impressum)'
- en: How to Cite this Work
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何引用本作品
- en: 'Andreas Zeller, Rahul Gopinath, Marcel Böhme, Gordon Fraser, and Christian
    Holler: "[Timeout](https://www.fuzzingbook.org/html/Timeout.html)". In Andreas
    Zeller, Rahul Gopinath, Marcel Böhme, Gordon Fraser, and Christian Holler, "[The
    Fuzzing Book](https://www.fuzzingbook.org/)", [https://www.fuzzingbook.org/html/Timeout.html](https://www.fuzzingbook.org/html/Timeout.html).
    Retrieved 2023-11-11 18:25:46+01:00.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 'Andreas Zeller, Rahul Gopinath, Marcel Böhme, Gordon Fraser, and Christian
    Holler: "[Timeout](https://www.fuzzingbook.org/html/Timeout.html)". In Andreas
    Zeller, Rahul Gopinath, Marcel Böhme, Gordon Fraser, and Christian Holler, "[The
    Fuzzing Book](https://www.fuzzingbook.org/)", [https://www.fuzzingbook.org/html/Timeout.html](https://www.fuzzingbook.org/html/Timeout.html).
    Retrieved 2023-11-11 18:25:46+01:00.'
- en: '[PRE15]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
