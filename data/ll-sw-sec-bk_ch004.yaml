- en: 4 Supply chain attacks
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4 供应链攻击
- en: A software *supply chain attack* occurs when an attacker interferes with the
    software development or distribution processes with the intention to impact users
    of that software.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 当攻击者有意干扰软件开发或分发过程以影响该软件的用户时，就会发生软件 *供应链攻击*。
- en: Supply chain attacks and their possible mitigations are not specific to compilers.
    However, compilers are an attractive target for attack because they are widely
    deployed to developers, in continuous integration systems and as JITs. Also, an
    infected compiler has the possibility to make a much larger impact if it can silently
    spread the infection to other software created with or run using it.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 供应链攻击及其可能的缓解措施并不仅限于编译器。然而，编译器因其广泛部署给开发者、在持续集成系统和作为即时编译器（JITs）中使用而成为攻击的诱人目标。此外，如果一个受感染的编译器能够静默地将感染传播到使用或运行它的其他软件中，它可能会产生更大的影响。
- en: This chapter explores the history of supply chain attacks that involve compilers
    and what can be done to prevent them.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章探讨了涉及编译器的供应链攻击的历史以及可以采取哪些措施来预防它们。
- en: 4.1 History of supply chain attacks
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1 供应链攻击的历史
- en: As far back as 1974 Karger & Schell theorized about an attack on the Multics
    operating system via the PL/I compiler [@Karger1974]. In this attack, a trap door
    is inserted into the compiler, which then injects malicious code into generated
    object code. Furthermore, the trap door could be designed to reinsert itself into
    the compiler binary so that future compilers are silently infected without needing
    changes to their source code. This attack method was subsequently popularized
    by Ken Thompson in his 1984 ACM Turing Award acceptance speech *Reflections on
    Trusting Trust* [@Thompson1984].
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 早在 1974 年，Karger 和 Schell 就提出了通过 PL/I 编译器攻击 Multics 操作系统的理论 [@Karger1974]。在这场攻击中，向编译器中插入了一个陷阱门，然后它将恶意代码注入到生成的目标代码中。此外，陷阱门可以设计成重新插入编译器二进制文件中，这样未来的编译器在无需更改其源代码的情况下也会被静默感染。这种方法随后在
    Ken Thompson 1984 年的 ACM 图灵奖获奖感言 *信任的反思* 中被普及化 [@Thompson1984]。
- en: If these cases seem far-fetched then consider that there have been several real
    examples of supply chain attacks on development tools.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些案例看起来有些牵强，那么考虑一下，已经有一些针对开发工具的供应链攻击的真实例子。
- en: Induc is a family of viruses that infects a pre-compiled library in the Delphi
    toolchain with malicious code [@Gostev2009]. When Delphi compiles a project the
    malicious library is included into the resulting executable, thus enabling the
    virus to spread. The virus was first detected in 2009 and was circulating undetected
    for at least a year beforehand. Several popular applications are known to have
    been infected, including a chat client and a media player. Overall, in excess
    of a hundred thousand infected computers were detected world-wide by anti-virus
    solutions.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Induc 是一种病毒家族，它感染了 Delphi 工具链中的预编译库并注入恶意代码 [@Gostev2009]。当 Delphi 编译项目时，恶意库被包含在生成的可执行文件中，从而使得病毒能够传播。该病毒首次于
    2009 年被发现，在此之前至少已经传播了一年。已知一些流行的应用程序已被感染，包括一个聊天客户端和一个媒体播放器。总的来说，全球检测到的受感染计算机超过十万台。
- en: XcodeGhost is the name given to malware first detected in 2015 that infected
    thousands of iOS applications [@Cox2015]. The source of the infection was tracked
    down to a trojanized version of Xcode tools. The malware exists in an extra object
    file within the Xcode tools and is silently linked into each application as it
    is built. File sharing sites were used to spread the trojanized Xcode tools to
    unwitting developers.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: XcodeGhost 是 2015 年首次发现的恶意软件的名称，它感染了数千个 iOS 应用程序 [@Cox2015]。感染的源头被追踪到一个被木马化的
    Xcode 工具版本。恶意软件存在于 Xcode 工具中的一个额外目标文件中，并在构建过程中静默地链接到每个应用程序中。文件共享网站被用来向不知情的开发者传播被木马化的
    Xcode 工具。
- en: A trojanized linker was found to be involved in a supply chain attack discovered
    in 2017 named ShadowPad [@Greenberg2019]. Some instances of the attack were perpetrated
    using a trojanized Visual Studio linker that silently incorporates a malicious
    library into applications as they are built. Related attacks named CCleaner and
    ShadowHammer used the same approach of a trojanized linker to infect built applications.
    Infected applications from these attacks were distributed to millions of users
    world-wide.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在 2017 年发现的一项名为 ShadowPad 的供应链攻击中，发现了一个被木马化的链接器参与了攻击 [@Greenberg2019]。一些攻击实例使用了被木马化的
    Visual Studio 链接器，它在构建应用程序时静默地将恶意库包含到应用程序中。名为 CCleaner 和 ShadowHammer 的相关攻击使用了相同的被木马化的链接器方法来感染构建的应用程序。这些攻击的受感染应用程序被分发到全球数百万用户。
- en: These cases highlight that attacks on compilers, and especially linkers and
    libraries, are a viable route to silently infect many other applications, and
    there is no doubt that there will be more such attacks in the future. Let us now
    explore what we can do about these.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 这些案例突显出攻击编译器，尤其是链接器和库，是悄无声息地感染许多其他应用的可行途径，而且毫无疑问，未来将会有更多此类攻击。现在让我们探讨我们能做些什么来应对这些问题。
- en: Explain how these vulnerabilities arise and how to mitigate them. [#180](https://github.com/llsoftsec/llsoftsecbook/issues/180)
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 解释这些漏洞是如何产生的以及如何减轻它们。[#180](https://github.com/llsoftsec/llsoftsecbook/issues/180)
